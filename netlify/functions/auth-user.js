"use strict";var yy=Object.create;var vn=Object.defineProperty;var by=Object.getOwnPropertyDescriptor;var vy=Object.getOwnPropertyNames;var wy=Object.getPrototypeOf,_y=Object.prototype.hasOwnProperty;var j=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Sy=(r,e)=>{for(var t in e)vn(r,t,{get:e[t],enumerable:!0})},Rc=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of vy(e))!_y.call(r,n)&&n!==t&&vn(r,n,{get:()=>e[n],enumerable:!(s=by(e,n))||s.enumerable});return r};var kr=(r,e,t)=>(t=r!=null?yy(wy(r)):{},Rc(e||!r||!r.__esModule?vn(t,"default",{value:r,enumerable:!0}):t,r)),Ey=r=>Rc(vn({},"__esModule",{value:!0}),r);var Xf=j((dR,Zf)=>{"use strict";var{Duplex:P0}=require("stream");function Kf(r){r.emit("close")}function O0(){!this.destroyed&&this._writableState.finished&&this.destroy()}function Hf(r){this.removeListener("error",Hf),this.destroy(),this.listenerCount("error")===0&&this.emit("error",r)}function R0(r,e){let t=!0,s=new P0({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return r.on("message",function(i,o){let a=!o&&s._readableState.objectMode?i.toString():i;s.push(a)||r.pause()}),r.once("error",function(i){s.destroyed||(t=!1,s.destroy(i))}),r.once("close",function(){s.destroyed||s.push(null)}),s._destroy=function(n,i){if(r.readyState===r.CLOSED){i(n),process.nextTick(Kf,s);return}let o=!1;r.once("error",function(c){o=!0,i(c)}),r.once("close",function(){o||i(n),process.nextTick(Kf,s)}),t&&r.terminate()},s._final=function(n){if(r.readyState===r.CONNECTING){r.once("open",function(){s._final(n)});return}r._socket!==null&&(r._socket._writableState.finished?(n(),s._readableState.endEmitted&&s.destroy()):(r._socket.once("finish",function(){n()}),r.close()))},s._read=function(){r.isPaused&&r.resume()},s._write=function(n,i,o){if(r.readyState===r.CONNECTING){r.once("open",function(){s._write(n,i,o)});return}r.send(n,o)},s.on("end",O0),s.on("error",Hf),s}Zf.exports=R0});var Bt=j((pR,eh)=>{"use strict";var Jf=["nodebuffer","arraybuffer","fragments"],Yf=typeof Blob<"u";Yf&&Jf.push("blob");eh.exports={BINARY_TYPES:Jf,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:Yf,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var gh=j((mR,mh)=>{var nh=require("fs"),Mt=require("path"),ih=require("os"),oh=typeof __webpack_require__=="function"?__non_webpack_require__:require,L0=process.config&&process.config.variables||{},k0=!!process.env.PREBUILDS_ONLY,th=process.versions.modules,su=M0()?"electron":B0()?"node-webkit":"node",nu=process.env.npm_config_arch||ih.arch(),iu=process.env.npm_config_platform||ih.platform(),ah=process.env.LIBC||(q0(iu)?"musl":"glibc"),ou=process.env.ARM_VERSION||(nu==="arm64"?"8":L0.arm_version)||"",uh=(process.versions.uv||"").split(".")[0];mh.exports=Et;function Et(r){return oh(Et.resolve(r))}Et.resolve=Et.path=function(r){r=Mt.resolve(r||".");try{var e=oh(Mt.join(r,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[e+"_PREBUILD"]&&(r=process.env[e+"_PREBUILD"])}catch{}if(!k0){var t=rh(Mt.join(r,"build/Release"),sh);if(t)return t;var s=rh(Mt.join(r,"build/Debug"),sh);if(s)return s}var n=a(r);if(n)return n;var i=a(Mt.dirname(process.execPath));if(i)return i;var o=["platform="+iu,"arch="+nu,"runtime="+su,"abi="+th,"uv="+uh,ou?"armv="+ou:"","libc="+ah,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+o+`
    loaded from: `+r+`
`);function a(c){var h=au(Mt.join(c,"prebuilds")).map(ch),l=h.filter(lh(iu,nu)).sort(fh)[0];if(l){var p=Mt.join(c,"prebuilds",l.name),g=au(p).map(hh),v=g.filter(dh(su,th)),m=v.sort(ph(su))[0];if(m)return Mt.join(p,m.file)}}};function au(r){try{return nh.readdirSync(r)}catch{return[]}}function rh(r,e){var t=au(r).filter(e);return t[0]&&Mt.join(r,t[0])}function sh(r){return/\.node$/.test(r)}function ch(r){var e=r.split("-");if(e.length===2){var t=e[0],s=e[1].split("+");if(t&&s.length&&s.every(Boolean))return{name:r,platform:t,architectures:s}}}function lh(r,e){return function(t){return t==null||t.platform!==r?!1:t.architectures.includes(e)}}function fh(r,e){return r.architectures.length-e.architectures.length}function hh(r){var e=r.split("."),t=e.pop(),s={file:r,specificity:0};if(t==="node"){for(var n=0;n<e.length;n++){var i=e[n];if(i==="node"||i==="electron"||i==="node-webkit")s.runtime=i;else if(i==="napi")s.napi=!0;else if(i.slice(0,3)==="abi")s.abi=i.slice(3);else if(i.slice(0,2)==="uv")s.uv=i.slice(2);else if(i.slice(0,4)==="armv")s.armv=i.slice(4);else if(i==="glibc"||i==="musl")s.libc=i;else continue;s.specificity++}return s}}function dh(r,e){return function(t){return!(t==null||t.runtime&&t.runtime!==r&&!$0(t)||t.abi&&t.abi!==e&&!t.napi||t.uv&&t.uv!==uh||t.armv&&t.armv!==ou||t.libc&&t.libc!==ah)}}function $0(r){return r.runtime==="node"&&r.napi}function ph(r){return function(e,t){return e.runtime!==t.runtime?e.runtime===r?-1:1:e.abi!==t.abi?e.abi?-1:1:e.specificity!==t.specificity?e.specificity>t.specificity?-1:1:0}}function B0(){return!!(process.versions&&process.versions.nw)}function M0(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function q0(r){return r==="linux"&&nh.existsSync("/etc/alpine-release")}Et.parseTags=hh;Et.matchTags=dh;Et.compareTags=ph;Et.parseTuple=ch;Et.matchTuple=lh;Et.compareTuples=fh});var lu=j((gR,cu)=>{var uu=typeof __webpack_require__=="function"?__non_webpack_require__:require;typeof uu.addon=="function"?cu.exports=uu.addon.bind(uu):cu.exports=gh()});var bh=j((yR,yh)=>{"use strict";var D0=(r,e,t,s,n)=>{for(var i=0;i<n;i++)t[s+i]=r[i]^e[i&3]},j0=(r,e)=>{let t=r.length;for(var s=0;s<t;s++)r[s]^=e[s&3]};yh.exports={mask:D0,unmask:j0}});var vh=j((bR,fu)=>{"use strict";try{fu.exports=lu()(__dirname)}catch{fu.exports=bh()}});var Vs=j((vR,Yn)=>{"use strict";var{EMPTY_BUFFER:F0}=Bt(),hu=Buffer[Symbol.species];function U0(r,e){if(r.length===0)return F0;if(r.length===1)return r[0];let t=Buffer.allocUnsafe(e),s=0;for(let n=0;n<r.length;n++){let i=r[n];t.set(i,s),s+=i.length}return s<e?new hu(t.buffer,t.byteOffset,s):t}function wh(r,e,t,s,n){for(let i=0;i<n;i++)t[s+i]=r[i]^e[i&3]}function _h(r,e){for(let t=0;t<r.length;t++)r[t]^=e[t&3]}function Q0(r){return r.length===r.buffer.byteLength?r.buffer:r.buffer.slice(r.byteOffset,r.byteOffset+r.length)}function du(r){if(du.readOnly=!0,Buffer.isBuffer(r))return r;let e;return r instanceof ArrayBuffer?e=new hu(r):ArrayBuffer.isView(r)?e=new hu(r.buffer,r.byteOffset,r.byteLength):(e=Buffer.from(r),du.readOnly=!1),e}Yn.exports={concat:U0,mask:wh,toArrayBuffer:Q0,toBuffer:du,unmask:_h};if(!process.env.WS_NO_BUFFER_UTIL)try{let r=vh();Yn.exports.mask=function(e,t,s,n,i){i<48?wh(e,t,s,n,i):r.mask(e,t,s,n,i)},Yn.exports.unmask=function(e,t){e.length<32?_h(e,t):r.unmask(e,t)}}catch{}});var xh=j((wR,Eh)=>{"use strict";var Sh=Symbol("kDone"),pu=Symbol("kRun"),mu=class{constructor(e){this[Sh]=()=>{this.pending--,this[pu]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[pu]()}[pu](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[Sh])}}};Eh.exports=mu});var Gs=j((_R,Ah)=>{"use strict";var zs=require("zlib"),Th=Vs(),V0=xh(),{kStatusCode:Ch}=Bt(),z0=Buffer[Symbol.species],W0=Buffer.from([0,0,255,255]),ri=Symbol("permessage-deflate"),qt=Symbol("total-length"),Ws=Symbol("callback"),Ht=Symbol("buffers"),ti=Symbol("error"),ei,gu=class{constructor(e,t,s){if(this._maxPayload=s|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!ei){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;ei=new V0(n)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Ws];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let t=this._options,s=e.find(n=>!(t.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(t.serverMaxWindowBits===!1||typeof t.serverMaxWindowBits=="number"&&t.serverMaxWindowBits>n.server_max_window_bits)||typeof t.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!s)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(s.server_no_context_takeover=!0),t.clientNoContextTakeover&&(s.client_no_context_takeover=!0),typeof t.serverMaxWindowBits=="number"&&(s.server_max_window_bits=t.serverMaxWindowBits),typeof t.clientMaxWindowBits=="number"?s.client_max_window_bits=t.clientMaxWindowBits:(s.client_max_window_bits===!0||t.clientMaxWindowBits===!1)&&delete s.client_max_window_bits,s}acceptAsClient(e){let t=e[0];if(this._options.clientNoContextTakeover===!1&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!t.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(t.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return t}normalizeParams(e){return e.forEach(t=>{Object.keys(t).forEach(s=>{let n=t[s];if(n.length>1)throw new Error(`Parameter "${s}" must have only a single value`);if(n=n[0],s==="client_max_window_bits"){if(n!==!0){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${s}": ${n}`);n=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${s}": ${n}`)}else if(s==="server_max_window_bits"){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${s}": ${n}`);n=i}else if(s==="client_no_context_takeover"||s==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${s}": ${n}`)}else throw new Error(`Unknown parameter "${s}"`);t[s]=n})}),e}decompress(e,t,s){ei.add(n=>{this._decompress(e,t,(i,o)=>{n(),s(i,o)})})}compress(e,t,s){ei.add(n=>{this._compress(e,t,(i,o)=>{n(),s(i,o)})})}_decompress(e,t,s){let n=this._isServer?"client":"server";if(!this._inflate){let i=`${n}_max_window_bits`,o=typeof this.params[i]!="number"?zs.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=zs.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[ri]=this,this._inflate[qt]=0,this._inflate[Ht]=[],this._inflate.on("error",K0),this._inflate.on("data",Nh)}this._inflate[Ws]=s,this._inflate.write(e),t&&this._inflate.write(W0),this._inflate.flush(()=>{let i=this._inflate[ti];if(i){this._inflate.close(),this._inflate=null,s(i);return}let o=Th.concat(this._inflate[Ht],this._inflate[qt]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[qt]=0,this._inflate[Ht]=[],t&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),s(null,o)})}_compress(e,t,s){let n=this._isServer?"server":"client";if(!this._deflate){let i=`${n}_max_window_bits`,o=typeof this.params[i]!="number"?zs.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=zs.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[qt]=0,this._deflate[Ht]=[],this._deflate.on("data",G0)}this._deflate[Ws]=s,this._deflate.write(e),this._deflate.flush(zs.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=Th.concat(this._deflate[Ht],this._deflate[qt]);t&&(i=new z0(i.buffer,i.byteOffset,i.length-4)),this._deflate[Ws]=null,this._deflate[qt]=0,this._deflate[Ht]=[],t&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),s(null,i)})}};Ah.exports=gu;function G0(r){this[Ht].push(r),this[qt]+=r.length}function Nh(r){if(this[qt]+=r.length,this[ri]._maxPayload<1||this[qt]<=this[ri]._maxPayload){this[Ht].push(r);return}this[ti]=new RangeError("Max payload size exceeded"),this[ti].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[ti][Ch]=1009,this.removeListener("data",Nh),this.reset()}function K0(r){this[ri]._inflate=null,r[Ch]=1007,this[Ws](r)}});var Ph=j((SR,Ih)=>{"use strict";function H0(r){let e=r.length,t=0;for(;t<e;)if((r[t]&128)===0)t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}Ih.exports=H0});var Oh=j((ER,yu)=>{"use strict";try{yu.exports=lu()(__dirname)}catch{yu.exports=Ph()}});var Kr=j((xR,si)=>{"use strict";var{isUtf8:Rh}=require("buffer"),{hasBlob:Z0}=Bt(),X0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function J0(r){return r>=1e3&&r<=1014&&r!==1004&&r!==1005&&r!==1006||r>=3e3&&r<=4999}function bu(r){let e=r.length,t=0;for(;t<e;)if((r[t]&128)===0)t++;else if((r[t]&224)===192){if(t+1===e||(r[t+1]&192)!==128||(r[t]&254)===192)return!1;t+=2}else if((r[t]&240)===224){if(t+2>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||r[t]===224&&(r[t+1]&224)===128||r[t]===237&&(r[t+1]&224)===160)return!1;t+=3}else if((r[t]&248)===240){if(t+3>=e||(r[t+1]&192)!==128||(r[t+2]&192)!==128||(r[t+3]&192)!==128||r[t]===240&&(r[t+1]&240)===128||r[t]===244&&r[t+1]>143||r[t]>244)return!1;t+=4}else return!1;return!0}function Y0(r){return Z0&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&(r[Symbol.toStringTag]==="Blob"||r[Symbol.toStringTag]==="File")}si.exports={isBlob:Y0,isValidStatusCode:J0,isValidUTF8:bu,tokenChars:X0};if(Rh)si.exports.isValidUTF8=function(r){return r.length<24?bu(r):Rh(r)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let r=Oh();si.exports.isValidUTF8=function(e){return e.length<32?bu(e):r(e)}}catch{}});var Eu=j((TR,Dh)=>{"use strict";var{Writable:eb}=require("stream"),Lh=Gs(),{BINARY_TYPES:tb,EMPTY_BUFFER:kh,kStatusCode:rb,kWebSocket:sb}=Bt(),{concat:vu,toArrayBuffer:nb,unmask:ib}=Vs(),{isValidStatusCode:ob,isValidUTF8:$h}=Kr(),ni=Buffer[Symbol.species],at=0,Bh=1,Mh=2,qh=3,wu=4,_u=5,ii=6,Su=class extends eb{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||tb[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[sb]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=at}_write(e,t,s){if(this._opcode===8&&this._state==at)return s();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(s)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let s=this._buffers[0];return this._buffers[0]=new ni(s.buffer,s.byteOffset+e,s.length-e),new ni(s.buffer,s.byteOffset,e)}let t=Buffer.allocUnsafe(e);do{let s=this._buffers[0],n=t.length-e;e>=s.length?t.set(this._buffers.shift(),n):(t.set(new Uint8Array(s.buffer,s.byteOffset,e),n),this._buffers[0]=new ni(s.buffer,s.byteOffset+e,s.length-e)),e-=s.length}while(e>0);return t}startLoop(e){this._loop=!0;do switch(this._state){case at:this.getInfo(e);break;case Bh:this.getPayloadLength16(e);break;case Mh:this.getPayloadLength64(e);break;case qh:this.getMask();break;case wu:this.getData(e);break;case _u:case ii:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let t=this.consume(2);if((t[0]&48)!==0){let n=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(n);return}let s=(t[0]&64)===64;if(s&&!this._extensions[Lh.extensionName]){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(n);return}if(this._fin=(t[0]&128)===128,this._opcode=t[0]&15,this._payloadLength=t[1]&127,this._opcode===0){if(s){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(n);return}if(!this._fragmented){let n=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(n);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(n);return}this._compressed=s}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let n=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(n);return}if(s){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(n);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let n=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(n);return}}else{let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(n);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(t[1]&128)===128,this._isServer){if(!this._masked){let n=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(n);return}}else if(this._masked){let n=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(n);return}this._payloadLength===126?this._state=Bh:this._payloadLength===127?this._state=Mh:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let t=this.consume(8),s=t.readUInt32BE(0);if(s>Math.pow(2,21)-1){let n=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(n);return}this._payloadLength=s*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let t=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(t);return}this._masked?this._state=qh:this._state=wu}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=wu}getData(e){let t=kh;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}t=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&ib(t,this._mask)}if(this._opcode>7){this.controlMessage(t,e);return}if(this._compressed){this._state=_u,this.decompress(t,e);return}t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}decompress(e,t){this._extensions[Lh.extensionName].decompress(e,this._fin,(n,i)=>{if(n)return t(n);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(o);return}this._fragments.push(i)}this.dataMessage(t),this._state===at&&this.startLoop(t)})}dataMessage(e){if(!this._fin){this._state=at;return}let t=this._messageLength,s=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=vu(s,t):this._binaryType==="arraybuffer"?n=nb(vu(s,t)):this._binaryType==="blob"?n=new Blob(s):n=s,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=at):(this._state=ii,setImmediate(()=>{this.emit("message",n,!0),this._state=at,this.startLoop(e)}))}else{let n=vu(s,t);if(!this._skipUTF8Validation&&!$h(n)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===_u||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=at):(this._state=ii,setImmediate(()=>{this.emit("message",n,!1),this._state=at,this.startLoop(e)}))}}controlMessage(e,t){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,kh),this.end();else{let s=e.readUInt16BE(0);if(!ob(s)){let i=this.createError(RangeError,`invalid status code ${s}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");t(i);return}let n=new ni(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!$h(n)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(i);return}this._loop=!1,this.emit("conclude",s,n),this.end()}this._state=at;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=at):(this._state=ii,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=at,this.startLoop(t)}))}createError(e,t,s,n,i){this._loop=!1,this._errored=!0;let o=new e(s?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(o,this.createError),o.code=i,o[rb]=n,o}};Dh.exports=Su});var Cu=j((NR,Uh)=>{"use strict";var{Duplex:CR}=require("stream"),{randomFillSync:ab}=require("crypto"),jh=Gs(),{EMPTY_BUFFER:ub,kWebSocket:cb,NOOP:lb}=Bt(),{isBlob:Hr,isValidStatusCode:fb}=Kr(),{mask:Fh,toBuffer:ur}=Vs(),ut=Symbol("kByteLength"),hb=Buffer.alloc(4),oi=8*1024,cr,Zr=oi,bt=0,db=1,pb=2,xu=class r{constructor(e,t,s){this._extensions=t||{},s&&(this._generateMask=s,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=bt,this.onerror=lb,this[cb]=void 0}static frame(e,t){let s,n=!1,i=2,o=!1;t.mask&&(s=t.maskBuffer||hb,t.generateMask?t.generateMask(s):(Zr===oi&&(cr===void 0&&(cr=Buffer.alloc(oi)),ab(cr,0,oi),Zr=0),s[0]=cr[Zr++],s[1]=cr[Zr++],s[2]=cr[Zr++],s[3]=cr[Zr++]),o=(s[0]|s[1]|s[2]|s[3])===0,i=6);let a;typeof e=="string"?(!t.mask||o)&&t[ut]!==void 0?a=t[ut]:(e=Buffer.from(e),a=e.length):(a=e.length,n=t.mask&&t.readOnly&&!o);let c=a;a>=65536?(i+=8,c=127):a>125&&(i+=2,c=126);let h=Buffer.allocUnsafe(n?a+i:i);return h[0]=t.fin?t.opcode|128:t.opcode,t.rsv1&&(h[0]|=64),h[1]=c,c===126?h.writeUInt16BE(a,2):c===127&&(h[2]=h[3]=0,h.writeUIntBE(a,4,6)),t.mask?(h[1]|=128,h[i-4]=s[0],h[i-3]=s[1],h[i-2]=s[2],h[i-1]=s[3],o?[h,e]:n?(Fh(e,s,h,i,a),[h]):(Fh(e,s,e,0,a),[h,e])):[h,e]}close(e,t,s,n){let i;if(e===void 0)i=ub;else{if(typeof e!="number"||!fb(e))throw new TypeError("First argument must be a valid error code number");if(t===void 0||!t.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(t);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof t=="string"?i.write(t,2):i.set(t,2)}}let o={[ut]:i.length,fin:!0,generateMask:this._generateMask,mask:s,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==bt?this.enqueue([this.dispatch,i,!1,o,n]):this.sendFrame(r.frame(i,o),n)}ping(e,t,s){let n,i;if(typeof e=="string"?(n=Buffer.byteLength(e),i=!1):Hr(e)?(n=e.size,i=!1):(e=ur(e),n=e.length,i=ur.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[ut]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};Hr(e)?this._state!==bt?this.enqueue([this.getBlobData,e,!1,o,s]):this.getBlobData(e,!1,o,s):this._state!==bt?this.enqueue([this.dispatch,e,!1,o,s]):this.sendFrame(r.frame(e,o),s)}pong(e,t,s){let n,i;if(typeof e=="string"?(n=Buffer.byteLength(e),i=!1):Hr(e)?(n=e.size,i=!1):(e=ur(e),n=e.length,i=ur.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[ut]:n,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};Hr(e)?this._state!==bt?this.enqueue([this.getBlobData,e,!1,o,s]):this.getBlobData(e,!1,o,s):this._state!==bt?this.enqueue([this.dispatch,e,!1,o,s]):this.sendFrame(r.frame(e,o),s)}send(e,t,s){let n=this._extensions[jh.extensionName],i=t.binary?2:1,o=t.compress,a,c;typeof e=="string"?(a=Buffer.byteLength(e),c=!1):Hr(e)?(a=e.size,c=!1):(e=ur(e),a=e.length,c=ur.readOnly),this._firstFragment?(this._firstFragment=!1,o&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=n._threshold),this._compress=o):(o=!1,i=0),t.fin&&(this._firstFragment=!0);let h={[ut]:a,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:c,rsv1:o};Hr(e)?this._state!==bt?this.enqueue([this.getBlobData,e,this._compress,h,s]):this.getBlobData(e,this._compress,h,s):this._state!==bt?this.enqueue([this.dispatch,e,this._compress,h,s]):this.dispatch(e,this._compress,h,s)}getBlobData(e,t,s,n){this._bufferedBytes+=s[ut],this._state=pb,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(Tu,this,a,n);return}this._bufferedBytes-=s[ut];let o=ur(i);t?this.dispatch(o,t,s,n):(this._state=bt,this.sendFrame(r.frame(o,s),n),this.dequeue())}).catch(i=>{process.nextTick(mb,this,i,n)})}dispatch(e,t,s,n){if(!t){this.sendFrame(r.frame(e,s),n);return}let i=this._extensions[jh.extensionName];this._bufferedBytes+=s[ut],this._state=db,i.compress(e,s.fin,(o,a)=>{if(this._socket.destroyed){let c=new Error("The socket was closed while data was being compressed");Tu(this,c,n);return}this._bufferedBytes-=s[ut],this._state=bt,s.readOnly=!1,this.sendFrame(r.frame(a,s),n),this.dequeue()})}dequeue(){for(;this._state===bt&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][ut],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][ut],this._queue.push(e)}sendFrame(e,t){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}};Uh.exports=xu;function Tu(r,e,t){typeof t=="function"&&t(e);for(let s=0;s<r._queue.length;s++){let n=r._queue[s],i=n[n.length-1];typeof i=="function"&&i(e)}}function mb(r,e,t){Tu(r,e,t),r.onerror(e)}});var Xh=j((AR,Zh)=>{"use strict";var{kForOnEventAttribute:Ks,kListener:Nu}=Bt(),Qh=Symbol("kCode"),Vh=Symbol("kData"),zh=Symbol("kError"),Wh=Symbol("kMessage"),Gh=Symbol("kReason"),Xr=Symbol("kTarget"),Kh=Symbol("kType"),Hh=Symbol("kWasClean"),Dt=class{constructor(e){this[Xr]=null,this[Kh]=e}get target(){return this[Xr]}get type(){return this[Kh]}};Object.defineProperty(Dt.prototype,"target",{enumerable:!0});Object.defineProperty(Dt.prototype,"type",{enumerable:!0});var lr=class extends Dt{constructor(e,t={}){super(e),this[Qh]=t.code===void 0?0:t.code,this[Gh]=t.reason===void 0?"":t.reason,this[Hh]=t.wasClean===void 0?!1:t.wasClean}get code(){return this[Qh]}get reason(){return this[Gh]}get wasClean(){return this[Hh]}};Object.defineProperty(lr.prototype,"code",{enumerable:!0});Object.defineProperty(lr.prototype,"reason",{enumerable:!0});Object.defineProperty(lr.prototype,"wasClean",{enumerable:!0});var Jr=class extends Dt{constructor(e,t={}){super(e),this[zh]=t.error===void 0?null:t.error,this[Wh]=t.message===void 0?"":t.message}get error(){return this[zh]}get message(){return this[Wh]}};Object.defineProperty(Jr.prototype,"error",{enumerable:!0});Object.defineProperty(Jr.prototype,"message",{enumerable:!0});var Hs=class extends Dt{constructor(e,t={}){super(e),this[Vh]=t.data===void 0?null:t.data}get data(){return this[Vh]}};Object.defineProperty(Hs.prototype,"data",{enumerable:!0});var gb={addEventListener(r,e,t={}){for(let n of this.listeners(r))if(!t[Ks]&&n[Nu]===e&&!n[Ks])return;let s;if(r==="message")s=function(i,o){let a=new Hs("message",{data:o?i:i.toString()});a[Xr]=this,ai(e,this,a)};else if(r==="close")s=function(i,o){let a=new lr("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Xr]=this,ai(e,this,a)};else if(r==="error")s=function(i){let o=new Jr("error",{error:i,message:i.message});o[Xr]=this,ai(e,this,o)};else if(r==="open")s=function(){let i=new Dt("open");i[Xr]=this,ai(e,this,i)};else return;s[Ks]=!!t[Ks],s[Nu]=e,t.once?this.once(r,s):this.on(r,s)},removeEventListener(r,e){for(let t of this.listeners(r))if(t[Nu]===e&&!t[Ks]){this.removeListener(r,t);break}}};Zh.exports={CloseEvent:lr,ErrorEvent:Jr,Event:Dt,EventTarget:gb,MessageEvent:Hs};function ai(r,e,t){typeof r=="object"&&r.handleEvent?r.handleEvent.call(r,t):r.call(e,t)}});var Au=j((IR,Jh)=>{"use strict";var{tokenChars:Zs}=Kr();function xt(r,e,t){r[e]===void 0?r[e]=[t]:r[e].push(t)}function yb(r){let e=Object.create(null),t=Object.create(null),s=!1,n=!1,i=!1,o,a,c=-1,h=-1,l=-1,p=0;for(;p<r.length;p++)if(h=r.charCodeAt(p),o===void 0)if(l===-1&&Zs[h]===1)c===-1&&(c=p);else if(p!==0&&(h===32||h===9))l===-1&&c!==-1&&(l=p);else if(h===59||h===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let v=r.slice(c,l);h===44?(xt(e,v,t),t=Object.create(null)):o=v,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&Zs[h]===1)c===-1&&(c=p);else if(h===32||h===9)l===-1&&c!==-1&&(l=p);else if(h===59||h===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),xt(t,r.slice(c,l),!0),h===44&&(xt(e,o,t),t=Object.create(null),o=void 0),c=l=-1}else if(h===61&&c!==-1&&l===-1)a=r.slice(c,p),c=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(n){if(Zs[h]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);c===-1?c=p:s||(s=!0),n=!1}else if(i)if(Zs[h]===1)c===-1&&(c=p);else if(h===34&&c!==-1)i=!1,l=p;else if(h===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(h===34&&r.charCodeAt(p-1)===61)i=!0;else if(l===-1&&Zs[h]===1)c===-1&&(c=p);else if(c!==-1&&(h===32||h===9))l===-1&&(l=p);else if(h===59||h===44){if(c===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let v=r.slice(c,l);s&&(v=v.replace(/\\/g,""),s=!1),xt(t,a,v),h===44&&(xt(e,o,t),t=Object.create(null),o=void 0),a=void 0,c=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(c===-1||i||h===32||h===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let g=r.slice(c,l);return o===void 0?xt(e,g,t):(a===void 0?xt(t,g,!0):s?xt(t,a,g.replace(/\\/g,"")):xt(t,a,g),xt(e,o,t)),e}function bb(r){return Object.keys(r).map(e=>{let t=r[e];return Array.isArray(t)||(t=[t]),t.map(s=>[e].concat(Object.keys(s).map(n=>{let i=s[n];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?n:`${n}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}Jh.exports={format:bb,parse:yb}});var Lu=j((RR,ld)=>{"use strict";var vb=require("events"),wb=require("https"),_b=require("http"),td=require("net"),Sb=require("tls"),{randomBytes:Eb,createHash:xb}=require("crypto"),{Duplex:PR,Readable:OR}=require("stream"),{URL:Iu}=require("url"),Zt=Gs(),Tb=Eu(),Cb=Cu(),{isBlob:Nb}=Kr(),{BINARY_TYPES:Yh,EMPTY_BUFFER:ui,GUID:Ab,kForOnEventAttribute:Pu,kListener:Ib,kStatusCode:Pb,kWebSocket:je,NOOP:rd}=Bt(),{EventTarget:{addEventListener:Ob,removeEventListener:Rb}}=Xh(),{format:Lb,parse:kb}=Au(),{toBuffer:$b}=Vs(),Bb=30*1e3,sd=Symbol("kAborted"),Ou=[8,13],jt=["CONNECTING","OPEN","CLOSING","CLOSED"],Mb=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,Ce=class r extends vb{constructor(e,t,s){super(),this._binaryType=Yh[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=ui,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=r.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,t===void 0?t=[]:Array.isArray(t)||(typeof t=="object"&&t!==null?(s=t,t=[]):t=[t]),nd(this,e,t,s)):(this._autoPong=s.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){Yh.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,s){let n=new Tb({allowSynchronousEvents:s.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation}),i=new Cb(e,this._extensions,s.generateMask);this._receiver=n,this._sender=i,this._socket=e,n[je]=this,i[je]=this,e[je]=this,n.on("conclude",jb),n.on("drain",Fb),n.on("error",Ub),n.on("message",Qb),n.on("ping",Vb),n.on("pong",zb),i.onerror=Wb,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",ad),e.on("data",li),e.on("end",ud),e.on("error",cd),this._readyState=r.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Zt.extensionName]&&this._extensions[Zt.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=r.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){rt(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===r.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=r.CLOSING,this._sender.close(e,t,!this._isServer,s=>{s||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),od(this)}}pause(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,t,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(s=e,e=t=void 0):typeof t=="function"&&(s=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){Ru(this,e,s);return}t===void 0&&(t=!this._isServer),this._sender.ping(e||ui,t,s)}pong(e,t,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(s=e,e=t=void 0):typeof t=="function"&&(s=t,t=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){Ru(this,e,s);return}t===void 0&&(t=!this._isServer),this._sender.pong(e||ui,t,s)}resume(){this.readyState===r.CONNECTING||this.readyState===r.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,s){if(this.readyState===r.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"&&(s=t,t={}),typeof e=="number"&&(e=e.toString()),this.readyState!==r.OPEN){Ru(this,e,s);return}let n={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[Zt.extensionName]||(n.compress=!1),this._sender.send(e||ui,n,s)}terminate(){if(this.readyState!==r.CLOSED){if(this.readyState===r.CONNECTING){rt(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=r.CLOSING,this._socket.destroy())}}};Object.defineProperty(Ce,"CONNECTING",{enumerable:!0,value:jt.indexOf("CONNECTING")});Object.defineProperty(Ce.prototype,"CONNECTING",{enumerable:!0,value:jt.indexOf("CONNECTING")});Object.defineProperty(Ce,"OPEN",{enumerable:!0,value:jt.indexOf("OPEN")});Object.defineProperty(Ce.prototype,"OPEN",{enumerable:!0,value:jt.indexOf("OPEN")});Object.defineProperty(Ce,"CLOSING",{enumerable:!0,value:jt.indexOf("CLOSING")});Object.defineProperty(Ce.prototype,"CLOSING",{enumerable:!0,value:jt.indexOf("CLOSING")});Object.defineProperty(Ce,"CLOSED",{enumerable:!0,value:jt.indexOf("CLOSED")});Object.defineProperty(Ce.prototype,"CLOSED",{enumerable:!0,value:jt.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(r=>{Object.defineProperty(Ce.prototype,r,{enumerable:!0})});["open","error","close","message"].forEach(r=>{Object.defineProperty(Ce.prototype,`on${r}`,{enumerable:!0,get(){for(let e of this.listeners(r))if(e[Pu])return e[Ib];return null},set(e){for(let t of this.listeners(r))if(t[Pu]){this.removeListener(r,t);break}typeof e=="function"&&this.addEventListener(r,e,{[Pu]:!0})}})});Ce.prototype.addEventListener=Ob;Ce.prototype.removeEventListener=Rb;ld.exports=Ce;function nd(r,e,t,s){let n={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Ou[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...s,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(r._autoPong=n.autoPong,!Ou.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${Ou.join(", ")})`);let i;if(e instanceof Iu)i=e;else try{i=new Iu(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),r._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",c;if(i.protocol!=="ws:"&&!o&&!a?c=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!i.pathname?c="The URL's pathname is empty":i.hash&&(c="The URL contains a fragment identifier"),c){let f=new SyntaxError(c);if(r._redirects===0)throw f;ci(r,f);return}let h=o?443:80,l=Eb(16).toString("base64"),p=o?wb.request:_b.request,g=new Set,v;if(n.createConnection=n.createConnection||(o?Db:qb),n.defaultPort=n.defaultPort||h,n.port=i.port||h,n.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,n.headers={...n.headers,"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},n.path=i.pathname+i.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(v=new Zt(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=Lb({[Zt.extensionName]:v.offer()})),t.length){for(let f of t){if(typeof f!="string"||!Mb.test(f)||g.has(f))throw new SyntaxError("An invalid or duplicated subprotocol was specified");g.add(f)}n.headers["Sec-WebSocket-Protocol"]=t.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(i.username||i.password)&&(n.auth=`${i.username}:${i.password}`),a){let f=n.path.split(":");n.socketPath=f[0],n.path=f[1]}let m;if(n.followRedirects){if(r._redirects===0){r._originalIpc=a,r._originalSecure=o,r._originalHostOrSocketPath=a?n.socketPath:i.host;let f=s&&s.headers;if(s={...s,headers:{}},f)for(let[w,_]of Object.entries(f))s.headers[w.toLowerCase()]=_}else if(r.listenerCount("redirect")===0){let f=a?r._originalIpc?n.socketPath===r._originalHostOrSocketPath:!1:r._originalIpc?!1:i.host===r._originalHostOrSocketPath;(!f||r._originalSecure&&!o)&&(delete n.headers.authorization,delete n.headers.cookie,f||delete n.headers.host,n.auth=void 0)}n.auth&&!s.headers.authorization&&(s.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),m=r._req=p(n),r._redirects&&r.emit("redirect",r.url,m)}else m=r._req=p(n);n.timeout&&m.on("timeout",()=>{rt(r,m,"Opening handshake has timed out")}),m.on("error",f=>{m===null||m[sd]||(m=r._req=null,ci(r,f))}),m.on("response",f=>{let w=f.headers.location,_=f.statusCode;if(w&&n.followRedirects&&_>=300&&_<400){if(++r._redirects>n.maxRedirects){rt(r,m,"Maximum redirects exceeded");return}m.abort();let S;try{S=new Iu(w,e)}catch{let R=new SyntaxError(`Invalid URL: ${w}`);ci(r,R);return}nd(r,S,t,s)}else r.emit("unexpected-response",m,f)||rt(r,m,`Unexpected server response: ${f.statusCode}`)}),m.on("upgrade",(f,w,_)=>{if(r.emit("upgrade",f),r.readyState!==Ce.CONNECTING)return;m=r._req=null;let S=f.headers.upgrade;if(S===void 0||S.toLowerCase()!=="websocket"){rt(r,w,"Invalid Upgrade header");return}let x=xb("sha1").update(l+Ab).digest("base64");if(f.headers["sec-websocket-accept"]!==x){rt(r,w,"Invalid Sec-WebSocket-Accept header");return}let R=f.headers["sec-websocket-protocol"],L;if(R!==void 0?g.size?g.has(R)||(L="Server sent an invalid subprotocol"):L="Server sent a subprotocol but none was requested":g.size&&(L="Server sent no subprotocol"),L){rt(r,w,L);return}R&&(r._protocol=R);let E=f.headers["sec-websocket-extensions"];if(E!==void 0){if(!v){rt(r,w,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let P;try{P=kb(E)}catch{rt(r,w,"Invalid Sec-WebSocket-Extensions header");return}let I=Object.keys(P);if(I.length!==1||I[0]!==Zt.extensionName){rt(r,w,"Server indicated an extension that was not requested");return}try{v.accept(P[Zt.extensionName])}catch{rt(r,w,"Invalid Sec-WebSocket-Extensions header");return}r._extensions[Zt.extensionName]=v}r.setSocket(w,_,{allowSynchronousEvents:n.allowSynchronousEvents,generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(m,r):m.end()}function ci(r,e){r._readyState=Ce.CLOSING,r._errorEmitted=!0,r.emit("error",e),r.emitClose()}function qb(r){return r.path=r.socketPath,td.connect(r)}function Db(r){return r.path=void 0,!r.servername&&r.servername!==""&&(r.servername=td.isIP(r.host)?"":r.host),Sb.connect(r)}function rt(r,e,t){r._readyState=Ce.CLOSING;let s=new Error(t);Error.captureStackTrace(s,rt),e.setHeader?(e[sd]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(ci,r,s)):(e.destroy(s),e.once("error",r.emit.bind(r,"error")),e.once("close",r.emitClose.bind(r)))}function Ru(r,e,t){if(e){let s=Nb(e)?e.size:$b(e).length;r._socket?r._sender._bufferedBytes+=s:r._bufferedAmount+=s}if(t){let s=new Error(`WebSocket is not open: readyState ${r.readyState} (${jt[r.readyState]})`);process.nextTick(t,s)}}function jb(r,e){let t=this[je];t._closeFrameReceived=!0,t._closeMessage=e,t._closeCode=r,t._socket[je]!==void 0&&(t._socket.removeListener("data",li),process.nextTick(id,t._socket),r===1005?t.close():t.close(r,e))}function Fb(){let r=this[je];r.isPaused||r._socket.resume()}function Ub(r){let e=this[je];e._socket[je]!==void 0&&(e._socket.removeListener("data",li),process.nextTick(id,e._socket),e.close(r[Pb])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",r))}function ed(){this[je].emitClose()}function Qb(r,e){this[je].emit("message",r,e)}function Vb(r){let e=this[je];e._autoPong&&e.pong(r,!this._isServer,rd),e.emit("ping",r)}function zb(r){this[je].emit("pong",r)}function id(r){r.resume()}function Wb(r){let e=this[je];e.readyState!==Ce.CLOSED&&(e.readyState===Ce.OPEN&&(e._readyState=Ce.CLOSING,od(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",r)))}function od(r){r._closeTimer=setTimeout(r._socket.destroy.bind(r._socket),Bb)}function ad(){let r=this[je];this.removeListener("close",ad),this.removeListener("data",li),this.removeListener("end",ud),r._readyState=Ce.CLOSING;let e;!this._readableState.endEmitted&&!r._closeFrameReceived&&!r._receiver._writableState.errorEmitted&&(e=r._socket.read())!==null&&r._receiver.write(e),r._receiver.end(),this[je]=void 0,clearTimeout(r._closeTimer),r._receiver._writableState.finished||r._receiver._writableState.errorEmitted?r.emitClose():(r._receiver.on("error",ed),r._receiver.on("finish",ed))}function li(r){this[je]._receiver.write(r)||this.pause()}function ud(){let r=this[je];r._readyState=Ce.CLOSING,r._receiver.end(),this.end()}function cd(){let r=this[je];this.removeListener("error",cd),this.on("error",rd),r&&(r._readyState=Ce.CLOSING,this.destroy())}});var hd=j((LR,fd)=>{"use strict";var{tokenChars:Gb}=Kr();function Kb(r){let e=new Set,t=-1,s=-1,n=0;for(n;n<r.length;n++){let o=r.charCodeAt(n);if(s===-1&&Gb[o]===1)t===-1&&(t=n);else if(n!==0&&(o===32||o===9))s===-1&&t!==-1&&(s=n);else if(o===44){if(t===-1)throw new SyntaxError(`Unexpected character at index ${n}`);s===-1&&(s=n);let a=r.slice(t,s);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),t=s=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(t===-1||s!==-1)throw new SyntaxError("Unexpected end of input");let i=r.slice(t,n);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}fd.exports={parse:Kb}});var vd=j(($R,bd)=>{"use strict";var Hb=require("events"),fi=require("http"),{Duplex:kR}=require("stream"),{createHash:Zb}=require("crypto"),dd=Au(),fr=Gs(),Xb=hd(),Jb=Lu(),{GUID:Yb,kWebSocket:ev}=Bt(),tv=/^[+/0-9A-Za-z]{22}==$/,pd=0,md=1,yd=2,ku=class extends Hb{constructor(e,t){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Jb,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=fi.createServer((s,n)=>{let i=fi.STATUS_CODES[426];n.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),n.end(i)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){let s=this.emit.bind(this,"connection");this._removeListeners=rv(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,i,o)=>{this.handleUpgrade(n,i,o,s)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=pd}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===yd){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(Xs,this);return}if(e&&this.once("close",e),this._state!==md)if(this._state=md,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(Xs,this):process.nextTick(Xs,this);else{let t=this._server;this._removeListeners(),this._removeListeners=this._server=null,t.close(()=>{Xs(this)})}}shouldHandle(e){if(this.options.path){let t=e.url.indexOf("?");if((t!==-1?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,s,n){t.on("error",gd);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){hr(this,e,t,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){hr(this,e,t,400,"Invalid Upgrade header");return}if(i===void 0||!tv.test(i)){hr(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){hr(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(e)){Js(t,400);return}let c=e.headers["sec-websocket-protocol"],h=new Set;if(c!==void 0)try{h=Xb.parse(c)}catch{hr(this,e,t,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&l!==void 0){let g=new fr(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let v=dd.parse(l);v[fr.extensionName]&&(g.accept(v[fr.extensionName]),p[fr.extensionName]=g)}catch{hr(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let g={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(g,(v,m,f,w)=>{if(!v)return Js(t,m||401,f,w);this.completeUpgrade(p,i,h,e,t,s,n)});return}if(!this.options.verifyClient(g))return Js(t,401)}this.completeUpgrade(p,i,h,e,t,s,n)}completeUpgrade(e,t,s,n,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[ev])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>pd)return Js(i,503);let h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${Zb("sha1").update(t+Yb).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(s.size){let p=this.options.handleProtocols?this.options.handleProtocols(s,n):s.values().next().value;p&&(h.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[fr.extensionName]){let p=e[fr.extensionName].params,g=dd.format({[fr.extensionName]:[p]});h.push(`Sec-WebSocket-Extensions: ${g}`),l._extensions=e}this.emit("headers",h,n),i.write(h.concat(`\r
`).join(`\r
`)),i.removeListener("error",gd),l.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(Xs,this)})),a(l,n)}};bd.exports=ku;function rv(r,e){for(let t of Object.keys(e))r.on(t,e[t]);return function(){for(let s of Object.keys(e))r.removeListener(s,e[s])}}function Xs(r){r._state=yd,r.emit("close")}function gd(){this.destroy()}function Js(r,e,t,s){t=t||fi.STATUS_CODES[e],s={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(t),...s},r.once("finish",r.destroy),r.end(`HTTP/1.1 ${e} ${fi.STATUS_CODES[e]}\r
`+Object.keys(s).map(n=>`${n}: ${s[n]}`).join(`\r
`)+`\r
\r
`+t)}function hr(r,e,t,s,n){if(r.listenerCount("wsClientError")){let i=new Error(n);Error.captureStackTrace(i,hr),r.emit("wsClientError",i,t,e)}else Js(t,s,n)}});var Yr=j(($u,Ed)=>{var hi=require("buffer"),Tt=hi.Buffer;function Sd(r,e){for(var t in r)e[t]=r[t]}Tt.from&&Tt.alloc&&Tt.allocUnsafe&&Tt.allocUnsafeSlow?Ed.exports=hi:(Sd(hi,$u),$u.Buffer=dr);function dr(r,e,t){return Tt(r,e,t)}dr.prototype=Object.create(Tt.prototype);Sd(Tt,dr);dr.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return Tt(r,e,t)};dr.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var s=Tt(r);return e!==void 0?typeof t=="string"?s.fill(e,t):s.fill(e):s.fill(0),s};dr.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Tt(r)};dr.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return hi.SlowBuffer(r)}});var Bu=j((MR,xd)=>{var di=Yr().Buffer,av=require("stream"),uv=require("util");function pi(r){if(this.buffer=null,this.writable=!0,this.readable=!0,!r)return this.buffer=di.alloc(0),this;if(typeof r.pipe=="function")return this.buffer=di.alloc(0),r.pipe(this),this;if(r.length||typeof r=="object")return this.buffer=r,this.writable=!1,process.nextTick(function(){this.emit("end",r),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof r+")")}uv.inherits(pi,av);pi.prototype.write=function(e){this.buffer=di.concat([this.buffer,di.from(e)]),this.emit("data",e)};pi.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};xd.exports=pi});var Cd=j((qR,Td)=>{"use strict";function Mu(r){var e=(r/8|0)+(r%8===0?0:1);return e}var cv={ES256:Mu(256),ES384:Mu(384),ES512:Mu(521)};function lv(r){var e=cv[r];if(e)return e;throw new Error('Unknown algorithm "'+r+'"')}Td.exports=lv});var Ld=j((DR,Rd)=>{"use strict";var mi=Yr().Buffer,Ad=Cd(),gi=128,Id=0,fv=32,hv=16,dv=2,Pd=hv|fv|Id<<6,yi=dv|Id<<6;function pv(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Od(r){if(mi.isBuffer(r))return r;if(typeof r=="string")return mi.from(r,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function mv(r,e){r=Od(r);var t=Ad(e),s=t+1,n=r.length,i=0;if(r[i++]!==Pd)throw new Error('Could not find expected "seq"');var o=r[i++];if(o===(gi|1)&&(o=r[i++]),n-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(n-i)+'" remaining');if(r[i++]!==yi)throw new Error('Could not find expected "int" for "r"');var a=r[i++];if(n-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(n-i-2)+'" available');if(s<a)throw new Error('"r" specified length of "'+a+'", max of "'+s+'" is acceptable');var c=i;if(i+=a,r[i++]!==yi)throw new Error('Could not find expected "int" for "s"');var h=r[i++];if(n-i!==h)throw new Error('"s" specified length of "'+h+'", expected "'+(n-i)+'"');if(s<h)throw new Error('"s" specified length of "'+h+'", max of "'+s+'" is acceptable');var l=i;if(i+=h,i!==n)throw new Error('Expected to consume entire buffer, but "'+(n-i)+'" bytes remain');var p=t-a,g=t-h,v=mi.allocUnsafe(p+a+g+h);for(i=0;i<p;++i)v[i]=0;r.copy(v,i,c+Math.max(-p,0),c+a),i=t;for(var m=i;i<m+g;++i)v[i]=0;return r.copy(v,i,l+Math.max(-g,0),l+h),v=v.toString("base64"),v=pv(v),v}function Nd(r,e,t){for(var s=0;e+s<t&&r[e+s]===0;)++s;var n=r[e+s]>=gi;return n&&--s,s}function gv(r,e){r=Od(r);var t=Ad(e),s=r.length;if(s!==t*2)throw new TypeError('"'+e+'" signatures must be "'+t*2+'" bytes, saw "'+s+'"');var n=Nd(r,0,t),i=Nd(r,t,r.length),o=t-n,a=t-i,c=2+o+1+1+a,h=c<gi,l=mi.allocUnsafe((h?2:3)+c),p=0;return l[p++]=Pd,h?l[p++]=c:(l[p++]=gi|1,l[p++]=c&255),l[p++]=yi,l[p++]=o,n<0?(l[p++]=0,p+=r.copy(l,p,0,t)):p+=r.copy(l,p,n,t),l[p++]=yi,l[p++]=a,i<0?(l[p++]=0,r.copy(l,p,t)):r.copy(l,p,t+i),l}Rd.exports={derToJose:mv,joseToDer:gv}});var $d=j((jR,kd)=>{"use strict";var Ys=require("buffer").Buffer,qu=require("buffer").SlowBuffer;kd.exports=bi;function bi(r,e){if(!Ys.isBuffer(r)||!Ys.isBuffer(e)||r.length!==e.length)return!1;for(var t=0,s=0;s<r.length;s++)t|=r[s]^e[s];return t===0}bi.install=function(){Ys.prototype.equal=qu.prototype.equal=function(e){return bi(this,e)}};var yv=Ys.prototype.equal,bv=qu.prototype.equal;bi.restore=function(){Ys.prototype.equal=yv,qu.prototype.equal=bv}});var Uu=j((FR,Vd)=>{var ts=Yr().Buffer,ct=require("crypto"),Md=Ld(),Bd=require("util"),vv=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,en="secret must be a string or buffer",es="key must be a string or a buffer",wv="key must be a string, a buffer or an object",ju=typeof ct.createPublicKey=="function";ju&&(es+=" or a KeyObject",en+="or a KeyObject");function qd(r){if(!ts.isBuffer(r)&&typeof r!="string"&&(!ju||typeof r!="object"||typeof r.type!="string"||typeof r.asymmetricKeyType!="string"||typeof r.export!="function"))throw vt(es)}function Dd(r){if(!ts.isBuffer(r)&&typeof r!="string"&&typeof r!="object")throw vt(wv)}function _v(r){if(!ts.isBuffer(r)){if(typeof r=="string")return r;if(!ju||typeof r!="object"||r.type!=="secret"||typeof r.export!="function")throw vt(en)}}function Fu(r){return r.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jd(r){r=r.toString();var e=4-r.length%4;if(e!==4)for(var t=0;t<e;++t)r+="=";return r.replace(/\-/g,"+").replace(/_/g,"/")}function vt(r){var e=[].slice.call(arguments,1),t=Bd.format.bind(Bd,r).apply(null,e);return new TypeError(t)}function Sv(r){return ts.isBuffer(r)||typeof r=="string"}function tn(r){return Sv(r)||(r=JSON.stringify(r)),r}function Fd(r){return function(t,s){_v(s),t=tn(t);var n=ct.createHmac("sha"+r,s),i=(n.update(t),n.digest("base64"));return Fu(i)}}var Du,Ev="timingSafeEqual"in ct?function(e,t){return e.byteLength!==t.byteLength?!1:ct.timingSafeEqual(e,t)}:function(e,t){return Du||(Du=$d()),Du(e,t)};function xv(r){return function(t,s,n){var i=Fd(r)(t,n);return Ev(ts.from(s),ts.from(i))}}function Ud(r){return function(t,s){Dd(s),t=tn(t);var n=ct.createSign("RSA-SHA"+r),i=(n.update(t),n.sign(s,"base64"));return Fu(i)}}function Qd(r){return function(t,s,n){qd(n),t=tn(t),s=jd(s);var i=ct.createVerify("RSA-SHA"+r);return i.update(t),i.verify(n,s,"base64")}}function Tv(r){return function(t,s){Dd(s),t=tn(t);var n=ct.createSign("RSA-SHA"+r),i=(n.update(t),n.sign({key:s,padding:ct.constants.RSA_PKCS1_PSS_PADDING,saltLength:ct.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Fu(i)}}function Cv(r){return function(t,s,n){qd(n),t=tn(t),s=jd(s);var i=ct.createVerify("RSA-SHA"+r);return i.update(t),i.verify({key:n,padding:ct.constants.RSA_PKCS1_PSS_PADDING,saltLength:ct.constants.RSA_PSS_SALTLEN_DIGEST},s,"base64")}}function Nv(r){var e=Ud(r);return function(){var s=e.apply(null,arguments);return s=Md.derToJose(s,"ES"+r),s}}function Av(r){var e=Qd(r);return function(s,n,i){n=Md.joseToDer(n,"ES"+r).toString("base64");var o=e(s,n,i);return o}}function Iv(){return function(){return""}}function Pv(){return function(e,t){return t===""}}Vd.exports=function(e){var t={hs:Fd,rs:Ud,ps:Tv,es:Nv,none:Iv},s={hs:xv,rs:Qd,ps:Cv,es:Av,none:Pv},n=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!n)throw vt(vv,e);var i=(n[1]||n[3]).toLowerCase(),o=n[2];return{sign:t[i](o),verify:s[i](o)}}});var Qu=j((UR,zd)=>{var Ov=require("buffer").Buffer;zd.exports=function(e){return typeof e=="string"?e:typeof e=="number"||Ov.isBuffer(e)?e.toString():JSON.stringify(e)}});var Xd=j((QR,Zd)=>{var Rv=Yr().Buffer,Wd=Bu(),Lv=Uu(),kv=require("stream"),Gd=Qu(),Vu=require("util");function Kd(r,e){return Rv.from(r,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function $v(r,e,t){t=t||"utf8";var s=Kd(Gd(r),"binary"),n=Kd(Gd(e),t);return Vu.format("%s.%s",s,n)}function Hd(r){var e=r.header,t=r.payload,s=r.secret||r.privateKey,n=r.encoding,i=Lv(e.alg),o=$v(e,t,n),a=i.sign(o,s);return Vu.format("%s.%s",o,a)}function vi(r){var e=r.secret||r.privateKey||r.key,t=new Wd(e);this.readable=!0,this.header=r.header,this.encoding=r.encoding,this.secret=this.privateKey=this.key=t,this.payload=new Wd(r.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Vu.inherits(vi,kv);vi.prototype.sign=function(){try{var e=Hd({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};vi.sign=Hd;Zd.exports=vi});var ap=j((VR,op)=>{var Yd=Yr().Buffer,Jd=Bu(),Bv=Uu(),Mv=require("stream"),ep=Qu(),qv=require("util"),Dv=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function jv(r){return Object.prototype.toString.call(r)==="[object Object]"}function Fv(r){if(jv(r))return r;try{return JSON.parse(r)}catch{return}}function tp(r){var e=r.split(".",1)[0];return Fv(Yd.from(e,"base64").toString("binary"))}function Uv(r){return r.split(".",2).join(".")}function rp(r){return r.split(".")[2]}function Qv(r,e){e=e||"utf8";var t=r.split(".")[1];return Yd.from(t,"base64").toString(e)}function sp(r){return Dv.test(r)&&!!tp(r)}function np(r,e,t){if(!e){var s=new Error("Missing algorithm parameter for jws.verify");throw s.code="MISSING_ALGORITHM",s}r=ep(r);var n=rp(r),i=Uv(r),o=Bv(e);return o.verify(i,n,t)}function ip(r,e){if(e=e||{},r=ep(r),!sp(r))return null;var t=tp(r);if(!t)return null;var s=Qv(r);return(t.typ==="JWT"||e.json)&&(s=JSON.parse(s,e.encoding)),{header:t,payload:s,signature:rp(r)}}function rs(r){r=r||{};var e=r.secret||r.publicKey||r.key,t=new Jd(e);this.readable=!0,this.algorithm=r.algorithm,this.encoding=r.encoding,this.secret=this.publicKey=this.key=t,this.signature=new Jd(r.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}qv.inherits(rs,Mv);rs.prototype.verify=function(){try{var e=np(this.signature.buffer,this.algorithm,this.key.buffer),t=ip(this.signature.buffer,this.encoding);return this.emit("done",e,t),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(s){this.readable=!1,this.emit("error",s),this.emit("close")}};rs.decode=ip;rs.isValid=sp;rs.verify=np;op.exports=rs});var _i=j(Xt=>{var up=Xd(),wi=ap(),Vv=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];Xt.ALGORITHMS=Vv;Xt.sign=up.sign;Xt.verify=wi.verify;Xt.decode=wi.decode;Xt.isValid=wi.isValid;Xt.createSign=function(e){return new up(e)};Xt.createVerify=function(e){return new wi(e)}});var zu=j((WR,cp)=>{var zv=_i();cp.exports=function(r,e){e=e||{};var t=zv.decode(r,e);if(!t)return null;var s=t.payload;if(typeof s=="string")try{var n=JSON.parse(s);n!==null&&typeof n=="object"&&(s=n)}catch{}return e.complete===!0?{header:t.header,payload:s,signature:t.signature}:s}});var rn=j((GR,lp)=>{var Si=function(r,e){Error.call(this,r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=r,e&&(this.inner=e)};Si.prototype=Object.create(Error.prototype);Si.prototype.constructor=Si;lp.exports=Si});var Wu=j((KR,hp)=>{var fp=rn(),Ei=function(r,e){fp.call(this,r),this.name="NotBeforeError",this.date=e};Ei.prototype=Object.create(fp.prototype);Ei.prototype.constructor=Ei;hp.exports=Ei});var Gu=j((HR,pp)=>{var dp=rn(),xi=function(r,e){dp.call(this,r),this.name="TokenExpiredError",this.expiredAt=e};xi.prototype=Object.create(dp.prototype);xi.prototype.constructor=xi;pp.exports=xi});var gp=j((ZR,mp)=>{var ss=1e3,ns=ss*60,is=ns*60,pr=is*24,Wv=pr*7,Gv=pr*365.25;mp.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Kv(r);if(t==="number"&&isFinite(r))return e.long?Zv(r):Hv(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Kv(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return t*Gv;case"weeks":case"week":case"w":return t*Wv;case"days":case"day":case"d":return t*pr;case"hours":case"hour":case"hrs":case"hr":case"h":return t*is;case"minutes":case"minute":case"mins":case"min":case"m":return t*ns;case"seconds":case"second":case"secs":case"sec":case"s":return t*ss;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Hv(r){var e=Math.abs(r);return e>=pr?Math.round(r/pr)+"d":e>=is?Math.round(r/is)+"h":e>=ns?Math.round(r/ns)+"m":e>=ss?Math.round(r/ss)+"s":r+"ms"}function Zv(r){var e=Math.abs(r);return e>=pr?Ti(r,e,pr,"day"):e>=is?Ti(r,e,is,"hour"):e>=ns?Ti(r,e,ns,"minute"):e>=ss?Ti(r,e,ss,"second"):r+" ms"}function Ti(r,e,t,s){var n=e>=t*1.5;return Math.round(r/t)+" "+s+(n?"s":"")}});var Ku=j((XR,yp)=>{var Xv=gp();yp.exports=function(r,e){var t=e||Math.floor(Date.now()/1e3);if(typeof r=="string"){var s=Xv(r);return typeof s>"u"?void 0:Math.floor(t+s/1e3)}else return typeof r=="number"?t+r:void 0}});var sn=j((JR,bp)=>{"use strict";var Jv="2.0.0",Yv=Number.MAX_SAFE_INTEGER||9007199254740991,ew=16,tw=250,rw=["major","premajor","minor","preminor","patch","prepatch","prerelease"];bp.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ew,MAX_SAFE_BUILD_LENGTH:tw,MAX_SAFE_INTEGER:Yv,RELEASE_TYPES:rw,SEMVER_SPEC_VERSION:Jv,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var nn=j((YR,vp)=>{"use strict";var sw=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};vp.exports=sw});var os=j((Ct,wp)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Hu,MAX_SAFE_BUILD_LENGTH:nw,MAX_LENGTH:iw}=sn(),ow=nn();Ct=wp.exports={};var aw=Ct.re=[],uw=Ct.safeRe=[],G=Ct.src=[],cw=Ct.safeSrc=[],K=Ct.t={},lw=0,Zu="[a-zA-Z0-9-]",fw=[["\\s",1],["\\d",iw],[Zu,nw]],hw=r=>{for(let[e,t]of fw)r=r.split(`${e}*`).join(`${e}{0,${t}}`).split(`${e}+`).join(`${e}{1,${t}}`);return r},ce=(r,e,t)=>{let s=hw(e),n=lw++;ow(r,n,e),K[r]=n,G[n]=e,cw[n]=s,aw[n]=new RegExp(e,t?"g":void 0),uw[n]=new RegExp(s,t?"g":void 0)};ce("NUMERICIDENTIFIER","0|[1-9]\\d*");ce("NUMERICIDENTIFIERLOOSE","\\d+");ce("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Zu}*`);ce("MAINVERSION",`(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})\\.(${G[K.NUMERICIDENTIFIER]})`);ce("MAINVERSIONLOOSE",`(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})\\.(${G[K.NUMERICIDENTIFIERLOOSE]})`);ce("PRERELEASEIDENTIFIER",`(?:${G[K.NONNUMERICIDENTIFIER]}|${G[K.NUMERICIDENTIFIER]})`);ce("PRERELEASEIDENTIFIERLOOSE",`(?:${G[K.NONNUMERICIDENTIFIER]}|${G[K.NUMERICIDENTIFIERLOOSE]})`);ce("PRERELEASE",`(?:-(${G[K.PRERELEASEIDENTIFIER]}(?:\\.${G[K.PRERELEASEIDENTIFIER]})*))`);ce("PRERELEASELOOSE",`(?:-?(${G[K.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${G[K.PRERELEASEIDENTIFIERLOOSE]})*))`);ce("BUILDIDENTIFIER",`${Zu}+`);ce("BUILD",`(?:\\+(${G[K.BUILDIDENTIFIER]}(?:\\.${G[K.BUILDIDENTIFIER]})*))`);ce("FULLPLAIN",`v?${G[K.MAINVERSION]}${G[K.PRERELEASE]}?${G[K.BUILD]}?`);ce("FULL",`^${G[K.FULLPLAIN]}$`);ce("LOOSEPLAIN",`[v=\\s]*${G[K.MAINVERSIONLOOSE]}${G[K.PRERELEASELOOSE]}?${G[K.BUILD]}?`);ce("LOOSE",`^${G[K.LOOSEPLAIN]}$`);ce("GTLT","((?:<|>)?=?)");ce("XRANGEIDENTIFIERLOOSE",`${G[K.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ce("XRANGEIDENTIFIER",`${G[K.NUMERICIDENTIFIER]}|x|X|\\*`);ce("XRANGEPLAIN",`[v=\\s]*(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:\\.(${G[K.XRANGEIDENTIFIER]})(?:${G[K.PRERELEASE]})?${G[K.BUILD]}?)?)?`);ce("XRANGEPLAINLOOSE",`[v=\\s]*(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${G[K.XRANGEIDENTIFIERLOOSE]})(?:${G[K.PRERELEASELOOSE]})?${G[K.BUILD]}?)?)?`);ce("XRANGE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAIN]}$`);ce("XRANGELOOSE",`^${G[K.GTLT]}\\s*${G[K.XRANGEPLAINLOOSE]}$`);ce("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Hu}})(?:\\.(\\d{1,${Hu}}))?(?:\\.(\\d{1,${Hu}}))?`);ce("COERCE",`${G[K.COERCEPLAIN]}(?:$|[^\\d])`);ce("COERCEFULL",G[K.COERCEPLAIN]+`(?:${G[K.PRERELEASE]})?(?:${G[K.BUILD]})?(?:$|[^\\d])`);ce("COERCERTL",G[K.COERCE],!0);ce("COERCERTLFULL",G[K.COERCEFULL],!0);ce("LONETILDE","(?:~>?)");ce("TILDETRIM",`(\\s*)${G[K.LONETILDE]}\\s+`,!0);Ct.tildeTrimReplace="$1~";ce("TILDE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAIN]}$`);ce("TILDELOOSE",`^${G[K.LONETILDE]}${G[K.XRANGEPLAINLOOSE]}$`);ce("LONECARET","(?:\\^)");ce("CARETTRIM",`(\\s*)${G[K.LONECARET]}\\s+`,!0);Ct.caretTrimReplace="$1^";ce("CARET",`^${G[K.LONECARET]}${G[K.XRANGEPLAIN]}$`);ce("CARETLOOSE",`^${G[K.LONECARET]}${G[K.XRANGEPLAINLOOSE]}$`);ce("COMPARATORLOOSE",`^${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]})$|^$`);ce("COMPARATOR",`^${G[K.GTLT]}\\s*(${G[K.FULLPLAIN]})$|^$`);ce("COMPARATORTRIM",`(\\s*)${G[K.GTLT]}\\s*(${G[K.LOOSEPLAIN]}|${G[K.XRANGEPLAIN]})`,!0);Ct.comparatorTrimReplace="$1$2$3";ce("HYPHENRANGE",`^\\s*(${G[K.XRANGEPLAIN]})\\s+-\\s+(${G[K.XRANGEPLAIN]})\\s*$`);ce("HYPHENRANGELOOSE",`^\\s*(${G[K.XRANGEPLAINLOOSE]})\\s+-\\s+(${G[K.XRANGEPLAINLOOSE]})\\s*$`);ce("STAR","(<|>)?=?\\s*\\*");ce("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ce("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Ci=j((eL,_p)=>{"use strict";var dw=Object.freeze({loose:!0}),pw=Object.freeze({}),mw=r=>r?typeof r!="object"?dw:r:pw;_p.exports=mw});var Xu=j((tL,xp)=>{"use strict";var Sp=/^[0-9]+$/,Ep=(r,e)=>{let t=Sp.test(r),s=Sp.test(e);return t&&s&&(r=+r,e=+e),r===e?0:t&&!s?-1:s&&!t?1:r<e?-1:1},gw=(r,e)=>Ep(e,r);xp.exports={compareIdentifiers:Ep,rcompareIdentifiers:gw}});var Ve=j((rL,Cp)=>{"use strict";var Ni=nn(),{MAX_LENGTH:Tp,MAX_SAFE_INTEGER:Ai}=sn(),{safeRe:Ii,t:Pi}=os(),yw=Ci(),{compareIdentifiers:as}=Xu(),Ju=class r{constructor(e,t){if(t=yw(t),e instanceof r){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Tp)throw new TypeError(`version is longer than ${Tp} characters`);Ni("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let s=e.trim().match(t.loose?Ii[Pi.LOOSE]:Ii[Pi.FULL]);if(!s)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+s[1],this.minor=+s[2],this.patch=+s[3],this.major>Ai||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ai||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ai||this.patch<0)throw new TypeError("Invalid patch version");s[4]?this.prerelease=s[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){let i=+n;if(i>=0&&i<Ai)return i}return n}):this.prerelease=[],this.build=s[5]?s[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ni("SemVer.compare",this.version,this.options,e),!(e instanceof r)){if(typeof e=="string"&&e===this.version)return 0;e=new r(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof r||(e=new r(e,this.options)),as(this.major,e.major)||as(this.minor,e.minor)||as(this.patch,e.patch)}comparePre(e){if(e instanceof r||(e=new r(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let s=this.prerelease[t],n=e.prerelease[t];if(Ni("prerelease compare",t,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return as(s,n)}while(++t)}compareBuild(e){e instanceof r||(e=new r(e,this.options));let t=0;do{let s=this.build[t],n=e.build[t];if(Ni("build compare",t,s,n),s===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(s===void 0)return-1;if(s===n)continue;return as(s,n)}while(++t)}inc(e,t,s){if(e.startsWith("pre")){if(!t&&s===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let n=`-${t}`.match(this.options.loose?Ii[Pi.PRERELEASELOOSE]:Ii[Pi.PRERELEASE]);if(!n||n[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,s);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,s);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,s),this.inc("pre",t,s);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,s),this.inc("pre",t,s);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let n=Number(s)?1:0;if(this.prerelease.length===0)this.prerelease=[n];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&s===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n)}}if(t){let i=[t,n];s===!1&&(i=[t]),as(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};Cp.exports=Ju});var mr=j((sL,Ap)=>{"use strict";var Np=Ve(),bw=(r,e,t=!1)=>{if(r instanceof Np)return r;try{return new Np(r,e)}catch(s){if(!t)return null;throw s}};Ap.exports=bw});var Pp=j((nL,Ip)=>{"use strict";var vw=mr(),ww=(r,e)=>{let t=vw(r,e);return t?t.version:null};Ip.exports=ww});var Rp=j((iL,Op)=>{"use strict";var _w=mr(),Sw=(r,e)=>{let t=_w(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};Op.exports=Sw});var $p=j((oL,kp)=>{"use strict";var Lp=Ve(),Ew=(r,e,t,s,n)=>{typeof t=="string"&&(n=s,s=t,t=void 0);try{return new Lp(r instanceof Lp?r.version:r,t).inc(e,s,n).version}catch{return null}};kp.exports=Ew});var qp=j((aL,Mp)=>{"use strict";var Bp=mr(),xw=(r,e)=>{let t=Bp(r,null,!0),s=Bp(e,null,!0),n=t.compare(s);if(n===0)return null;let i=n>0,o=i?t:s,a=i?s:t,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=c?"pre":"";return t.major!==s.major?l+"major":t.minor!==s.minor?l+"minor":t.patch!==s.patch?l+"patch":"prerelease"};Mp.exports=xw});var jp=j((uL,Dp)=>{"use strict";var Tw=Ve(),Cw=(r,e)=>new Tw(r,e).major;Dp.exports=Cw});var Up=j((cL,Fp)=>{"use strict";var Nw=Ve(),Aw=(r,e)=>new Nw(r,e).minor;Fp.exports=Aw});var Vp=j((lL,Qp)=>{"use strict";var Iw=Ve(),Pw=(r,e)=>new Iw(r,e).patch;Qp.exports=Pw});var Wp=j((fL,zp)=>{"use strict";var Ow=mr(),Rw=(r,e)=>{let t=Ow(r,e);return t&&t.prerelease.length?t.prerelease:null};zp.exports=Rw});var lt=j((hL,Kp)=>{"use strict";var Gp=Ve(),Lw=(r,e,t)=>new Gp(r,t).compare(new Gp(e,t));Kp.exports=Lw});var Zp=j((dL,Hp)=>{"use strict";var kw=lt(),$w=(r,e,t)=>kw(e,r,t);Hp.exports=$w});var Jp=j((pL,Xp)=>{"use strict";var Bw=lt(),Mw=(r,e)=>Bw(r,e,!0);Xp.exports=Mw});var Oi=j((mL,em)=>{"use strict";var Yp=Ve(),qw=(r,e,t)=>{let s=new Yp(r,t),n=new Yp(e,t);return s.compare(n)||s.compareBuild(n)};em.exports=qw});var rm=j((gL,tm)=>{"use strict";var Dw=Oi(),jw=(r,e)=>r.sort((t,s)=>Dw(t,s,e));tm.exports=jw});var nm=j((yL,sm)=>{"use strict";var Fw=Oi(),Uw=(r,e)=>r.sort((t,s)=>Fw(s,t,e));sm.exports=Uw});var on=j((bL,im)=>{"use strict";var Qw=lt(),Vw=(r,e,t)=>Qw(r,e,t)>0;im.exports=Vw});var Ri=j((vL,om)=>{"use strict";var zw=lt(),Ww=(r,e,t)=>zw(r,e,t)<0;om.exports=Ww});var Yu=j((wL,am)=>{"use strict";var Gw=lt(),Kw=(r,e,t)=>Gw(r,e,t)===0;am.exports=Kw});var ec=j((_L,um)=>{"use strict";var Hw=lt(),Zw=(r,e,t)=>Hw(r,e,t)!==0;um.exports=Zw});var Li=j((SL,cm)=>{"use strict";var Xw=lt(),Jw=(r,e,t)=>Xw(r,e,t)>=0;cm.exports=Jw});var ki=j((EL,lm)=>{"use strict";var Yw=lt(),e_=(r,e,t)=>Yw(r,e,t)<=0;lm.exports=e_});var tc=j((xL,fm)=>{"use strict";var t_=Yu(),r_=ec(),s_=on(),n_=Li(),i_=Ri(),o_=ki(),a_=(r,e,t,s)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return t_(r,t,s);case"!=":return r_(r,t,s);case">":return s_(r,t,s);case">=":return n_(r,t,s);case"<":return i_(r,t,s);case"<=":return o_(r,t,s);default:throw new TypeError(`Invalid operator: ${e}`)}};fm.exports=a_});var dm=j((TL,hm)=>{"use strict";var u_=Ve(),c_=mr(),{safeRe:$i,t:Bi}=os(),l_=(r,e)=>{if(r instanceof u_)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?$i[Bi.COERCEFULL]:$i[Bi.COERCE]);else{let c=e.includePrerelease?$i[Bi.COERCERTLFULL]:$i[Bi.COERCERTL],h;for(;(h=c.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||h.index+h[0].length!==t.index+t[0].length)&&(t=h),c.lastIndex=h.index+h[1].length+h[2].length;c.lastIndex=-1}if(t===null)return null;let s=t[2],n=t[3]||"0",i=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",a=e.includePrerelease&&t[6]?`+${t[6]}`:"";return c_(`${s}.${n}.${i}${o}${a}`,e)};hm.exports=l_});var mm=j((CL,pm)=>{"use strict";var rc=class{constructor(){this.max=1e3,this.map=new Map}get(e){let t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){let n=this.map.keys().next().value;this.delete(n)}this.map.set(e,t)}return this}};pm.exports=rc});var ft=j((NL,vm)=>{"use strict";var f_=/\s+/g,sc=class r{constructor(e,t){if(t=d_(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof nc)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(f_," "),this.set=this.raw.split("||").map(s=>this.parseRange(s.trim())).filter(s=>s.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let s=this.set[0];if(this.set=this.set.filter(n=>!ym(n[0])),this.set.length===0)this.set=[s];else if(this.set.length>1){for(let n of this.set)if(n.length===1&&w_(n[0])){this.set=[n];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let t=this.set[e];for(let s=0;s<t.length;s++)s>0&&(this.formatted+=" "),this.formatted+=t[s].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let s=((this.options.includePrerelease&&b_)|(this.options.loose&&v_))+":"+e,n=gm.get(s);if(n)return n;let i=this.options.loose,o=i?et[Ge.HYPHENRANGELOOSE]:et[Ge.HYPHENRANGE];e=e.replace(o,P_(this.options.includePrerelease)),xe("hyphen replace",e),e=e.replace(et[Ge.COMPARATORTRIM],m_),xe("comparator trim",e),e=e.replace(et[Ge.TILDETRIM],g_),xe("tilde trim",e),e=e.replace(et[Ge.CARETTRIM],y_),xe("caret trim",e);let a=e.split(" ").map(p=>__(p,this.options)).join(" ").split(/\s+/).map(p=>I_(p,this.options));i&&(a=a.filter(p=>(xe("loose invalid filter",p,this.options),!!p.match(et[Ge.COMPARATORLOOSE])))),xe("range list",a);let c=new Map,h=a.map(p=>new nc(p,this.options));for(let p of h){if(ym(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return gm.set(s,l),l}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(s=>bm(s,t)&&e.set.some(n=>bm(n,t)&&s.every(i=>n.every(o=>i.intersects(o,t)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new p_(e,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(O_(this.set[t],e,this.options))return!0;return!1}};vm.exports=sc;var h_=mm(),gm=new h_,d_=Ci(),nc=an(),xe=nn(),p_=Ve(),{safeRe:et,t:Ge,comparatorTrimReplace:m_,tildeTrimReplace:g_,caretTrimReplace:y_}=os(),{FLAG_INCLUDE_PRERELEASE:b_,FLAG_LOOSE:v_}=sn(),ym=r=>r.value==="<0.0.0-0",w_=r=>r.value==="",bm=(r,e)=>{let t=!0,s=r.slice(),n=s.pop();for(;t&&s.length;)t=s.every(i=>n.intersects(i,e)),n=s.pop();return t},__=(r,e)=>(xe("comp",r,e),r=x_(r,e),xe("caret",r),r=S_(r,e),xe("tildes",r),r=C_(r,e),xe("xrange",r),r=A_(r,e),xe("stars",r),r),Ke=r=>!r||r.toLowerCase()==="x"||r==="*",S_=(r,e)=>r.trim().split(/\s+/).map(t=>E_(t,e)).join(" "),E_=(r,e)=>{let t=e.loose?et[Ge.TILDELOOSE]:et[Ge.TILDE];return r.replace(t,(s,n,i,o,a)=>{xe("tilde",r,s,n,i,o,a);let c;return Ke(n)?c="":Ke(i)?c=`>=${n}.0.0 <${+n+1}.0.0-0`:Ke(o)?c=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:a?(xe("replaceTilde pr",a),c=`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`):c=`>=${n}.${i}.${o} <${n}.${+i+1}.0-0`,xe("tilde return",c),c})},x_=(r,e)=>r.trim().split(/\s+/).map(t=>T_(t,e)).join(" "),T_=(r,e)=>{xe("caret",r,e);let t=e.loose?et[Ge.CARETLOOSE]:et[Ge.CARET],s=e.includePrerelease?"-0":"";return r.replace(t,(n,i,o,a,c)=>{xe("caret",r,n,i,o,a,c);let h;return Ke(i)?h="":Ke(o)?h=`>=${i}.0.0${s} <${+i+1}.0.0-0`:Ke(a)?i==="0"?h=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`:h=`>=${i}.${o}.0${s} <${+i+1}.0.0-0`:c?(xe("replaceCaret pr",c),i==="0"?o==="0"?h=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:h=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:h=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(xe("no pr"),i==="0"?o==="0"?h=`>=${i}.${o}.${a}${s} <${i}.${o}.${+a+1}-0`:h=`>=${i}.${o}.${a}${s} <${i}.${+o+1}.0-0`:h=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),xe("caret return",h),h})},C_=(r,e)=>(xe("replaceXRanges",r,e),r.split(/\s+/).map(t=>N_(t,e)).join(" ")),N_=(r,e)=>{r=r.trim();let t=e.loose?et[Ge.XRANGELOOSE]:et[Ge.XRANGE];return r.replace(t,(s,n,i,o,a,c)=>{xe("xRange",r,s,n,i,o,a,c);let h=Ke(i),l=h||Ke(o),p=l||Ke(a),g=p;return n==="="&&g&&(n=""),c=e.includePrerelease?"-0":"",h?n===">"||n==="<"?s="<0.0.0-0":s="*":n&&g?(l&&(o=0),a=0,n===">"?(n=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):n==="<="&&(n="<",l?i=+i+1:o=+o+1),n==="<"&&(c="-0"),s=`${n+i}.${o}.${a}${c}`):l?s=`>=${i}.0.0${c} <${+i+1}.0.0-0`:p&&(s=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),xe("xRange return",s),s})},A_=(r,e)=>(xe("replaceStars",r,e),r.trim().replace(et[Ge.STAR],"")),I_=(r,e)=>(xe("replaceGTE0",r,e),r.trim().replace(et[e.includePrerelease?Ge.GTE0PRE:Ge.GTE0],"")),P_=r=>(e,t,s,n,i,o,a,c,h,l,p,g)=>(Ke(s)?t="":Ke(n)?t=`>=${s}.0.0${r?"-0":""}`:Ke(i)?t=`>=${s}.${n}.0${r?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${r?"-0":""}`,Ke(h)?c="":Ke(l)?c=`<${+h+1}.0.0-0`:Ke(p)?c=`<${h}.${+l+1}.0-0`:g?c=`<=${h}.${l}.${p}-${g}`:r?c=`<${h}.${l}.${+p+1}-0`:c=`<=${c}`,`${t} ${c}`.trim()),O_=(r,e,t)=>{for(let s=0;s<r.length;s++)if(!r[s].test(e))return!1;if(e.prerelease.length&&!t.includePrerelease){for(let s=0;s<r.length;s++)if(xe(r[s].semver),r[s].semver!==nc.ANY&&r[s].semver.prerelease.length>0){let n=r[s].semver;if(n.major===e.major&&n.minor===e.minor&&n.patch===e.patch)return!0}return!1}return!0}});var an=j((AL,Tm)=>{"use strict";var un=Symbol("SemVer ANY"),ac=class r{static get ANY(){return un}constructor(e,t){if(t=wm(t),e instanceof r){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),oc("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===un?this.value="":this.value=this.operator+this.semver.version,oc("comp",this)}parse(e){let t=this.options.loose?_m[Sm.COMPARATORLOOSE]:_m[Sm.COMPARATOR],s=e.match(t);if(!s)throw new TypeError(`Invalid comparator: ${e}`);this.operator=s[1]!==void 0?s[1]:"",this.operator==="="&&(this.operator=""),s[2]?this.semver=new Em(s[2],this.options.loose):this.semver=un}toString(){return this.value}test(e){if(oc("Comparator.test",e,this.options.loose),this.semver===un||e===un)return!0;if(typeof e=="string")try{e=new Em(e,this.options)}catch{return!1}return ic(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new xm(e.value,t).test(this.value):e.operator===""?e.value===""?!0:new xm(this.value,t).test(e.semver):(t=wm(t),t.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||ic(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||ic(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};Tm.exports=ac;var wm=Ci(),{safeRe:_m,t:Sm}=os(),ic=tc(),oc=nn(),Em=Ve(),xm=ft()});var cn=j((IL,Cm)=>{"use strict";var R_=ft(),L_=(r,e,t)=>{try{e=new R_(e,t)}catch{return!1}return e.test(r)};Cm.exports=L_});var Am=j((PL,Nm)=>{"use strict";var k_=ft(),$_=(r,e)=>new k_(r,e).set.map(t=>t.map(s=>s.value).join(" ").trim().split(" "));Nm.exports=$_});var Pm=j((OL,Im)=>{"use strict";var B_=Ve(),M_=ft(),q_=(r,e,t)=>{let s=null,n=null,i=null;try{i=new M_(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!s||n.compare(o)===-1)&&(s=o,n=new B_(s,t))}),s};Im.exports=q_});var Rm=j((RL,Om)=>{"use strict";var D_=Ve(),j_=ft(),F_=(r,e,t)=>{let s=null,n=null,i=null;try{i=new j_(e,t)}catch{return null}return r.forEach(o=>{i.test(o)&&(!s||n.compare(o)===1)&&(s=o,n=new D_(s,t))}),s};Om.exports=F_});var $m=j((LL,km)=>{"use strict";var uc=Ve(),U_=ft(),Lm=on(),Q_=(r,e)=>{r=new U_(r,e);let t=new uc("0.0.0");if(r.test(t)||(t=new uc("0.0.0-0"),r.test(t)))return t;t=null;for(let s=0;s<r.set.length;++s){let n=r.set[s],i=null;n.forEach(o=>{let a=new uc(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Lm(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Lm(t,i))&&(t=i)}return t&&r.test(t)?t:null};km.exports=Q_});var Mm=j((kL,Bm)=>{"use strict";var V_=ft(),z_=(r,e)=>{try{return new V_(r,e).range||"*"}catch{return null}};Bm.exports=z_});var Mi=j(($L,Fm)=>{"use strict";var W_=Ve(),jm=an(),{ANY:G_}=jm,K_=ft(),H_=cn(),qm=on(),Dm=Ri(),Z_=ki(),X_=Li(),J_=(r,e,t,s)=>{r=new W_(r,s),e=new K_(e,s);let n,i,o,a,c;switch(t){case">":n=qm,i=Z_,o=Dm,a=">",c=">=";break;case"<":n=Dm,i=X_,o=qm,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(H_(r,e,s))return!1;for(let h=0;h<e.set.length;++h){let l=e.set[h],p=null,g=null;if(l.forEach(v=>{v.semver===G_&&(v=new jm(">=0.0.0")),p=p||v,g=g||v,n(v.semver,p.semver,s)?p=v:o(v.semver,g.semver,s)&&(g=v)}),p.operator===a||p.operator===c||(!g.operator||g.operator===a)&&i(r,g.semver))return!1;if(g.operator===c&&o(r,g.semver))return!1}return!0};Fm.exports=J_});var Qm=j((BL,Um)=>{"use strict";var Y_=Mi(),eS=(r,e,t)=>Y_(r,e,">",t);Um.exports=eS});var zm=j((ML,Vm)=>{"use strict";var tS=Mi(),rS=(r,e,t)=>tS(r,e,"<",t);Vm.exports=rS});var Km=j((qL,Gm)=>{"use strict";var Wm=ft(),sS=(r,e,t)=>(r=new Wm(r,t),e=new Wm(e,t),r.intersects(e,t));Gm.exports=sS});var Zm=j((DL,Hm)=>{"use strict";var nS=cn(),iS=lt();Hm.exports=(r,e,t)=>{let s=[],n=null,i=null,o=r.sort((l,p)=>iS(l,p,t));for(let l of o)nS(l,e,t)?(i=l,n||(n=l)):(i&&s.push([n,i]),i=null,n=null);n&&s.push([n,null]);let a=[];for(let[l,p]of s)l===p?a.push(l):!p&&l===o[0]?a.push("*"):p?l===o[0]?a.push(`<=${p}`):a.push(`${l} - ${p}`):a.push(`>=${l}`);let c=a.join(" || "),h=typeof e.raw=="string"?e.raw:String(e);return c.length<h.length?c:e}});var rg=j((jL,tg)=>{"use strict";var Xm=ft(),lc=an(),{ANY:cc}=lc,ln=cn(),fc=lt(),oS=(r,e,t={})=>{if(r===e)return!0;r=new Xm(r,t),e=new Xm(e,t);let s=!1;e:for(let n of r.set){for(let i of e.set){let o=uS(n,i,t);if(s=s||o!==null,o)continue e}if(s)return!1}return!0},aS=[new lc(">=0.0.0-0")],Jm=[new lc(">=0.0.0")],uS=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===cc){if(e.length===1&&e[0].semver===cc)return!0;t.includePrerelease?r=aS:r=Jm}if(e.length===1&&e[0].semver===cc){if(t.includePrerelease)return!0;e=Jm}let s=new Set,n,i;for(let v of r)v.operator===">"||v.operator===">="?n=Ym(n,v,t):v.operator==="<"||v.operator==="<="?i=eg(i,v,t):s.add(v.semver);if(s.size>1)return null;let o;if(n&&i){if(o=fc(n.semver,i.semver,t),o>0)return null;if(o===0&&(n.operator!==">="||i.operator!=="<="))return null}for(let v of s){if(n&&!ln(v,String(n),t)||i&&!ln(v,String(i),t))return null;for(let m of e)if(!ln(v,String(m),t))return!1;return!0}let a,c,h,l,p=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,g=n&&!t.includePrerelease&&n.semver.prerelease.length?n.semver:!1;p&&p.prerelease.length===1&&i.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let v of e){if(l=l||v.operator===">"||v.operator===">=",h=h||v.operator==="<"||v.operator==="<=",n){if(g&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===g.major&&v.semver.minor===g.minor&&v.semver.patch===g.patch&&(g=!1),v.operator===">"||v.operator===">="){if(a=Ym(n,v,t),a===v&&a!==n)return!1}else if(n.operator===">="&&!ln(n.semver,String(v),t))return!1}if(i){if(p&&v.semver.prerelease&&v.semver.prerelease.length&&v.semver.major===p.major&&v.semver.minor===p.minor&&v.semver.patch===p.patch&&(p=!1),v.operator==="<"||v.operator==="<="){if(c=eg(i,v,t),c===v&&c!==i)return!1}else if(i.operator==="<="&&!ln(i.semver,String(v),t))return!1}if(!v.operator&&(i||n)&&o!==0)return!1}return!(n&&h&&!i&&o!==0||i&&l&&!n&&o!==0||g||p)},Ym=(r,e,t)=>{if(!r)return e;let s=fc(r.semver,e.semver,t);return s>0?r:s<0||e.operator===">"&&r.operator===">="?e:r},eg=(r,e,t)=>{if(!r)return e;let s=fc(r.semver,e.semver,t);return s<0?r:s>0||e.operator==="<"&&r.operator==="<="?e:r};tg.exports=oS});var qi=j((FL,ig)=>{"use strict";var hc=os(),sg=sn(),cS=Ve(),ng=Xu(),lS=mr(),fS=Pp(),hS=Rp(),dS=$p(),pS=qp(),mS=jp(),gS=Up(),yS=Vp(),bS=Wp(),vS=lt(),wS=Zp(),_S=Jp(),SS=Oi(),ES=rm(),xS=nm(),TS=on(),CS=Ri(),NS=Yu(),AS=ec(),IS=Li(),PS=ki(),OS=tc(),RS=dm(),LS=an(),kS=ft(),$S=cn(),BS=Am(),MS=Pm(),qS=Rm(),DS=$m(),jS=Mm(),FS=Mi(),US=Qm(),QS=zm(),VS=Km(),zS=Zm(),WS=rg();ig.exports={parse:lS,valid:fS,clean:hS,inc:dS,diff:pS,major:mS,minor:gS,patch:yS,prerelease:bS,compare:vS,rcompare:wS,compareLoose:_S,compareBuild:SS,sort:ES,rsort:xS,gt:TS,lt:CS,eq:NS,neq:AS,gte:IS,lte:PS,cmp:OS,coerce:RS,Comparator:LS,Range:kS,satisfies:$S,toComparators:BS,maxSatisfying:MS,minSatisfying:qS,minVersion:DS,validRange:jS,outside:FS,gtr:US,ltr:QS,intersects:VS,simplifyRange:zS,subset:WS,SemVer:cS,re:hc.re,src:hc.src,tokens:hc.t,SEMVER_SPEC_VERSION:sg.SEMVER_SPEC_VERSION,RELEASE_TYPES:sg.RELEASE_TYPES,compareIdentifiers:ng.compareIdentifiers,rcompareIdentifiers:ng.rcompareIdentifiers}});var ag=j((UL,og)=>{var GS=qi();og.exports=GS.satisfies(process.version,">=15.7.0")});var cg=j((QL,ug)=>{var KS=qi();ug.exports=KS.satisfies(process.version,">=16.9.0")});var dc=j((VL,lg)=>{var HS=ag(),ZS=cg(),XS={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},JS={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};lg.exports=function(r,e){if(!r||!e)return;let t=e.asymmetricKeyType;if(!t)return;let s=XS[t];if(!s)throw new Error(`Unknown key type "${t}".`);if(!s.includes(r))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${s.join(", ")}.`);if(HS)switch(t){case"ec":let n=e.asymmetricKeyDetails.namedCurve,i=JS[r];if(n!==i)throw new Error(`"alg" parameter "${r}" requires curve "${i}".`);break;case"rsa-pss":if(ZS){let o=parseInt(r.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:c,saltLength:h}=e.asymmetricKeyDetails;if(a!==`sha${o}`||c!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${r}.`);if(h!==void 0&&h>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${r}.`)}break}}});var pc=j((zL,fg)=>{var YS=qi();fg.exports=YS.satisfies(process.version,"^6.12.0 || >=8.0.0")});var pg=j((WL,dg)=>{var Ee=rn(),e1=Wu(),hg=Gu(),t1=zu(),r1=Ku(),s1=dc(),n1=pc(),i1=_i(),{KeyObject:o1,createSecretKey:a1,createPublicKey:u1}=require("crypto"),mc=["RS256","RS384","RS512"],c1=["ES256","ES384","ES512"],gc=["RS256","RS384","RS512"],l1=["HS256","HS384","HS512"];n1&&(mc.splice(mc.length,0,"PS256","PS384","PS512"),gc.splice(gc.length,0,"PS256","PS384","PS512"));dg.exports=function(r,e,t,s){typeof t=="function"&&!s&&(s=t,t={}),t||(t={}),t=Object.assign({},t);let n;if(s?n=s:n=function(l,p){if(l)throw l;return p},t.clockTimestamp&&typeof t.clockTimestamp!="number")return n(new Ee("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return n(new Ee("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return n(new Ee("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!r)return n(new Ee("jwt must be provided"));if(typeof r!="string")return n(new Ee("jwt must be a string"));let o=r.split(".");if(o.length!==3)return n(new Ee("jwt malformed"));let a;try{a=t1(r,{complete:!0})}catch(l){return n(l)}if(!a)return n(new Ee("invalid token"));let c=a.header,h;if(typeof e=="function"){if(!s)return n(new Ee("verify must be called asynchronous if secret or public key is provided as a callback"));h=e}else h=function(l,p){return p(null,e)};return h(c,function(l,p){if(l)return n(new Ee("error in secret or public key callback: "+l.message));let g=o[2].trim()!=="";if(!g&&p)return n(new Ee("jwt signature is required"));if(g&&!p)return n(new Ee("secret or public key must be provided"));if(!g&&!t.algorithms)return n(new Ee('please specify "none" in "algorithms" to verify unsigned tokens'));if(p!=null&&!(p instanceof o1))try{p=u1(p)}catch{try{p=a1(typeof p=="string"?Buffer.from(p):p)}catch{return n(new Ee("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(p.type==="secret"?t.algorithms=l1:["rsa","rsa-pss"].includes(p.asymmetricKeyType)?t.algorithms=gc:p.asymmetricKeyType==="ec"?t.algorithms=c1:t.algorithms=mc),t.algorithms.indexOf(a.header.alg)===-1)return n(new Ee("invalid algorithm"));if(c.alg.startsWith("HS")&&p.type!=="secret")return n(new Ee(`secretOrPublicKey must be a symmetric key when using ${c.alg}`));if(/^(?:RS|PS|ES)/.test(c.alg)&&p.type!=="public")return n(new Ee(`secretOrPublicKey must be an asymmetric key when using ${c.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{s1(c.alg,p)}catch(f){return n(f)}let v;try{v=i1.verify(r,a.header.alg,p)}catch(f){return n(f)}if(!v)return n(new Ee("invalid signature"));let m=a.payload;if(typeof m.nbf<"u"&&!t.ignoreNotBefore){if(typeof m.nbf!="number")return n(new Ee("invalid nbf value"));if(m.nbf>i+(t.clockTolerance||0))return n(new e1("jwt not active",new Date(m.nbf*1e3)))}if(typeof m.exp<"u"&&!t.ignoreExpiration){if(typeof m.exp!="number")return n(new Ee("invalid exp value"));if(i>=m.exp+(t.clockTolerance||0))return n(new hg("jwt expired",new Date(m.exp*1e3)))}if(t.audience){let f=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(m.aud)?m.aud:[m.aud]).some(function(S){return f.some(function(x){return x instanceof RegExp?x.test(S):x===S})}))return n(new Ee("jwt audience invalid. expected: "+f.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&m.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(m.iss)===-1))return n(new Ee("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&m.sub!==t.subject)return n(new Ee("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&m.jti!==t.jwtid)return n(new Ee("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&m.nonce!==t.nonce)return n(new Ee("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof m.iat!="number")return n(new Ee("iat required when maxAge is specified"));let f=r1(t.maxAge,m.iat);if(typeof f>"u")return n(new Ee('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=f+(t.clockTolerance||0))return n(new hg("maxAge exceeded",new Date(f*1e3)))}if(t.complete===!0){let f=a.signature;return n(null,{header:c,payload:m,signature:f})}return n(null,m)})}});var wg=j((GL,vg)=>{var mg=1/0,yg=9007199254740991,f1=17976931348623157e292,gg=NaN,h1="[object Arguments]",d1="[object Function]",p1="[object GeneratorFunction]",m1="[object String]",g1="[object Symbol]",y1=/^\s+|\s+$/g,b1=/^[-+]0x[0-9a-f]+$/i,v1=/^0b[01]+$/i,w1=/^0o[0-7]+$/i,_1=/^(?:0|[1-9]\d*)$/,S1=parseInt;function E1(r,e){for(var t=-1,s=r?r.length:0,n=Array(s);++t<s;)n[t]=e(r[t],t,r);return n}function x1(r,e,t,s){for(var n=r.length,i=t+(s?1:-1);s?i--:++i<n;)if(e(r[i],i,r))return i;return-1}function T1(r,e,t){if(e!==e)return x1(r,C1,t);for(var s=t-1,n=r.length;++s<n;)if(r[s]===e)return s;return-1}function C1(r){return r!==r}function N1(r,e){for(var t=-1,s=Array(r);++t<r;)s[t]=e(t);return s}function A1(r,e){return E1(e,function(t){return r[t]})}function I1(r,e){return function(t){return r(e(t))}}var Di=Object.prototype,bc=Di.hasOwnProperty,ji=Di.toString,P1=Di.propertyIsEnumerable,O1=I1(Object.keys,Object),R1=Math.max;function L1(r,e){var t=bg(r)||q1(r)?N1(r.length,String):[],s=t.length,n=!!s;for(var i in r)(e||bc.call(r,i))&&!(n&&(i=="length"||$1(i,s)))&&t.push(i);return t}function k1(r){if(!B1(r))return O1(r);var e=[];for(var t in Object(r))bc.call(r,t)&&t!="constructor"&&e.push(t);return e}function $1(r,e){return e=e??yg,!!e&&(typeof r=="number"||_1.test(r))&&r>-1&&r%1==0&&r<e}function B1(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Di;return r===t}function M1(r,e,t,s){r=vc(r)?r:K1(r),t=t&&!s?z1(t):0;var n=r.length;return t<0&&(t=R1(n+t,0)),U1(r)?t<=n&&r.indexOf(e,t)>-1:!!n&&T1(r,e,t)>-1}function q1(r){return D1(r)&&bc.call(r,"callee")&&(!P1.call(r,"callee")||ji.call(r)==h1)}var bg=Array.isArray;function vc(r){return r!=null&&F1(r.length)&&!j1(r)}function D1(r){return wc(r)&&vc(r)}function j1(r){var e=yc(r)?ji.call(r):"";return e==d1||e==p1}function F1(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=yg}function yc(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function wc(r){return!!r&&typeof r=="object"}function U1(r){return typeof r=="string"||!bg(r)&&wc(r)&&ji.call(r)==m1}function Q1(r){return typeof r=="symbol"||wc(r)&&ji.call(r)==g1}function V1(r){if(!r)return r===0?r:0;if(r=W1(r),r===mg||r===-mg){var e=r<0?-1:1;return e*f1}return r===r?r:0}function z1(r){var e=V1(r),t=e%1;return e===e?t?e-t:e:0}function W1(r){if(typeof r=="number")return r;if(Q1(r))return gg;if(yc(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=yc(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(y1,"");var t=v1.test(r);return t||w1.test(r)?S1(r.slice(2),t?2:8):b1.test(r)?gg:+r}function G1(r){return vc(r)?L1(r):k1(r)}function K1(r){return r?A1(r,G1(r)):[]}vg.exports=M1});var Sg=j((KL,_g)=>{var H1="[object Boolean]",Z1=Object.prototype,X1=Z1.toString;function J1(r){return r===!0||r===!1||Y1(r)&&X1.call(r)==H1}function Y1(r){return!!r&&typeof r=="object"}_g.exports=J1});var Ng=j((HL,Cg)=>{var Eg=1/0,eE=17976931348623157e292,xg=NaN,tE="[object Symbol]",rE=/^\s+|\s+$/g,sE=/^[-+]0x[0-9a-f]+$/i,nE=/^0b[01]+$/i,iE=/^0o[0-7]+$/i,oE=parseInt,aE=Object.prototype,uE=aE.toString;function cE(r){return typeof r=="number"&&r==dE(r)}function Tg(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function lE(r){return!!r&&typeof r=="object"}function fE(r){return typeof r=="symbol"||lE(r)&&uE.call(r)==tE}function hE(r){if(!r)return r===0?r:0;if(r=pE(r),r===Eg||r===-Eg){var e=r<0?-1:1;return e*eE}return r===r?r:0}function dE(r){var e=hE(r),t=e%1;return e===e?t?e-t:e:0}function pE(r){if(typeof r=="number")return r;if(fE(r))return xg;if(Tg(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Tg(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(rE,"");var t=nE.test(r);return t||iE.test(r)?oE(r.slice(2),t?2:8):sE.test(r)?xg:+r}Cg.exports=cE});var Ig=j((ZL,Ag)=>{var mE="[object Number]",gE=Object.prototype,yE=gE.toString;function bE(r){return!!r&&typeof r=="object"}function vE(r){return typeof r=="number"||bE(r)&&yE.call(r)==mE}Ag.exports=vE});var Lg=j((XL,Rg)=>{var wE="[object Object]";function _E(r){var e=!1;if(r!=null&&typeof r.toString!="function")try{e=!!(r+"")}catch{}return e}function SE(r,e){return function(t){return r(e(t))}}var EE=Function.prototype,Pg=Object.prototype,Og=EE.toString,xE=Pg.hasOwnProperty,TE=Og.call(Object),CE=Pg.toString,NE=SE(Object.getPrototypeOf,Object);function AE(r){return!!r&&typeof r=="object"}function IE(r){if(!AE(r)||CE.call(r)!=wE||_E(r))return!1;var e=NE(r);if(e===null)return!0;var t=xE.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Og.call(t)==TE}Rg.exports=IE});var $g=j((JL,kg)=>{var PE="[object String]",OE=Object.prototype,RE=OE.toString,LE=Array.isArray;function kE(r){return!!r&&typeof r=="object"}function $E(r){return typeof r=="string"||!LE(r)&&kE(r)&&RE.call(r)==PE}kg.exports=$E});var jg=j((YL,Dg)=>{var BE="Expected a function",Bg=1/0,ME=17976931348623157e292,Mg=NaN,qE="[object Symbol]",DE=/^\s+|\s+$/g,jE=/^[-+]0x[0-9a-f]+$/i,FE=/^0b[01]+$/i,UE=/^0o[0-7]+$/i,QE=parseInt,VE=Object.prototype,zE=VE.toString;function WE(r,e){var t;if(typeof e!="function")throw new TypeError(BE);return r=XE(r),function(){return--r>0&&(t=e.apply(this,arguments)),r<=1&&(e=void 0),t}}function GE(r){return WE(2,r)}function qg(r){var e=typeof r;return!!r&&(e=="object"||e=="function")}function KE(r){return!!r&&typeof r=="object"}function HE(r){return typeof r=="symbol"||KE(r)&&zE.call(r)==qE}function ZE(r){if(!r)return r===0?r:0;if(r=JE(r),r===Bg||r===-Bg){var e=r<0?-1:1;return e*ME}return r===r?r:0}function XE(r){var e=ZE(r),t=e%1;return e===e?t?e-t:e:0}function JE(r){if(typeof r=="number")return r;if(HE(r))return Mg;if(qg(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=qg(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=r.replace(DE,"");var t=FE.test(r);return t||UE.test(r)?QE(r.slice(2),t?2:8):jE.test(r)?Mg:+r}Dg.exports=GE});var Hg=j((ek,Kg)=>{var Fg=Ku(),YE=pc(),ex=dc(),Ug=_i(),tx=wg(),Fi=Sg(),Qg=Ng(),_c=Ig(),zg=Lg(),Jt=$g(),rx=jg(),{KeyObject:sx,createSecretKey:nx,createPrivateKey:ix}=require("crypto"),Wg=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];YE&&Wg.splice(3,0,"PS256","PS384","PS512");var ox={expiresIn:{isValid:function(r){return Qg(r)||Jt(r)&&r},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(r){return Qg(r)||Jt(r)&&r},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(r){return Jt(r)||Array.isArray(r)},message:'"audience" must be a string or array'},algorithm:{isValid:tx.bind(null,Wg),message:'"algorithm" must be a valid string enum value'},header:{isValid:zg,message:'"header" must be an object'},encoding:{isValid:Jt,message:'"encoding" must be a string'},issuer:{isValid:Jt,message:'"issuer" must be a string'},subject:{isValid:Jt,message:'"subject" must be a string'},jwtid:{isValid:Jt,message:'"jwtid" must be a string'},noTimestamp:{isValid:Fi,message:'"noTimestamp" must be a boolean'},keyid:{isValid:Jt,message:'"keyid" must be a string'},mutatePayload:{isValid:Fi,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:Fi,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:Fi,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},ax={iat:{isValid:_c,message:'"iat" should be a number of seconds'},exp:{isValid:_c,message:'"exp" should be a number of seconds'},nbf:{isValid:_c,message:'"nbf" should be a number of seconds'}};function Gg(r,e,t,s){if(!zg(t))throw new Error('Expected "'+s+'" to be a plain object.');Object.keys(t).forEach(function(n){let i=r[n];if(!i){if(!e)throw new Error('"'+n+'" is not allowed in "'+s+'"');return}if(!i.isValid(t[n]))throw new Error(i.message)})}function ux(r){return Gg(ox,!1,r,"options")}function cx(r){return Gg(ax,!0,r,"payload")}var Vg={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},lx=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];Kg.exports=function(r,e,t,s){typeof t=="function"?(s=t,t={}):t=t||{};let n=typeof r=="object"&&!Buffer.isBuffer(r),i=Object.assign({alg:t.algorithm||"HS256",typ:n?"JWT":void 0,kid:t.keyid},t.header);function o(h){if(s)return s(h);throw h}if(!e&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(e!=null&&!(e instanceof sx))try{e=ix(e)}catch{try{e=nx(typeof e=="string"?Buffer.from(e):e)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&e.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(e.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&e.asymmetricKeyDetails!==void 0&&e.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof r>"u")return o(new Error("payload is required"));if(n){try{cx(r)}catch(h){return o(h)}t.mutatePayload||(r=Object.assign({},r))}else{let h=lx.filter(function(l){return typeof t[l]<"u"});if(h.length>0)return o(new Error("invalid "+h.join(",")+" option for "+typeof r+" payload"))}if(typeof r.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof r.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{ux(t)}catch(h){return o(h)}if(!t.allowInvalidAsymmetricKeyTypes)try{ex(i.alg,e)}catch(h){return o(h)}let a=r.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete r.iat:n&&(r.iat=a),typeof t.notBefore<"u"){try{r.nbf=Fg(t.notBefore,a)}catch(h){return o(h)}if(typeof r.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof r=="object"){try{r.exp=Fg(t.expiresIn,a)}catch(h){return o(h)}if(typeof r.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Vg).forEach(function(h){let l=Vg[h];if(typeof t[h]<"u"){if(typeof r[l]<"u")return o(new Error('Bad "options.'+h+'" option. The payload already has an "'+l+'" property.'));r[l]=t[h]}});let c=t.encoding||"utf8";if(typeof s=="function")s=s&&rx(s),Ug.createSign({header:i,privateKey:e,payload:r,encoding:c}).once("error",s).once("done",function(h){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&h.length<256)return s(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));s(null,h)});else{let h=Ug.sign({header:i,payload:r,secret:e,encoding:c});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&h.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return h}}});var Xg=j((tk,Zg)=>{Zg.exports={decode:zu(),verify:pg(),sign:Hg(),JsonWebTokenError:rn(),NotBeforeError:Wu(),TokenExpiredError:Gu()}});var $T={};Sy($T,{handler:()=>kT});module.exports=Ey($T);var xy=Object.create,Br=Object.defineProperty,Ty=Object.getOwnPropertyDescriptor,Cy=Object.getOwnPropertyNames,Ny=Object.getPrototypeOf,Ay=Object.prototype.hasOwnProperty,Iy=(r,e,t)=>e in r?Br(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,b=(r,e)=>Br(r,"name",{value:e,configurable:!0}),Ze=(r,e)=>()=>(r&&(e=r(r=0)),e),de=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),mt=(r,e)=>{for(var t in e)Br(r,t,{get:e[t],enumerable:!0})},Bc=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Cy(e))!Ay.call(r,n)&&n!==t&&Br(r,n,{get:()=>e[n],enumerable:!(s=Ty(e,n))||s.enumerable});return r},Mr=(r,e,t)=>(t=r!=null?xy(Ny(r)):{},Bc(e||!r||!r.__esModule?Br(t,"default",{value:r,enumerable:!0}):t,r)),qe=r=>Bc(Br({},"__esModule",{value:!0}),r),oe=(r,e,t)=>Iy(r,typeof e!="symbol"?e+"":e,t),Py=de(r=>{"use strict";te(),r.byteLength=c,r.toByteArray=l,r.fromByteArray=v;var e=[],t=[],s=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(i=0,o=n.length;i<o;++i)e[i]=n[i],t[n.charCodeAt(i)]=i;var i,o;t[45]=62,t[95]=63;function a(m){var f=m.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=m.indexOf("=");w===-1&&(w=f);var _=w===f?0:4-w%4;return[w,_]}b(a,"getLens");function c(m){var f=a(m),w=f[0],_=f[1];return(w+_)*3/4-_}b(c,"byteLength");function h(m,f,w){return(f+w)*3/4-w}b(h,"_byteLength");function l(m){var f,w=a(m),_=w[0],S=w[1],x=new s(h(m,_,S)),R=0,L=S>0?_-4:_,E;for(E=0;E<L;E+=4)f=t[m.charCodeAt(E)]<<18|t[m.charCodeAt(E+1)]<<12|t[m.charCodeAt(E+2)]<<6|t[m.charCodeAt(E+3)],x[R++]=f>>16&255,x[R++]=f>>8&255,x[R++]=f&255;return S===2&&(f=t[m.charCodeAt(E)]<<2|t[m.charCodeAt(E+1)]>>4,x[R++]=f&255),S===1&&(f=t[m.charCodeAt(E)]<<10|t[m.charCodeAt(E+1)]<<4|t[m.charCodeAt(E+2)]>>2,x[R++]=f>>8&255,x[R++]=f&255),x}b(l,"toByteArray");function p(m){return e[m>>18&63]+e[m>>12&63]+e[m>>6&63]+e[m&63]}b(p,"tripletToBase64");function g(m,f,w){for(var _,S=[],x=f;x<w;x+=3)_=(m[x]<<16&16711680)+(m[x+1]<<8&65280)+(m[x+2]&255),S.push(p(_));return S.join("")}b(g,"encodeChunk");function v(m){for(var f,w=m.length,_=w%3,S=[],x=16383,R=0,L=w-_;R<L;R+=x)S.push(g(m,R,R+x>L?L:R+x));return _===1?(f=m[w-1],S.push(e[f>>2]+e[f<<4&63]+"==")):_===2&&(f=(m[w-2]<<8)+m[w-1],S.push(e[f>>10]+e[f>>4&63]+e[f<<2&63]+"=")),S.join("")}b(v,"fromByteArray")}),Oy=de(r=>{te(),r.read=function(e,t,s,n,i){var o,a,c=i*8-n-1,h=(1<<c)-1,l=h>>1,p=-7,g=s?i-1:0,v=s?-1:1,m=e[t+g];for(g+=v,o=m&(1<<-p)-1,m>>=-p,p+=c;p>0;o=o*256+e[t+g],g+=v,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=n;p>0;a=a*256+e[t+g],g+=v,p-=8);if(o===0)o=1-l;else{if(o===h)return a?NaN:(m?-1:1)*(1/0);a=a+Math.pow(2,n),o=o-l}return(m?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,s,n,i,o){var a,c,h,l=o*8-i-1,p=(1<<l)-1,g=p>>1,v=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=n?0:o-1,f=n?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-a))<1&&(a--,h*=2),a+g>=1?t+=v/h:t+=v*Math.pow(2,1-g),t*h>=2&&(a++,h/=2),a+g>=p?(c=0,a=p):a+g>=1?(c=(t*h-1)*Math.pow(2,i),a=a+g):(c=t*Math.pow(2,g-1)*Math.pow(2,i),a=0));i>=8;e[s+m]=c&255,m+=f,c/=256,i-=8);for(a=a<<i|c,l+=i;l>0;e[s+m]=a&255,m+=f,a/=256,l-=8);e[s+m-f]|=w*128}}),Ry=de(r=>{"use strict";te();var e=Py(),t=Oy(),s=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=S,r.INSPECT_MAX_BYTES=50;var n=2147483647;r.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{let u=new Uint8Array(1),d={foo:b(function(){return 42},"foo")};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf(u,d),u.foo()===42}catch{return!1}}b(i,"typedArraySupport"),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:b(function(){if(a.isBuffer(this))return this.buffer},"get")}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:b(function(){if(a.isBuffer(this))return this.byteOffset},"get")});function o(u){if(u>n)throw new RangeError('The value "'+u+'" is invalid for option "size"');let d=new Uint8Array(u);return Object.setPrototypeOf(d,a.prototype),d}b(o,"createBuffer");function a(u,d,y){if(typeof u=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(u)}return c(u,d,y)}b(a,"Buffer"),a.poolSize=8192;function c(u,d,y){if(typeof u=="string")return g(u,d);if(ArrayBuffer.isView(u))return m(u);if(u==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u);if(pt(u,ArrayBuffer)||u&&pt(u.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pt(u,SharedArrayBuffer)||u&&pt(u.buffer,SharedArrayBuffer)))return f(u,d,y);if(typeof u=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let N=u.valueOf&&u.valueOf();if(N!=null&&N!==u)return a.from(N,d,y);let O=w(u);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof u[Symbol.toPrimitive]=="function")return a.from(u[Symbol.toPrimitive]("string"),d,y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof u)}b(c,"from"),a.from=function(u,d,y){return c(u,d,y)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(u){if(typeof u!="number")throw new TypeError('"size" argument must be of type number');if(u<0)throw new RangeError('The value "'+u+'" is invalid for option "size"')}b(h,"assertSize");function l(u,d,y){return h(u),u<=0?o(u):d!==void 0?typeof y=="string"?o(u).fill(d,y):o(u).fill(d):o(u)}b(l,"alloc"),a.alloc=function(u,d,y){return l(u,d,y)};function p(u){return h(u),o(u<0?0:_(u)|0)}b(p,"allocUnsafe"),a.allocUnsafe=function(u){return p(u)},a.allocUnsafeSlow=function(u){return p(u)};function g(u,d){if((typeof d!="string"||d==="")&&(d="utf8"),!a.isEncoding(d))throw new TypeError("Unknown encoding: "+d);let y=x(u,d)|0,N=o(y),O=N.write(u,d);return O!==y&&(N=N.slice(0,O)),N}b(g,"fromString");function v(u){let d=u.length<0?0:_(u.length)|0,y=o(d);for(let N=0;N<d;N+=1)y[N]=u[N]&255;return y}b(v,"fromArrayLike");function m(u){if(pt(u,Uint8Array)){let d=new Uint8Array(u);return f(d.buffer,d.byteOffset,d.byteLength)}return v(u)}b(m,"fromArrayView");function f(u,d,y){if(d<0||u.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if(u.byteLength<d+(y||0))throw new RangeError('"length" is outside of buffer bounds');let N;return d===void 0&&y===void 0?N=new Uint8Array(u):y===void 0?N=new Uint8Array(u,d):N=new Uint8Array(u,d,y),Object.setPrototypeOf(N,a.prototype),N}b(f,"fromArrayBuffer");function w(u){if(a.isBuffer(u)){let d=_(u.length)|0,y=o(d);return y.length===0||u.copy(y,0,0,d),y}if(u.length!==void 0)return typeof u.length!="number"||bn(u.length)?o(0):v(u);if(u.type==="Buffer"&&Array.isArray(u.data))return v(u.data)}b(w,"fromObject");function _(u){if(u>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return u|0}b(_,"checked");function S(u){return+u!=u&&(u=0),a.alloc(+u)}b(S,"SlowBuffer"),a.isBuffer=b(function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},"isBuffer"),a.compare=b(function(u,d){if(pt(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),pt(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(u)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===d)return 0;let y=u.length,N=d.length;for(let O=0,q=Math.min(y,N);O<q;++O)if(u[O]!==d[O]){y=u[O],N=d[O];break}return y<N?-1:N<y?1:0},"compare"),a.isEncoding=b(function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},"isEncoding"),a.concat=b(function(u,d){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let y;if(d===void 0)for(d=0,y=0;y<u.length;++y)d+=u[y].length;let N=a.allocUnsafe(d),O=0;for(y=0;y<u.length;++y){let q=u[y];if(pt(q,Uint8Array))O+q.length>N.length?(a.isBuffer(q)||(q=a.from(q)),q.copy(N,O)):Uint8Array.prototype.set.call(N,q,O);else if(a.isBuffer(q))q.copy(N,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=q.length}return N},"concat");function x(u,d){if(a.isBuffer(u))return u.length;if(ArrayBuffer.isView(u)||pt(u,ArrayBuffer))return u.byteLength;if(typeof u!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof u);let y=u.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&y===0)return 0;let O=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return y;case"utf8":case"utf-8":return yn(u).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y*2;case"hex":return y>>>1;case"base64":return Yi(u).length;default:if(O)return N?-1:yn(u).length;d=(""+d).toLowerCase(),O=!0}}b(x,"byteLength"),a.byteLength=x;function R(u,d,y){let N=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((y===void 0||y>this.length)&&(y=this.length),y<=0)||(y>>>=0,d>>>=0,y<=d))return"";for(u||(u="utf8");;)switch(u){case"hex":return be(this,d,y);case"utf8":case"utf-8":return k(this,d,y);case"ascii":return ae(this,d,y);case"latin1":case"binary":return ge(this,d,y);case"base64":return Z(this,d,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Be(this,d,y);default:if(N)throw new TypeError("Unknown encoding: "+u);u=(u+"").toLowerCase(),N=!0}}b(R,"slowToString"),a.prototype._isBuffer=!0;function L(u,d,y){let N=u[d];u[d]=u[y],u[y]=N}b(L,"swap"),a.prototype.swap16=b(function(){let u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<u;d+=2)L(this,d,d+1);return this},"swap16"),a.prototype.swap32=b(function(){let u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<u;d+=4)L(this,d,d+3),L(this,d+1,d+2);return this},"swap32"),a.prototype.swap64=b(function(){let u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<u;d+=8)L(this,d,d+7),L(this,d+1,d+6),L(this,d+2,d+5),L(this,d+3,d+4);return this},"swap64"),a.prototype.toString=b(function(){let u=this.length;return u===0?"":arguments.length===0?k(this,0,u):R.apply(this,arguments)},"toString"),a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=b(function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:a.compare(this,u)===0},"equals"),a.prototype.inspect=b(function(){let u="",d=r.INSPECT_MAX_BYTES;return u=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(u+=" ... "),"<Buffer "+u+">"},"inspect"),s&&(a.prototype[s]=a.prototype.inspect),a.prototype.compare=b(function(u,d,y,N,O){if(pt(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(d===void 0&&(d=0),y===void 0&&(y=u?u.length:0),N===void 0&&(N=0),O===void 0&&(O=this.length),d<0||y>u.length||N<0||O>this.length)throw new RangeError("out of range index");if(N>=O&&d>=y)return 0;if(N>=O)return-1;if(d>=y)return 1;if(d>>>=0,y>>>=0,N>>>=0,O>>>=0,this===u)return 0;let q=O-N,F=y-d,_e=Math.min(q,F),Me=this.slice(N,O),Te=u.slice(d,y);for(let Se=0;Se<_e;++Se)if(Me[Se]!==Te[Se]){q=Me[Se],F=Te[Se];break}return q<F?-1:F<q?1:0},"compare");function E(u,d,y,N,O){if(u.length===0)return-1;if(typeof y=="string"?(N=y,y=0):y>2147483647?y=2147483647:y<-2147483648&&(y=-2147483648),y=+y,bn(y)&&(y=O?0:u.length-1),y<0&&(y=u.length+y),y>=u.length){if(O)return-1;y=u.length-1}else if(y<0)if(O)y=0;else return-1;if(typeof d=="string"&&(d=a.from(d,N)),a.isBuffer(d))return d.length===0?-1:P(u,d,y,N,O);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(u,d,y):Uint8Array.prototype.lastIndexOf.call(u,d,y):P(u,[d],y,N,O);throw new TypeError("val must be string, number or Buffer")}b(E,"bidirectionalIndexOf");function P(u,d,y,N,O){let q=1,F=u.length,_e=d.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(u.length<2||d.length<2)return-1;q=2,F/=2,_e/=2,y/=2}function Me(Se,Re){return q===1?Se[Re]:Se.readUInt16BE(Re*q)}b(Me,"read");let Te;if(O){let Se=-1;for(Te=y;Te<F;Te++)if(Me(u,Te)===Me(d,Se===-1?0:Te-Se)){if(Se===-1&&(Se=Te),Te-Se+1===_e)return Se*q}else Se!==-1&&(Te-=Te-Se),Se=-1}else for(y+_e>F&&(y=F-_e),Te=y;Te>=0;Te--){let Se=!0;for(let Re=0;Re<_e;Re++)if(Me(u,Te+Re)!==Me(d,Re)){Se=!1;break}if(Se)return Te}return-1}b(P,"arrayIndexOf"),a.prototype.includes=b(function(u,d,y){return this.indexOf(u,d,y)!==-1},"includes"),a.prototype.indexOf=b(function(u,d,y){return E(this,u,d,y,!0)},"indexOf"),a.prototype.lastIndexOf=b(function(u,d,y){return E(this,u,d,y,!1)},"lastIndexOf");function I(u,d,y,N){y=Number(y)||0;let O=u.length-y;N?(N=Number(N),N>O&&(N=O)):N=O;let q=d.length;N>q/2&&(N=q/2);let F;for(F=0;F<N;++F){let _e=parseInt(d.substr(F*2,2),16);if(bn(_e))return F;u[y+F]=_e}return F}b(I,"hexWrite");function C(u,d,y,N){return vs(yn(d,u.length-y),u,y,N)}b(C,"utf8Write");function B(u,d,y,N){return vs(Ic(d),u,y,N)}b(B,"asciiWrite");function $(u,d,y,N){return vs(Yi(d),u,y,N)}b($,"base64Write");function H(u,d,y,N){return vs(Pc(d,u.length-y),u,y,N)}b(H,"ucs2Write"),a.prototype.write=b(function(u,d,y,N){if(d===void 0)N="utf8",y=this.length,d=0;else if(y===void 0&&typeof d=="string")N=d,y=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(y)?(y=y>>>0,N===void 0&&(N="utf8")):(N=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let O=this.length-d;if((y===void 0||y>O)&&(y=O),u.length>0&&(y<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let q=!1;for(;;)switch(N){case"hex":return I(this,u,d,y);case"utf8":case"utf-8":return C(this,u,d,y);case"ascii":case"latin1":case"binary":return B(this,u,d,y);case"base64":return $(this,u,d,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,u,d,y);default:if(q)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),q=!0}},"write"),a.prototype.toJSON=b(function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},"toJSON");function Z(u,d,y){return d===0&&y===u.length?e.fromByteArray(u):e.fromByteArray(u.slice(d,y))}b(Z,"base64Slice");function k(u,d,y){y=Math.min(u.length,y);let N=[],O=d;for(;O<y;){let q=u[O],F=null,_e=q>239?4:q>223?3:q>191?2:1;if(O+_e<=y){let Me,Te,Se,Re;switch(_e){case 1:q<128&&(F=q);break;case 2:Me=u[O+1],(Me&192)===128&&(Re=(q&31)<<6|Me&63,Re>127&&(F=Re));break;case 3:Me=u[O+1],Te=u[O+2],(Me&192)===128&&(Te&192)===128&&(Re=(q&15)<<12|(Me&63)<<6|Te&63,Re>2047&&(Re<55296||Re>57343)&&(F=Re));break;case 4:Me=u[O+1],Te=u[O+2],Se=u[O+3],(Me&192)===128&&(Te&192)===128&&(Se&192)===128&&(Re=(q&15)<<18|(Me&63)<<12|(Te&63)<<6|Se&63,Re>65535&&Re<1114112&&(F=Re))}}F===null?(F=65533,_e=1):F>65535&&(F-=65536,N.push(F>>>10&1023|55296),F=56320|F&1023),N.push(F),O+=_e}return ee(N)}b(k,"utf8Slice");var Q=4096;function ee(u){let d=u.length;if(d<=Q)return String.fromCharCode.apply(String,u);let y="",N=0;for(;N<d;)y+=String.fromCharCode.apply(String,u.slice(N,N+=Q));return y}b(ee,"decodeCodePointsArray");function ae(u,d,y){let N="";y=Math.min(u.length,y);for(let O=d;O<y;++O)N+=String.fromCharCode(u[O]&127);return N}b(ae,"asciiSlice");function ge(u,d,y){let N="";y=Math.min(u.length,y);for(let O=d;O<y;++O)N+=String.fromCharCode(u[O]);return N}b(ge,"latin1Slice");function be(u,d,y){let N=u.length;(!d||d<0)&&(d=0),(!y||y<0||y>N)&&(y=N);let O="";for(let q=d;q<y;++q)O+=gy[u[q]];return O}b(be,"hexSlice");function Be(u,d,y){let N=u.slice(d,y),O="";for(let q=0;q<N.length-1;q+=2)O+=String.fromCharCode(N[q]+N[q+1]*256);return O}b(Be,"utf16leSlice"),a.prototype.slice=b(function(u,d){let y=this.length;u=~~u,d=d===void 0?y:~~d,u<0?(u+=y,u<0&&(u=0)):u>y&&(u=y),d<0?(d+=y,d<0&&(d=0)):d>y&&(d=y),d<u&&(d=u);let N=this.subarray(u,d);return Object.setPrototypeOf(N,a.prototype),N},"slice");function we(u,d,y){if(u%1!==0||u<0)throw new RangeError("offset is not uint");if(u+d>y)throw new RangeError("Trying to access beyond buffer length")}b(we,"checkOffset"),a.prototype.readUintLE=a.prototype.readUIntLE=b(function(u,d,y){u=u>>>0,d=d>>>0,y||we(u,d,this.length);let N=this[u],O=1,q=0;for(;++q<d&&(O*=256);)N+=this[u+q]*O;return N},"readUIntLE"),a.prototype.readUintBE=a.prototype.readUIntBE=b(function(u,d,y){u=u>>>0,d=d>>>0,y||we(u,d,this.length);let N=this[u+--d],O=1;for(;d>0&&(O*=256);)N+=this[u+--d]*O;return N},"readUIntBE"),a.prototype.readUint8=a.prototype.readUInt8=b(function(u,d){return u=u>>>0,d||we(u,1,this.length),this[u]},"readUInt8"),a.prototype.readUint16LE=a.prototype.readUInt16LE=b(function(u,d){return u=u>>>0,d||we(u,2,this.length),this[u]|this[u+1]<<8},"readUInt16LE"),a.prototype.readUint16BE=a.prototype.readUInt16BE=b(function(u,d){return u=u>>>0,d||we(u,2,this.length),this[u]<<8|this[u+1]},"readUInt16BE"),a.prototype.readUint32LE=a.prototype.readUInt32LE=b(function(u,d){return u=u>>>0,d||we(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},"readUInt32LE"),a.prototype.readUint32BE=a.prototype.readUInt32BE=b(function(u,d){return u=u>>>0,d||we(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},"readUInt32BE"),a.prototype.readBigUInt64LE=It(b(function(u){u=u>>>0,sr(u,"offset");let d=this[u],y=this[u+7];(d===void 0||y===void 0)&&Lr(u,this.length-8);let N=d+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,O=this[++u]+this[++u]*2**8+this[++u]*2**16+y*2**24;return BigInt(N)+(BigInt(O)<<BigInt(32))},"readBigUInt64LE")),a.prototype.readBigUInt64BE=It(b(function(u){u=u>>>0,sr(u,"offset");let d=this[u],y=this[u+7];(d===void 0||y===void 0)&&Lr(u,this.length-8);let N=d*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],O=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+y;return(BigInt(N)<<BigInt(32))+BigInt(O)},"readBigUInt64BE")),a.prototype.readIntLE=b(function(u,d,y){u=u>>>0,d=d>>>0,y||we(u,d,this.length);let N=this[u],O=1,q=0;for(;++q<d&&(O*=256);)N+=this[u+q]*O;return O*=128,N>=O&&(N-=Math.pow(2,8*d)),N},"readIntLE"),a.prototype.readIntBE=b(function(u,d,y){u=u>>>0,d=d>>>0,y||we(u,d,this.length);let N=d,O=1,q=this[u+--N];for(;N>0&&(O*=256);)q+=this[u+--N]*O;return O*=128,q>=O&&(q-=Math.pow(2,8*d)),q},"readIntBE"),a.prototype.readInt8=b(function(u,d){return u=u>>>0,d||we(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},"readInt8"),a.prototype.readInt16LE=b(function(u,d){u=u>>>0,d||we(u,2,this.length);let y=this[u]|this[u+1]<<8;return y&32768?y|4294901760:y},"readInt16LE"),a.prototype.readInt16BE=b(function(u,d){u=u>>>0,d||we(u,2,this.length);let y=this[u+1]|this[u]<<8;return y&32768?y|4294901760:y},"readInt16BE"),a.prototype.readInt32LE=b(function(u,d){return u=u>>>0,d||we(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},"readInt32LE"),a.prototype.readInt32BE=b(function(u,d){return u=u>>>0,d||we(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},"readInt32BE"),a.prototype.readBigInt64LE=It(b(function(u){u=u>>>0,sr(u,"offset");let d=this[u],y=this[u+7];(d===void 0||y===void 0)&&Lr(u,this.length-8);let N=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(y<<24);return(BigInt(N)<<BigInt(32))+BigInt(d+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)},"readBigInt64LE")),a.prototype.readBigInt64BE=It(b(function(u){u=u>>>0,sr(u,"offset");let d=this[u],y=this[u+7];(d===void 0||y===void 0)&&Lr(u,this.length-8);let N=(d<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(N)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+y)},"readBigInt64BE")),a.prototype.readFloatLE=b(function(u,d){return u=u>>>0,d||we(u,4,this.length),t.read(this,u,!0,23,4)},"readFloatLE"),a.prototype.readFloatBE=b(function(u,d){return u=u>>>0,d||we(u,4,this.length),t.read(this,u,!1,23,4)},"readFloatBE"),a.prototype.readDoubleLE=b(function(u,d){return u=u>>>0,d||we(u,8,this.length),t.read(this,u,!0,52,8)},"readDoubleLE"),a.prototype.readDoubleBE=b(function(u,d){return u=u>>>0,d||we(u,8,this.length),t.read(this,u,!1,52,8)},"readDoubleBE");function Ne(u,d,y,N,O,q){if(!a.isBuffer(u))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>O||d<q)throw new RangeError('"value" argument is out of bounds');if(y+N>u.length)throw new RangeError("Index out of range")}b(Ne,"checkInt"),a.prototype.writeUintLE=a.prototype.writeUIntLE=b(function(u,d,y,N){if(u=+u,d=d>>>0,y=y>>>0,!N){let F=Math.pow(2,8*y)-1;Ne(this,u,d,y,F,0)}let O=1,q=0;for(this[d]=u&255;++q<y&&(O*=256);)this[d+q]=u/O&255;return d+y},"writeUIntLE"),a.prototype.writeUintBE=a.prototype.writeUIntBE=b(function(u,d,y,N){if(u=+u,d=d>>>0,y=y>>>0,!N){let F=Math.pow(2,8*y)-1;Ne(this,u,d,y,F,0)}let O=y-1,q=1;for(this[d+O]=u&255;--O>=0&&(q*=256);)this[d+O]=u/q&255;return d+y},"writeUIntBE"),a.prototype.writeUint8=a.prototype.writeUInt8=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,1,255,0),this[d]=u&255,d+1},"writeUInt8"),a.prototype.writeUint16LE=a.prototype.writeUInt16LE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,2,65535,0),this[d]=u&255,this[d+1]=u>>>8,d+2},"writeUInt16LE"),a.prototype.writeUint16BE=a.prototype.writeUInt16BE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,2,65535,0),this[d]=u>>>8,this[d+1]=u&255,d+2},"writeUInt16BE"),a.prototype.writeUint32LE=a.prototype.writeUInt32LE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,4,4294967295,0),this[d+3]=u>>>24,this[d+2]=u>>>16,this[d+1]=u>>>8,this[d]=u&255,d+4},"writeUInt32LE"),a.prototype.writeUint32BE=a.prototype.writeUInt32BE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,4,4294967295,0),this[d]=u>>>24,this[d+1]=u>>>16,this[d+2]=u>>>8,this[d+3]=u&255,d+4},"writeUInt32BE");function rr(u,d,y,N,O){Ji(d,N,O,u,y,7);let q=Number(d&BigInt(4294967295));u[y++]=q,q=q>>8,u[y++]=q,q=q>>8,u[y++]=q,q=q>>8,u[y++]=q;let F=Number(d>>BigInt(32)&BigInt(4294967295));return u[y++]=F,F=F>>8,u[y++]=F,F=F>>8,u[y++]=F,F=F>>8,u[y++]=F,y}b(rr,"wrtBigUInt64LE");function ys(u,d,y,N,O){Ji(d,N,O,u,y,7);let q=Number(d&BigInt(4294967295));u[y+7]=q,q=q>>8,u[y+6]=q,q=q>>8,u[y+5]=q,q=q>>8,u[y+4]=q;let F=Number(d>>BigInt(32)&BigInt(4294967295));return u[y+3]=F,F=F>>8,u[y+2]=F,F=F>>8,u[y+1]=F,F=F>>8,u[y]=F,y+8}b(ys,"wrtBigUInt64BE"),a.prototype.writeBigUInt64LE=It(b(function(u,d=0){return rr(this,u,d,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64LE")),a.prototype.writeBigUInt64BE=It(b(function(u,d=0){return ys(this,u,d,BigInt(0),BigInt("0xffffffffffffffff"))},"writeBigUInt64BE")),a.prototype.writeIntLE=b(function(u,d,y,N){if(u=+u,d=d>>>0,!N){let _e=Math.pow(2,8*y-1);Ne(this,u,d,y,_e-1,-_e)}let O=0,q=1,F=0;for(this[d]=u&255;++O<y&&(q*=256);)u<0&&F===0&&this[d+O-1]!==0&&(F=1),this[d+O]=(u/q>>0)-F&255;return d+y},"writeIntLE"),a.prototype.writeIntBE=b(function(u,d,y,N){if(u=+u,d=d>>>0,!N){let _e=Math.pow(2,8*y-1);Ne(this,u,d,y,_e-1,-_e)}let O=y-1,q=1,F=0;for(this[d+O]=u&255;--O>=0&&(q*=256);)u<0&&F===0&&this[d+O+1]!==0&&(F=1),this[d+O]=(u/q>>0)-F&255;return d+y},"writeIntBE"),a.prototype.writeInt8=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,1,127,-128),u<0&&(u=255+u+1),this[d]=u&255,d+1},"writeInt8"),a.prototype.writeInt16LE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,2,32767,-32768),this[d]=u&255,this[d+1]=u>>>8,d+2},"writeInt16LE"),a.prototype.writeInt16BE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,2,32767,-32768),this[d]=u>>>8,this[d+1]=u&255,d+2},"writeInt16BE"),a.prototype.writeInt32LE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,4,2147483647,-2147483648),this[d]=u&255,this[d+1]=u>>>8,this[d+2]=u>>>16,this[d+3]=u>>>24,d+4},"writeInt32LE"),a.prototype.writeInt32BE=b(function(u,d,y){return u=+u,d=d>>>0,y||Ne(this,u,d,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[d]=u>>>24,this[d+1]=u>>>16,this[d+2]=u>>>8,this[d+3]=u&255,d+4},"writeInt32BE"),a.prototype.writeBigInt64LE=It(b(function(u,d=0){return rr(this,u,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64LE")),a.prototype.writeBigInt64BE=It(b(function(u,d=0){return ys(this,u,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))},"writeBigInt64BE"));function bs(u,d,y,N,O,q){if(y+N>u.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("Index out of range")}b(bs,"checkIEEE754");function Hi(u,d,y,N,O){return d=+d,y=y>>>0,O||bs(u,d,y,4,34028234663852886e22,-34028234663852886e22),t.write(u,d,y,N,23,4),y+4}b(Hi,"writeFloat"),a.prototype.writeFloatLE=b(function(u,d,y){return Hi(this,u,d,!0,y)},"writeFloatLE"),a.prototype.writeFloatBE=b(function(u,d,y){return Hi(this,u,d,!1,y)},"writeFloatBE");function Zi(u,d,y,N,O){return d=+d,y=y>>>0,O||bs(u,d,y,8,17976931348623157e292,-17976931348623157e292),t.write(u,d,y,N,52,8),y+8}b(Zi,"writeDouble"),a.prototype.writeDoubleLE=b(function(u,d,y){return Zi(this,u,d,!0,y)},"writeDoubleLE"),a.prototype.writeDoubleBE=b(function(u,d,y){return Zi(this,u,d,!1,y)},"writeDoubleBE"),a.prototype.copy=b(function(u,d,y,N){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(y||(y=0),!N&&N!==0&&(N=this.length),d>=u.length&&(d=u.length),d||(d=0),N>0&&N<y&&(N=y),N===y||u.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),u.length-d<N-y&&(N=u.length-d+y);let O=N-y;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,y,N):Uint8Array.prototype.set.call(u,this.subarray(y,N),d),O},"copy"),a.prototype.fill=b(function(u,d,y,N){if(typeof u=="string"){if(typeof d=="string"?(N=d,d=0,y=this.length):typeof y=="string"&&(N=y,y=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!a.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(u.length===1){let q=u.charCodeAt(0);(N==="utf8"&&q<128||N==="latin1")&&(u=q)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(d<0||this.length<d||this.length<y)throw new RangeError("Out of range index");if(y<=d)return this;d=d>>>0,y=y===void 0?this.length:y>>>0,u||(u=0);let O;if(typeof u=="number")for(O=d;O<y;++O)this[O]=u;else{let q=a.isBuffer(u)?u:a.from(u,N),F=q.length;if(F===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(O=0;O<y-d;++O)this[O+d]=q[O%F]}return this},"fill");var Rr={};function gn(u,d,y){var N;Rr[u]=(N=class extends y{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${u}]`,this.stack,delete this.name}get code(){return u}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${u}]: ${this.message}`}},b(N,"NodeError"),N)}b(gn,"E"),gn("ERR_BUFFER_OUT_OF_BOUNDS",function(u){return u?`${u} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gn("ERR_INVALID_ARG_TYPE",function(u,d){return`The "${u}" argument must be of type number. Received type ${typeof d}`},TypeError),gn("ERR_OUT_OF_RANGE",function(u,d,y){let N=`The value of "${u}" is out of range.`,O=y;return Number.isInteger(y)&&Math.abs(y)>2**32?O=Xi(String(y)):typeof y=="bigint"&&(O=String(y),(y>BigInt(2)**BigInt(32)||y<-(BigInt(2)**BigInt(32)))&&(O=Xi(O)),O+="n"),N+=` It must be ${d}. Received ${O}`,N},RangeError);function Xi(u){let d="",y=u.length,N=u[0]==="-"?1:0;for(;y>=N+4;y-=3)d=`_${u.slice(y-3,y)}${d}`;return`${u.slice(0,y)}${d}`}b(Xi,"addNumericalSeparator");function Nc(u,d,y){sr(d,"offset"),(u[d]===void 0||u[d+y]===void 0)&&Lr(d,u.length-(y+1))}b(Nc,"checkBounds");function Ji(u,d,y,N,O,q){if(u>y||u<d){let F=typeof d=="bigint"?"n":"",_e;throw q>3?d===0||d===BigInt(0)?_e=`>= 0${F} and < 2${F} ** ${(q+1)*8}${F}`:_e=`>= -(2${F} ** ${(q+1)*8-1}${F}) and < 2 ** ${(q+1)*8-1}${F}`:_e=`>= ${d}${F} and <= ${y}${F}`,new Rr.ERR_OUT_OF_RANGE("value",_e,u)}Nc(N,O,q)}b(Ji,"checkIntBI");function sr(u,d){if(typeof u!="number")throw new Rr.ERR_INVALID_ARG_TYPE(d,"number",u)}b(sr,"validateNumber");function Lr(u,d,y){throw Math.floor(u)!==u?(sr(u,y),new Rr.ERR_OUT_OF_RANGE(y||"offset","an integer",u)):d<0?new Rr.ERR_BUFFER_OUT_OF_BOUNDS:new Rr.ERR_OUT_OF_RANGE(y||"offset",`>= ${y?1:0} and <= ${d}`,u)}b(Lr,"boundsError");var my=/[^+/0-9A-Za-z-_]/g;function Ac(u){if(u=u.split("=")[0],u=u.trim().replace(my,""),u.length<2)return"";for(;u.length%4!==0;)u=u+"=";return u}b(Ac,"base64clean");function yn(u,d){d=d||1/0;let y,N=u.length,O=null,q=[];for(let F=0;F<N;++F){if(y=u.charCodeAt(F),y>55295&&y<57344){if(!O){if(y>56319){(d-=3)>-1&&q.push(239,191,189);continue}else if(F+1===N){(d-=3)>-1&&q.push(239,191,189);continue}O=y;continue}if(y<56320){(d-=3)>-1&&q.push(239,191,189),O=y;continue}y=(O-55296<<10|y-56320)+65536}else O&&(d-=3)>-1&&q.push(239,191,189);if(O=null,y<128){if((d-=1)<0)break;q.push(y)}else if(y<2048){if((d-=2)<0)break;q.push(y>>6|192,y&63|128)}else if(y<65536){if((d-=3)<0)break;q.push(y>>12|224,y>>6&63|128,y&63|128)}else if(y<1114112){if((d-=4)<0)break;q.push(y>>18|240,y>>12&63|128,y>>6&63|128,y&63|128)}else throw new Error("Invalid code point")}return q}b(yn,"utf8ToBytes");function Ic(u){let d=[];for(let y=0;y<u.length;++y)d.push(u.charCodeAt(y)&255);return d}b(Ic,"asciiToBytes");function Pc(u,d){let y,N,O,q=[];for(let F=0;F<u.length&&!((d-=2)<0);++F)y=u.charCodeAt(F),N=y>>8,O=y%256,q.push(O),q.push(N);return q}b(Pc,"utf16leToBytes");function Yi(u){return e.toByteArray(Ac(u))}b(Yi,"base64ToBytes");function vs(u,d,y,N){let O;for(O=0;O<N&&!(O+y>=d.length||O>=u.length);++O)d[O+y]=u[O];return O}b(vs,"blitBuffer");function pt(u,d){return u instanceof d||u!=null&&u.constructor!=null&&u.constructor.name!=null&&u.constructor.name===d.name}b(pt,"isInstance");function bn(u){return u!==u}b(bn,"numberIsNaN");var gy=function(){let u="0123456789abcdef",d=new Array(256);for(let y=0;y<16;++y){let N=y*16;for(let O=0;O<16;++O)d[N+O]=u[y]+u[O]}return d}();function It(u){return typeof BigInt>"u"?Oc:u}b(It,"defineBigIntMethod");function Oc(){throw new Error("BigInt not supported")}b(Oc,"BufferBigIntNotDefined")}),wn,no,Ly,Fe,ie,he,te=Ze(()=>{"use strict";wn=globalThis,no=globalThis.setImmediate??(r=>setTimeout(r,0)),Ly=globalThis.clearImmediate??(r=>clearTimeout(r)),Fe=globalThis.crypto??{},Fe.subtle??(Fe.subtle={}),ie=typeof globalThis.Buffer=="function"&&typeof globalThis.Buffer.allocUnsafe=="function"?globalThis.Buffer:Ry().Buffer,he=globalThis.process??{},he.env??(he.env={});try{he.nextTick(()=>{})}catch{let r=Promise.resolve();he.nextTick=r.then.bind(r)}}),nr=de((r,e)=>{"use strict";te();var t=typeof Reflect=="object"?Reflect:null,s=t&&typeof t.apply=="function"?t.apply:b(function(E,P,I){return Function.prototype.apply.call(E,P,I)},"ReflectApply"),n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=b(function(E){return Object.getOwnPropertyNames(E).concat(Object.getOwnPropertySymbols(E))},"ReflectOwnKeys"):n=b(function(E){return Object.getOwnPropertyNames(E)},"ReflectOwnKeys");function i(E){console&&console.warn&&console.warn(E)}b(i,"ProcessEmitWarning");var o=Number.isNaN||b(function(E){return E!==E},"NumberIsNaN");function a(){a.init.call(this)}b(a,"EventEmitter"),e.exports=a,e.exports.once=x,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function h(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}b(h,"checkListener"),Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:b(function(){return c},"get"),set:b(function(E){if(typeof E!="number"||E<0||o(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");c=E},"set")}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=b(function(E){if(typeof E!="number"||E<0||o(E))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+E+".");return this._maxListeners=E,this},"setMaxListeners");function l(E){return E._maxListeners===void 0?a.defaultMaxListeners:E._maxListeners}b(l,"_getMaxListeners"),a.prototype.getMaxListeners=b(function(){return l(this)},"getMaxListeners"),a.prototype.emit=b(function(E){for(var P=[],I=1;I<arguments.length;I++)P.push(arguments[I]);var C=E==="error",B=this._events;if(B!==void 0)C=C&&B.error===void 0;else if(!C)return!1;if(C){var $;if(P.length>0&&($=P[0]),$ instanceof Error)throw $;var H=new Error("Unhandled error."+($?" ("+$.message+")":""));throw H.context=$,H}var Z=B[E];if(Z===void 0)return!1;if(typeof Z=="function")s(Z,this,P);else for(var k=Z.length,Q=w(Z,k),I=0;I<k;++I)s(Q[I],this,P);return!0},"emit");function p(E,P,I,C){var B,$,H;if(h(I),$=E._events,$===void 0?($=E._events=Object.create(null),E._eventsCount=0):($.newListener!==void 0&&(E.emit("newListener",P,I.listener?I.listener:I),$=E._events),H=$[P]),H===void 0)H=$[P]=I,++E._eventsCount;else if(typeof H=="function"?H=$[P]=C?[I,H]:[H,I]:C?H.unshift(I):H.push(I),B=l(E),B>0&&H.length>B&&!H.warned){H.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(P)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=E,Z.type=P,Z.count=H.length,i(Z)}return E}b(p,"_addListener"),a.prototype.addListener=b(function(E,P){return p(this,E,P,!1)},"addListener"),a.prototype.on=a.prototype.addListener,a.prototype.prependListener=b(function(E,P){return p(this,E,P,!0)},"prependListener");function g(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}b(g,"onceWrapper");function v(E,P,I){var C={fired:!1,wrapFn:void 0,target:E,type:P,listener:I},B=g.bind(C);return B.listener=I,C.wrapFn=B,B}b(v,"_onceWrap"),a.prototype.once=b(function(E,P){return h(P),this.on(E,v(this,E,P)),this},"once"),a.prototype.prependOnceListener=b(function(E,P){return h(P),this.prependListener(E,v(this,E,P)),this},"prependOnceListener"),a.prototype.removeListener=b(function(E,P){var I,C,B,$,H;if(h(P),C=this._events,C===void 0)return this;if(I=C[E],I===void 0)return this;if(I===P||I.listener===P)--this._eventsCount===0?this._events=Object.create(null):(delete C[E],C.removeListener&&this.emit("removeListener",E,I.listener||P));else if(typeof I!="function"){for(B=-1,$=I.length-1;$>=0;$--)if(I[$]===P||I[$].listener===P){H=I[$].listener,B=$;break}if(B<0)return this;B===0?I.shift():_(I,B),I.length===1&&(C[E]=I[0]),C.removeListener!==void 0&&this.emit("removeListener",E,H||P)}return this},"removeListener"),a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=b(function(E){var P,I,C;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[E]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[E]),this;if(arguments.length===0){var B=Object.keys(I),$;for(C=0;C<B.length;++C)$=B[C],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(P=I[E],typeof P=="function")this.removeListener(E,P);else if(P!==void 0)for(C=P.length-1;C>=0;C--)this.removeListener(E,P[C]);return this},"removeAllListeners");function m(E,P,I){var C=E._events;if(C===void 0)return[];var B=C[P];return B===void 0?[]:typeof B=="function"?I?[B.listener||B]:[B]:I?S(B):w(B,B.length)}b(m,"_listeners"),a.prototype.listeners=b(function(E){return m(this,E,!0)},"listeners"),a.prototype.rawListeners=b(function(E){return m(this,E,!1)},"rawListeners"),a.listenerCount=function(E,P){return typeof E.listenerCount=="function"?E.listenerCount(P):f.call(E,P)},a.prototype.listenerCount=f;function f(E){var P=this._events;if(P!==void 0){var I=P[E];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}b(f,"listenerCount"),a.prototype.eventNames=b(function(){return this._eventsCount>0?n(this._events):[]},"eventNames");function w(E,P){for(var I=new Array(P),C=0;C<P;++C)I[C]=E[C];return I}b(w,"arrayClone");function _(E,P){for(;P+1<E.length;P++)E[P]=E[P+1];E.pop()}b(_,"spliceOne");function S(E){for(var P=new Array(E.length),I=0;I<P.length;++I)P[I]=E[I].listener||E[I];return P}b(S,"unwrapListeners");function x(E,P){return new Promise(function(I,C){function B(H){E.removeListener(P,$),C(H)}b(B,"errorListener");function $(){typeof E.removeListener=="function"&&E.removeListener("error",B),I([].slice.call(arguments))}b($,"resolver"),L(E,P,$,{once:!0}),P!=="error"&&R(E,B,{once:!0})})}b(x,"once");function R(E,P,I){typeof E.on=="function"&&L(E,"error",P,I)}b(R,"addErrorHandlerIfEventEmitter");function L(E,P,I,C){if(typeof E.on=="function")C.once?E.once(P,I):E.on(P,I);else if(typeof E.addEventListener=="function")E.addEventListener(P,b(function B($){C.once&&E.removeEventListener(P,B),I($)},"wrapListener"));else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}b(L,"eventTargetAgnosticAddListener")}),Ss={};mt(Ss,{default:()=>Mc});var Mc,_n=Ze(()=>{"use strict";te(),Mc={}});function _s(r){let e=1779033703,t=3144134277,s=1013904242,n=2773480762,i=1359893119,o=2600822924,a=528734635,c=1541459225,h=0,l=0,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],g=b((S,x)=>S>>>x|S<<32-x,"rrot"),v=new Uint32Array(64),m=new Uint8Array(64),f=b(()=>{for(let B=0,$=0;B<16;B++,$+=4)v[B]=m[$]<<24|m[$+1]<<16|m[$+2]<<8|m[$+3];for(let B=16;B<64;B++){let $=g(v[B-15],7)^g(v[B-15],18)^v[B-15]>>>3,H=g(v[B-2],17)^g(v[B-2],19)^v[B-2]>>>10;v[B]=v[B-16]+$+v[B-7]+H|0}let S=e,x=t,R=s,L=n,E=i,P=o,I=a,C=c;for(let B=0;B<64;B++){let $=g(E,6)^g(E,11)^g(E,25),H=E&P^~E&I,Z=C+$+H+p[B]+v[B]|0,k=g(S,2)^g(S,13)^g(S,22),Q=S&x^S&R^x&R,ee=k+Q|0;C=I,I=P,P=E,E=L+Z|0,L=R,R=x,x=S,S=Z+ee|0}e=e+S|0,t=t+x|0,s=s+R|0,n=n+L|0,i=i+E|0,o=o+P|0,a=a+I|0,c=c+C|0,l=0},"process"),w=b(S=>{typeof S=="string"&&(S=new TextEncoder().encode(S));for(let x=0;x<S.length;x++)m[l++]=S[x],l===64&&f();h+=S.length},"add"),_=b(()=>{if(m[l++]=128,l==64&&f(),l+8>64){for(;l<64;)m[l++]=0;f()}for(;l<58;)m[l++]=0;let S=h*8;m[l++]=S/1099511627776&255,m[l++]=S/4294967296&255,m[l++]=S>>>24,m[l++]=S>>>16&255,m[l++]=S>>>8&255,m[l++]=S&255,f();let x=new Uint8Array(32);return x[0]=e>>>24,x[1]=e>>>16&255,x[2]=e>>>8&255,x[3]=e&255,x[4]=t>>>24,x[5]=t>>>16&255,x[6]=t>>>8&255,x[7]=t&255,x[8]=s>>>24,x[9]=s>>>16&255,x[10]=s>>>8&255,x[11]=s&255,x[12]=n>>>24,x[13]=n>>>16&255,x[14]=n>>>8&255,x[15]=n&255,x[16]=i>>>24,x[17]=i>>>16&255,x[18]=i>>>8&255,x[19]=i&255,x[20]=o>>>24,x[21]=o>>>16&255,x[22]=o>>>8&255,x[23]=o&255,x[24]=a>>>24,x[25]=a>>>16&255,x[26]=a>>>8&255,x[27]=a&255,x[28]=c>>>24,x[29]=c>>>16&255,x[30]=c>>>8&255,x[31]=c&255,x},"digest");return r===void 0?{add:w,digest:_}:(w(r),_())}var ky=Ze(()=>{"use strict";te(),b(_s,"sha256")}),Pt,ro,$y=Ze(()=>{"use strict";te(),Pt=class it{constructor(){oe(this,"_dataLength",0),oe(this,"_bufferLength",0),oe(this,"_state",new Int32Array(4)),oe(this,"_buffer",new ArrayBuffer(68)),oe(this,"_buffer8"),oe(this,"_buffer32"),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashByteArray(e,t=!1){return this.onePassHasher.start().appendByteArray(e).end(t)}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t=it.hexChars,s=it.hexOut,n,i,o,a;for(a=0;a<4;a+=1)for(i=a*8,n=e[a],o=0;o<8;o+=2)s[i+1+o]=t.charAt(n&15),n>>>=4,s[i+0+o]=t.charAt(n&15),n>>>=4;return s.join("")}static _md5cycle(e,t){let s=e[0],n=e[1],i=e[2],o=e[3];s+=(n&i|~n&o)+t[0]-680876936|0,s=(s<<7|s>>>25)+n|0,o+=(s&n|~s&i)+t[1]-389564586|0,o=(o<<12|o>>>20)+s|0,i+=(o&s|~o&n)+t[2]+606105819|0,i=(i<<17|i>>>15)+o|0,n+=(i&o|~i&s)+t[3]-1044525330|0,n=(n<<22|n>>>10)+i|0,s+=(n&i|~n&o)+t[4]-176418897|0,s=(s<<7|s>>>25)+n|0,o+=(s&n|~s&i)+t[5]+1200080426|0,o=(o<<12|o>>>20)+s|0,i+=(o&s|~o&n)+t[6]-1473231341|0,i=(i<<17|i>>>15)+o|0,n+=(i&o|~i&s)+t[7]-45705983|0,n=(n<<22|n>>>10)+i|0,s+=(n&i|~n&o)+t[8]+1770035416|0,s=(s<<7|s>>>25)+n|0,o+=(s&n|~s&i)+t[9]-1958414417|0,o=(o<<12|o>>>20)+s|0,i+=(o&s|~o&n)+t[10]-42063|0,i=(i<<17|i>>>15)+o|0,n+=(i&o|~i&s)+t[11]-1990404162|0,n=(n<<22|n>>>10)+i|0,s+=(n&i|~n&o)+t[12]+1804603682|0,s=(s<<7|s>>>25)+n|0,o+=(s&n|~s&i)+t[13]-40341101|0,o=(o<<12|o>>>20)+s|0,i+=(o&s|~o&n)+t[14]-1502002290|0,i=(i<<17|i>>>15)+o|0,n+=(i&o|~i&s)+t[15]+1236535329|0,n=(n<<22|n>>>10)+i|0,s+=(n&o|i&~o)+t[1]-165796510|0,s=(s<<5|s>>>27)+n|0,o+=(s&i|n&~i)+t[6]-1069501632|0,o=(o<<9|o>>>23)+s|0,i+=(o&n|s&~n)+t[11]+643717713|0,i=(i<<14|i>>>18)+o|0,n+=(i&s|o&~s)+t[0]-373897302|0,n=(n<<20|n>>>12)+i|0,s+=(n&o|i&~o)+t[5]-701558691|0,s=(s<<5|s>>>27)+n|0,o+=(s&i|n&~i)+t[10]+38016083|0,o=(o<<9|o>>>23)+s|0,i+=(o&n|s&~n)+t[15]-660478335|0,i=(i<<14|i>>>18)+o|0,n+=(i&s|o&~s)+t[4]-405537848|0,n=(n<<20|n>>>12)+i|0,s+=(n&o|i&~o)+t[9]+568446438|0,s=(s<<5|s>>>27)+n|0,o+=(s&i|n&~i)+t[14]-1019803690|0,o=(o<<9|o>>>23)+s|0,i+=(o&n|s&~n)+t[3]-187363961|0,i=(i<<14|i>>>18)+o|0,n+=(i&s|o&~s)+t[8]+1163531501|0,n=(n<<20|n>>>12)+i|0,s+=(n&o|i&~o)+t[13]-1444681467|0,s=(s<<5|s>>>27)+n|0,o+=(s&i|n&~i)+t[2]-51403784|0,o=(o<<9|o>>>23)+s|0,i+=(o&n|s&~n)+t[7]+1735328473|0,i=(i<<14|i>>>18)+o|0,n+=(i&s|o&~s)+t[12]-1926607734|0,n=(n<<20|n>>>12)+i|0,s+=(n^i^o)+t[5]-378558|0,s=(s<<4|s>>>28)+n|0,o+=(s^n^i)+t[8]-2022574463|0,o=(o<<11|o>>>21)+s|0,i+=(o^s^n)+t[11]+1839030562|0,i=(i<<16|i>>>16)+o|0,n+=(i^o^s)+t[14]-35309556|0,n=(n<<23|n>>>9)+i|0,s+=(n^i^o)+t[1]-1530992060|0,s=(s<<4|s>>>28)+n|0,o+=(s^n^i)+t[4]+1272893353|0,o=(o<<11|o>>>21)+s|0,i+=(o^s^n)+t[7]-155497632|0,i=(i<<16|i>>>16)+o|0,n+=(i^o^s)+t[10]-1094730640|0,n=(n<<23|n>>>9)+i|0,s+=(n^i^o)+t[13]+681279174|0,s=(s<<4|s>>>28)+n|0,o+=(s^n^i)+t[0]-358537222|0,o=(o<<11|o>>>21)+s|0,i+=(o^s^n)+t[3]-722521979|0,i=(i<<16|i>>>16)+o|0,n+=(i^o^s)+t[6]+76029189|0,n=(n<<23|n>>>9)+i|0,s+=(n^i^o)+t[9]-640364487|0,s=(s<<4|s>>>28)+n|0,o+=(s^n^i)+t[12]-421815835|0,o=(o<<11|o>>>21)+s|0,i+=(o^s^n)+t[15]+530742520|0,i=(i<<16|i>>>16)+o|0,n+=(i^o^s)+t[2]-995338651|0,n=(n<<23|n>>>9)+i|0,s+=(i^(n|~o))+t[0]-198630844|0,s=(s<<6|s>>>26)+n|0,o+=(n^(s|~i))+t[7]+1126891415|0,o=(o<<10|o>>>22)+s|0,i+=(s^(o|~n))+t[14]-1416354905|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~s))+t[5]-57434055|0,n=(n<<21|n>>>11)+i|0,s+=(i^(n|~o))+t[12]+1700485571|0,s=(s<<6|s>>>26)+n|0,o+=(n^(s|~i))+t[3]-1894986606|0,o=(o<<10|o>>>22)+s|0,i+=(s^(o|~n))+t[10]-1051523|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~s))+t[1]-2054922799|0,n=(n<<21|n>>>11)+i|0,s+=(i^(n|~o))+t[8]+1873313359|0,s=(s<<6|s>>>26)+n|0,o+=(n^(s|~i))+t[15]-30611744|0,o=(o<<10|o>>>22)+s|0,i+=(s^(o|~n))+t[6]-1560198380|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~s))+t[13]+1309151649|0,n=(n<<21|n>>>11)+i|0,s+=(i^(n|~o))+t[4]-145523070|0,s=(s<<6|s>>>26)+n|0,o+=(n^(s|~i))+t[11]-1120210379|0,o=(o<<10|o>>>22)+s|0,i+=(s^(o|~n))+t[2]+718787259|0,i=(i<<15|i>>>17)+o|0,n+=(o^(i|~s))+t[9]-343485551|0,n=(n<<21|n>>>11)+i|0,e[0]=s+e[0]|0,e[1]=n+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(it.stateIdentity),this}appendStr(e){let t=this._buffer8,s=this._buffer32,n=this._bufferLength,i,o;for(o=0;o<e.length;o+=1){if(i=e.charCodeAt(o),i<128)t[n++]=i;else if(i<2048)t[n++]=(i>>>6)+192,t[n++]=i&63|128;else if(i<55296||i>56319)t[n++]=(i>>>12)+224,t[n++]=i>>>6&63|128,t[n++]=i&63|128;else{if(i=(i-55296)*1024+(e.charCodeAt(++o)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");t[n++]=(i>>>18)+240,t[n++]=i>>>12&63|128,t[n++]=i>>>6&63|128,t[n++]=i&63|128}n>=64&&(this._dataLength+=64,it._md5cycle(this._state,s),n-=64,s[0]=s[16])}return this._bufferLength=n,this}appendAsciiStr(e){let t=this._buffer8,s=this._buffer32,n=this._bufferLength,i,o=0;for(;;){for(i=Math.min(e.length-o,64-n);i--;)t[n++]=e.charCodeAt(o++);if(n<64)break;this._dataLength+=64,it._md5cycle(this._state,s),n=0}return this._bufferLength=n,this}appendByteArray(e){let t=this._buffer8,s=this._buffer32,n=this._bufferLength,i,o=0;for(;;){for(i=Math.min(e.length-o,64-n);i--;)t[n++]=e[o++];if(n<64)break;this._dataLength+=64,it._md5cycle(this._state,s),n=0}return this._bufferLength=n,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t=e.buffer,s=e.state,n=this._state,i;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=s[0],n[1]=s[1],n[2]=s[2],n[3]=s[3],i=0;i<t.length;i+=1)this._buffer8[i]=t.charCodeAt(i)}end(e=!1){let t=this._bufferLength,s=this._buffer8,n=this._buffer32,i=(t>>2)+1;this._dataLength+=t;let o=this._dataLength*8;if(s[t]=128,s[t+1]=s[t+2]=s[t+3]=0,n.set(it.buffer32Identity.subarray(i),i),t>55&&(it._md5cycle(this._state,n),n.set(it.buffer32Identity)),o<=4294967295)n[14]=o;else{let a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;let c=parseInt(a[2],16),h=parseInt(a[1],16)||0;n[14]=c,n[15]=h}return it._md5cycle(this._state,n),e?this._state:it._hex(this._state)}},b(Pt,"Md5"),oe(Pt,"stateIdentity",new Int32Array([1732584193,-271733879,-1732584194,271733878])),oe(Pt,"buffer32Identity",new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),oe(Pt,"hexChars","0123456789abcdef"),oe(Pt,"hexOut",[]),oe(Pt,"onePassHasher",new Pt),ro=Pt}),io={};mt(io,{createHash:()=>Dc,createHmac:()=>jc,randomBytes:()=>qc});function qc(r){return Fe.getRandomValues(ie.alloc(r))}function Dc(r){if(r==="sha256")return{update:b(function(e){return{digest:b(function(){return ie.from(_s(e))},"digest")}},"update")};if(r==="md5")return{update:b(function(e){return{digest:b(function(){return typeof e=="string"?ro.hashStr(e):ro.hashByteArray(e)},"digest")}},"update")};throw new Error(`Hash type '${r}' not supported`)}function jc(r,e){if(r!=="sha256")throw new Error(`Only sha256 is supported (requested: '${r}')`);return{update:b(function(t){return{digest:b(function(){typeof e=="string"&&(e=new TextEncoder().encode(e)),typeof t=="string"&&(t=new TextEncoder().encode(t));let s=e.length;if(s>64)e=_s(e);else if(s<64){let c=new Uint8Array(64);c.set(e),e=c}let n=new Uint8Array(64),i=new Uint8Array(64);for(let c=0;c<64;c++)n[c]=54^e[c],i[c]=92^e[c];let o=new Uint8Array(t.length+64);o.set(n,0),o.set(t,64);let a=new Uint8Array(96);return a.set(i,0),a.set(_s(o),64),ie.from(_s(a))},"digest")}},"update")}}var Fc=Ze(()=>{"use strict";te(),ky(),$y(),b(qc,"randomBytes"),b(Dc,"createHash"),b(jc,"createHmac")}),Uc=de(r=>{"use strict";te(),r.parse=function(n,i){return new t(n,i).parse()};var e=class Qc{constructor(i,o){this.source=i,this.transform=o||s,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var i=this.source[this.position++];return i==="\\"?{value:this.source[this.position++],escaped:!0}:{value:i,escaped:!1}}record(i){this.recorded.push(i)}newEntry(i){var o;(this.recorded.length>0||i)&&(o=this.recorded.join(""),o==="NULL"&&!i&&(o=null),o!==null&&(o=this.transform(o)),this.entries.push(o),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var i=this.nextCharacter();if(i.value==="=")break}}parse(i){var o,a,c;for(this.consumeDimensions();!this.isEof();)if(o=this.nextCharacter(),o.value==="{"&&!c)this.dimension++,this.dimension>1&&(a=new Qc(this.source.substr(this.position-1),this.transform),this.entries.push(a.parse(!0)),this.position+=a.position-2);else if(o.value==="}"&&!c){if(this.dimension--,!this.dimension&&(this.newEntry(),i))return this.entries}else o.value==='"'&&!o.escaped?(c&&this.newEntry(!0),c=!c):o.value===","&&!c?this.newEntry():this.record(o.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};b(e,"ArrayParser");var t=e;function s(n){return n}b(s,"identity")}),Vc=de((r,e)=>{te();var t=Uc();e.exports={create:b(function(s,n){return{parse:b(function(){return t.parse(s,n)},"parse")}},"create")}}),By=de((r,e)=>{"use strict";te();var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,s=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,n=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,i=/^-?infinity$/;e.exports=b(function(l){if(i.test(l))return Number(l.replace("i","I"));var p=t.exec(l);if(!p)return o(l)||null;var g=!!p[8],v=parseInt(p[1],10);g&&(v=c(v));var m=parseInt(p[2],10)-1,f=p[3],w=parseInt(p[4],10),_=parseInt(p[5],10),S=parseInt(p[6],10),x=p[7];x=x?1e3*parseFloat(x):0;var R,L=a(l);return L!=null?(R=new Date(Date.UTC(v,m,f,w,_,S,x)),h(v)&&R.setUTCFullYear(v),L!==0&&R.setTime(R.getTime()-L)):(R=new Date(v,m,f,w,_,S,x),h(v)&&R.setFullYear(v)),R},"parseDate");function o(l){var p=s.exec(l);if(p){var g=parseInt(p[1],10),v=!!p[4];v&&(g=c(g));var m=parseInt(p[2],10)-1,f=p[3],w=new Date(g,m,f);return h(g)&&w.setFullYear(g),w}}b(o,"getDate");function a(l){if(l.endsWith("+00"))return 0;var p=n.exec(l.split(" ")[1]);if(p){var g=p[1];if(g==="Z")return 0;var v=g==="-"?-1:1,m=parseInt(p[2],10)*3600+parseInt(p[3]||0,10)*60+parseInt(p[4]||0,10);return m*v*1e3}}b(a,"timeZoneOffset");function c(l){return-(l-1)}b(c,"bcYearToNegativeYear");function h(l){return l>=0&&l<100}b(h,"is0To99")}),My=de((r,e)=>{te(),e.exports=s;var t=Object.prototype.hasOwnProperty;function s(n){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var a in o)t.call(o,a)&&(n[a]=o[a])}return n}b(s,"extend")}),qy=de((r,e)=>{"use strict";te();var t=My();e.exports=s;function s(S){if(!(this instanceof s))return new s(S);t(this,_(S))}b(s,"PostgresInterval");var n=["seconds","minutes","hours","days","months","years"];s.prototype.toPostgres=function(){var S=n.filter(this.hasOwnProperty,this);return this.milliseconds&&S.indexOf("seconds")<0&&S.push("seconds"),S.length===0?"0":S.map(function(x){var R=this[x]||0;return x==="seconds"&&this.milliseconds&&(R=(R+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),R+" "+x},this).join(" ")};var i={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},o=["years","months","days"],a=["hours","minutes","seconds"];s.prototype.toISOString=s.prototype.toISO=function(){var S=o.map(R,this).join(""),x=a.map(R,this).join("");return"P"+S+"T"+x;function R(L){var E=this[L]||0;return L==="seconds"&&this.milliseconds&&(E=(E+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),E+i[L]}};var c="([+-]?\\d+)",h=c+"\\s+years?",l=c+"\\s+mons?",p=c+"\\s+days?",g="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",v=new RegExp([h,l,p,g].map(function(S){return"("+S+")?"}).join("\\s*")),m={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},f=["hours","minutes","seconds","milliseconds"];function w(S){var x=S+"000000".slice(S.length);return parseInt(x,10)/1e3}b(w,"parseMilliseconds");function _(S){if(!S)return{};var x=v.exec(S),R=x[8]==="-";return Object.keys(m).reduce(function(L,E){var P=m[E],I=x[P];return!I||(I=E==="milliseconds"?w(I):parseInt(I,10),!I)||(R&&~f.indexOf(E)&&(I*=-1),L[E]=I),L},{})}b(_,"parse")}),Dy=de((r,e)=>{"use strict";te(),e.exports=b(function(t){if(/^\\x/.test(t))return new ie(t.substr(2),"hex");for(var s="",n=0;n<t.length;)if(t[n]!=="\\")s+=t[n],++n;else if(/[0-7]{3}/.test(t.substr(n+1,3)))s+=String.fromCharCode(parseInt(t.substr(n+1,3),8)),n+=4;else{for(var i=1;n+i<t.length&&t[n+i]==="\\";)i++;for(var o=0;o<Math.floor(i/2);++o)s+="\\";n+=Math.floor(i/2)*2}return new ie(s,"binary")},"parseBytea")}),jy=de((r,e)=>{te();var t=Uc(),s=Vc(),n=By(),i=qy(),o=Dy();function a(C){return b(function(B){return B===null?B:C(B)},"nullAllowed")}b(a,"allowNull");function c(C){return C===null?C:C==="TRUE"||C==="t"||C==="true"||C==="y"||C==="yes"||C==="on"||C==="1"}b(c,"parseBool");function h(C){return C?t.parse(C,c):null}b(h,"parseBoolArray");function l(C){return parseInt(C,10)}b(l,"parseBaseTenInt");function p(C){return C?t.parse(C,a(l)):null}b(p,"parseIntegerArray");function g(C){return C?t.parse(C,a(function(B){return R(B).trim()})):null}b(g,"parseBigIntegerArray");var v=b(function(C){if(!C)return null;var B=s.create(C,function($){return $!==null&&($=E($)),$});return B.parse()},"parsePointArray"),m=b(function(C){if(!C)return null;var B=s.create(C,function($){return $!==null&&($=parseFloat($)),$});return B.parse()},"parseFloatArray"),f=b(function(C){if(!C)return null;var B=s.create(C);return B.parse()},"parseStringArray"),w=b(function(C){if(!C)return null;var B=s.create(C,function($){return $!==null&&($=n($)),$});return B.parse()},"parseDateArray"),_=b(function(C){if(!C)return null;var B=s.create(C,function($){return $!==null&&($=i($)),$});return B.parse()},"parseIntervalArray"),S=b(function(C){return C?t.parse(C,a(o)):null},"parseByteAArray"),x=b(function(C){return parseInt(C,10)},"parseInteger"),R=b(function(C){var B=String(C);return/^\d+$/.test(B)?B:C},"parseBigInteger"),L=b(function(C){return C?t.parse(C,a(JSON.parse)):null},"parseJsonArray"),E=b(function(C){return C[0]!=="("?null:(C=C.substring(1,C.length-1).split(","),{x:parseFloat(C[0]),y:parseFloat(C[1])})},"parsePoint"),P=b(function(C){if(C[0]!=="<"&&C[1]!=="(")return null;for(var B="(",$="",H=!1,Z=2;Z<C.length-1;Z++){if(H||(B+=C[Z]),C[Z]===")"){H=!0;continue}else if(!H)continue;C[Z]!==","&&($+=C[Z])}var k=E(B);return k.radius=parseFloat($),k},"parseCircle"),I=b(function(C){C(20,R),C(21,x),C(23,x),C(26,x),C(700,parseFloat),C(701,parseFloat),C(16,c),C(1082,n),C(1114,n),C(1184,n),C(600,E),C(651,f),C(718,P),C(1e3,h),C(1001,S),C(1005,p),C(1007,p),C(1028,p),C(1016,g),C(1017,v),C(1021,m),C(1022,m),C(1231,m),C(1014,f),C(1015,f),C(1008,f),C(1009,f),C(1040,f),C(1041,f),C(1115,w),C(1182,w),C(1185,w),C(1186,i),C(1187,_),C(17,o),C(114,JSON.parse.bind(JSON)),C(3802,JSON.parse.bind(JSON)),C(199,L),C(3807,L),C(3907,f),C(2951,f),C(791,f),C(1183,f),C(1270,f)},"init");e.exports={init:I}}),Fy=de((r,e)=>{"use strict";te();var t=1e6;function s(n){var i=n.readInt32BE(0),o=n.readUInt32BE(4),a="";i<0&&(i=~i+(o===0),o=~o+1>>>0,a="-");var c="",h,l,p,g,v,m;{if(h=i%t,i=i/t>>>0,l=4294967296*h+o,o=l/t>>>0,p=""+(l-t*o),o===0&&i===0)return a+p+c;for(g="",v=6-p.length,m=0;m<v;m++)g+="0";c=g+p+c}{if(h=i%t,i=i/t>>>0,l=4294967296*h+o,o=l/t>>>0,p=""+(l-t*o),o===0&&i===0)return a+p+c;for(g="",v=6-p.length,m=0;m<v;m++)g+="0";c=g+p+c}{if(h=i%t,i=i/t>>>0,l=4294967296*h+o,o=l/t>>>0,p=""+(l-t*o),o===0&&i===0)return a+p+c;for(g="",v=6-p.length,m=0;m<v;m++)g+="0";c=g+p+c}return h=i%t,l=4294967296*h+o,p=""+l%t,a+p+c}b(s,"readInt8"),e.exports=s}),Uy=de((r,e)=>{te();var t=Fy(),s=b(function(f,w,_,S,x){_=_||0,S=S||!1,x=x||function(H,Z,k){return H*Math.pow(2,k)+Z};var R=_>>3,L=b(function(H){return S?~H&255:H},"inv"),E=255,P=8-_%8;w<P&&(E=255<<8-w&255,P=w),_&&(E=E>>_%8);var I=0;_%8+w>=8&&(I=x(0,L(f[R])&E,P));for(var C=w+_>>3,B=R+1;B<C;B++)I=x(I,L(f[B]),8);var $=(w+_)%8;return $>0&&(I=x(I,L(f[C])>>8-$,$)),I},"parseBits"),n=b(function(f,w,_){var S=Math.pow(2,_-1)-1,x=s(f,1),R=s(f,_,1);if(R===0)return 0;var L=1,E=b(function(I,C,B){I===0&&(I=1);for(var $=1;$<=B;$++)L/=2,(C&1<<B-$)>0&&(I+=L);return I},"parsePrecisionBits"),P=s(f,w,_+1,!1,E);return R==Math.pow(2,_+1)-1?P===0?x===0?1/0:-1/0:NaN:(x===0?1:-1)*Math.pow(2,R-S)*P},"parseFloatFromBits"),i=b(function(f){return s(f,1)==1?-1*(s(f,15,1,!0)+1):s(f,15,1)},"parseInt16"),o=b(function(f){return s(f,1)==1?-1*(s(f,31,1,!0)+1):s(f,31,1)},"parseInt32"),a=b(function(f){return n(f,23,8)},"parseFloat32"),c=b(function(f){return n(f,52,11)},"parseFloat64"),h=b(function(f){var w=s(f,16,32);if(w==49152)return NaN;for(var _=Math.pow(1e4,s(f,16,16)),S=0,x=[],R=s(f,16),L=0;L<R;L++)S+=s(f,16,64+16*L)*_,_/=1e4;var E=Math.pow(10,s(f,16,48));return(w===0?1:-1)*Math.round(S*E)/E},"parseNumeric"),l=b(function(f,w){var _=s(w,1),S=s(w,63,1),x=new Date((_===0?1:-1)*S/1e3+9466848e5);return f||x.setTime(x.getTime()+x.getTimezoneOffset()*6e4),x.usec=S%1e3,x.getMicroSeconds=function(){return this.usec},x.setMicroSeconds=function(R){this.usec=R},x.getUTCMicroSeconds=function(){return this.usec},x},"parseDate"),p=b(function(f){for(var w=s(f,32),_=s(f,32,32),S=s(f,32,64),x=96,R=[],L=0;L<w;L++)R[L]=s(f,32,x),x+=32,x+=32;var E=b(function(I){var C=s(f,32,x);if(x+=32,C==4294967295)return null;var B;if(I==23||I==20)return B=s(f,C*8,x),x+=C*8,B;if(I==25)return B=f.toString(this.encoding,x>>3,(x+=C<<3)>>3),B;console.log("ERROR: ElementType not implemented: "+I)},"parseElement"),P=b(function(I,C){var B=[],$;if(I.length>1){var H=I.shift();for($=0;$<H;$++)B[$]=P(I,C);I.unshift(H)}else for($=0;$<I[0];$++)B[$]=E(C);return B},"parse");return P(R,S)},"parseArray"),g=b(function(f){return f.toString("utf8")},"parseText"),v=b(function(f){return f===null?null:s(f,8)>0},"parseBool"),m=b(function(f){f(20,t),f(21,i),f(23,o),f(26,o),f(1700,h),f(700,a),f(701,c),f(16,v),f(1114,l.bind(null,!1)),f(1184,l.bind(null,!0)),f(1e3,p),f(1007,p),f(1016,p),f(1008,p),f(1009,p),f(25,g)},"init");e.exports={init:m}}),Qy=de((r,e)=>{te(),e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),Sn=de(r=>{te();var e=jy(),t=Uy(),s=Vc(),n=Qy();r.getTypeParser=a,r.setTypeParser=c,r.arrayParser=s,r.builtins=n;var i={text:{},binary:{}};function o(h){return String(h)}b(o,"noParse");function a(h,l){return l=l||"text",i[l]&&i[l][h]||o}b(a,"getTypeParser");function c(h,l,p){typeof l=="function"&&(p=l,l="text"),i[l][h]=p}b(c,"setTypeParser"),e.init(function(h,l){i.text[h]=l}),t.init(function(h,l){i.binary[h]=l})}),En=de((r,e)=>{"use strict";te(),e.exports={host:"localhost",user:he.platform==="win32"?he.env.USERNAME:he.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=Sn(),s=t.getTypeParser(20,"text"),n=t.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",function(i){t.setTypeParser(20,"text",i?t.getTypeParser(23,"text"):s),t.setTypeParser(1016,"text",i?t.getTypeParser(1007,"text"):n)})}),xn=de((r,e)=>{"use strict";te();var t=(Fc(),qe(io)),s=En();function n(m){var f=m.replace(/\\/g,"\\\\").replace(/"/g,'\\"');return'"'+f+'"'}b(n,"escapeElement");function i(m){for(var f="{",w=0;w<m.length;w++)w>0&&(f=f+","),m[w]===null||typeof m[w]>"u"?f=f+"NULL":Array.isArray(m[w])?f=f+i(m[w]):m[w]instanceof ie?f+="\\\\x"+m[w].toString("hex"):f+=n(o(m[w]));return f=f+"}",f}b(i,"arrayString");var o=b(function(m,f){if(m==null)return null;if(m instanceof ie)return m;if(ArrayBuffer.isView(m)){var w=ie.from(m.buffer,m.byteOffset,m.byteLength);return w.length===m.byteLength?w:w.slice(m.byteOffset,m.byteOffset+m.byteLength)}return m instanceof Date?s.parseInputDatesAsUTC?l(m):h(m):Array.isArray(m)?i(m):typeof m=="object"?a(m,f):m.toString()},"prepareValue");function a(m,f){if(m&&typeof m.toPostgres=="function"){if(f=f||[],f.indexOf(m)!==-1)throw new Error('circular reference detected while preparing "'+m+'" for query');return f.push(m),o(m.toPostgres(o),f)}return JSON.stringify(m)}b(a,"prepareObject");function c(m,f){for(m=""+m;m.length<f;)m="0"+m;return m}b(c,"pad");function h(m){var f=-m.getTimezoneOffset(),w=m.getFullYear(),_=w<1;_&&(w=Math.abs(w)+1);var S=c(w,4)+"-"+c(m.getMonth()+1,2)+"-"+c(m.getDate(),2)+"T"+c(m.getHours(),2)+":"+c(m.getMinutes(),2)+":"+c(m.getSeconds(),2)+"."+c(m.getMilliseconds(),3);return f<0?(S+="-",f*=-1):S+="+",S+=c(Math.floor(f/60),2)+":"+c(f%60,2),_&&(S+=" BC"),S}b(h,"dateToString");function l(m){var f=m.getUTCFullYear(),w=f<1;w&&(f=Math.abs(f)+1);var _=c(f,4)+"-"+c(m.getUTCMonth()+1,2)+"-"+c(m.getUTCDate(),2)+"T"+c(m.getUTCHours(),2)+":"+c(m.getUTCMinutes(),2)+":"+c(m.getUTCSeconds(),2)+"."+c(m.getUTCMilliseconds(),3);return _+="+00:00",w&&(_+=" BC"),_}b(l,"dateToStringUTC");function p(m,f,w){return m=typeof m=="string"?{text:m}:m,f&&(typeof f=="function"?m.callback=f:m.values=f),w&&(m.callback=w),m}b(p,"normalizeQueryConfig");var g=b(function(m){return t.createHash("md5").update(m,"utf-8").digest("hex")},"md5"),v=b(function(m,f,w){var _=g(f+m),S=g(ie.concat([ie.from(_),w]));return"md5"+S},"postgresMd5PasswordHash");e.exports={prepareValue:b(function(m){return o(m)},"prepareValueWrapper"),normalizeQueryConfig:p,postgresMd5PasswordHash:v,md5:g}}),Vy=de((r,e)=>{"use strict";te();var t=(Fc(),qe(io));function s(f){if(f.indexOf("SCRAM-SHA-256")===-1)throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");let w=t.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:w,response:"n,,n=*,r="+w,message:"SASLInitialResponse"}}b(s,"startSession");function n(f,w,_){if(f.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(typeof _!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let S=h(_);if(S.nonce.startsWith(f.clientNonce)){if(S.nonce.length===f.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");var x=ie.from(S.salt,"base64"),R=m(w,x,S.iteration),L=v(R,"Client Key"),E=g(L),P="n=*,r="+f.clientNonce,I="r="+S.nonce+",s="+S.salt+",i="+S.iteration,C="c=biws,r="+S.nonce,B=P+","+I+","+C,$=v(E,B),H=p(L,$),Z=H.toString("base64"),k=v(R,"Server Key"),Q=v(k,B);f.message="SASLResponse",f.serverSignature=Q.toString("base64"),f.response=C+",p="+Z}b(n,"continueSession");function i(f,w){if(f.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof w!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:_}=l(w);if(_!==f.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}b(i,"finalizeSession");function o(f){if(typeof f!="string")throw new TypeError("SASL: text must be a string");return f.split("").map((w,_)=>f.charCodeAt(_)).every(w=>w>=33&&w<=43||w>=45&&w<=126)}b(o,"isPrintableChars");function a(f){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(f)}b(a,"isBase64");function c(f){if(typeof f!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(f.split(",").map(w=>{if(!/^.=/.test(w))throw new Error("SASL: Invalid attribute pair entry");let _=w[0],S=w.substring(2);return[_,S]}))}b(c,"parseAttributePairs");function h(f){let w=c(f),_=w.get("r");if(_){if(!o(_))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let S=w.get("s");if(S){if(!a(S))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let x=w.get("i");if(x){if(!/^[1-9][0-9]*$/.test(x))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let R=parseInt(x,10);return{nonce:_,salt:S,iteration:R}}b(h,"parseServerFirstMessage");function l(f){let w=c(f).get("v");if(w){if(!a(w))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:w}}b(l,"parseServerFinalMessage");function p(f,w){if(!ie.isBuffer(f))throw new TypeError("first argument must be a Buffer");if(!ie.isBuffer(w))throw new TypeError("second argument must be a Buffer");if(f.length!==w.length)throw new Error("Buffer lengths must match");if(f.length===0)throw new Error("Buffers cannot be empty");return ie.from(f.map((_,S)=>f[S]^w[S]))}b(p,"xorBuffers");function g(f){return t.createHash("sha256").update(f).digest()}b(g,"sha256");function v(f,w){return t.createHmac("sha256",f).update(w).digest()}b(v,"hmacSha256");function m(f,w,_){for(var S=v(f,ie.concat([w,ie.from([0,0,0,1])])),x=S,R=0;R<_-1;R++)S=v(f,S),x=p(x,S);return x}b(m,"Hi"),e.exports={startSession:s,continueSession:n,finalizeSession:i}}),oo={};mt(oo,{join:()=>zc});function zc(...r){return r.join("/")}var Wc=Ze(()=>{"use strict";te(),b(zc,"join")}),ao={};mt(ao,{stat:()=>Gc});function Gc(r,e){e(new Error("No filesystem"))}var Kc=Ze(()=>{"use strict";te(),b(Gc,"stat")}),uo={};mt(uo,{default:()=>Hc});var Hc,Zc=Ze(()=>{"use strict";te(),Hc={}}),Xc={};mt(Xc,{StringDecoder:()=>Jc});var eo,Jc,zy=Ze(()=>{"use strict";te(),eo=class{constructor(e){oe(this,"td"),this.td=new TextDecoder(e)}write(e){return this.td.decode(e,{stream:!0})}end(e){return this.td.decode(e)}},b(eo,"StringDecoder"),Jc=eo}),Wy=de((r,e)=>{"use strict";te();var{Transform:t}=(Zc(),qe(uo)),{StringDecoder:s}=(zy(),qe(Xc)),n=Symbol("last"),i=Symbol("decoder");function o(p,g,v){let m;if(this.overflow){if(m=this[i].write(p).split(this.matcher),m.length===1)return v();m.shift(),this.overflow=!1}else this[n]+=this[i].write(p),m=this[n].split(this.matcher);this[n]=m.pop();for(let f=0;f<m.length;f++)try{c(this,this.mapper(m[f]))}catch(w){return v(w)}if(this.overflow=this[n].length>this.maxLength,this.overflow&&!this.skipOverflow){v(new Error("maximum buffer reached"));return}v()}b(o,"transform");function a(p){if(this[n]+=this[i].end(),this[n])try{c(this,this.mapper(this[n]))}catch(g){return p(g)}p()}b(a,"flush");function c(p,g){g!==void 0&&p.push(g)}b(c,"push");function h(p){return p}b(h,"noop");function l(p,g,v){switch(p=p||/\r?\n/,g=g||h,v=v||{},arguments.length){case 1:typeof p=="function"?(g=p,p=/\r?\n/):typeof p=="object"&&!(p instanceof RegExp)&&!p[Symbol.split]&&(v=p,p=/\r?\n/);break;case 2:typeof p=="function"?(v=g,g=p,p=/\r?\n/):typeof g=="object"&&(v=g,g=h)}v=Object.assign({},v),v.autoDestroy=!0,v.transform=o,v.flush=a,v.readableObjectMode=!0;let m=new t(v);return m[n]="",m[i]=new s("utf8"),m.matcher=p,m.mapper=g,m.maxLength=v.maxLength,m.skipOverflow=v.skipOverflow||!1,m.overflow=!1,m._destroy=function(f,w){this._writableState.errorEmitted=!1,w(f)},m}b(l,"split"),e.exports=l}),Gy=de((r,e)=>{"use strict";te();var t=(Wc(),qe(oo)),s=(Zc(),qe(uo)).Stream,n=Wy(),i=(_n(),qe(Ss)),o=5432,a=he.platform==="win32",c=he.stderr,h=56,l=7,p=61440,g=32768;function v(L){return(L&p)==g}b(v,"isRegFile");var m=["host","port","database","user","password"],f=m.length,w=m[f-1];function _(){var L=c instanceof s&&c.writable===!0;if(L){var E=Array.prototype.slice.call(arguments).concat(`
`);c.write(i.format.apply(i,E))}}b(_,"warn"),Object.defineProperty(e.exports,"isWin",{get:b(function(){return a},"get"),set:b(function(L){a=L},"set")}),e.exports.warnTo=function(L){var E=c;return c=L,E},e.exports.getFileName=function(L){var E=L||he.env,P=E.PGPASSFILE||(a?t.join(E.APPDATA||"./","postgresql","pgpass.conf"):t.join(E.HOME||"./",".pgpass"));return P},e.exports.usePgPass=function(L,E){return Object.prototype.hasOwnProperty.call(he.env,"PGPASSWORD")?!1:a?!0:(E=E||"<unkn>",v(L.mode)?L.mode&(h|l)?(_('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',E),!1):!0:(_('WARNING: password file "%s" is not a plain file',E),!1))};var S=e.exports.match=function(L,E){return m.slice(0,-1).reduce(function(P,I,C){return C==1&&Number(L[I]||o)===Number(E[I])?P&&!0:P&&(E[I]==="*"||E[I]===L[I])},!0)};e.exports.getPassword=function(L,E,P){var I,C=E.pipe(n());function B(Z){var k=x(Z);k&&R(k)&&S(L,k)&&(I=k[w],C.end())}b(B,"onLine");var $=b(function(){E.destroy(),P(I)},"onEnd"),H=b(function(Z){E.destroy(),_("WARNING: error on reading file: %s",Z),P(void 0)},"onErr");E.on("error",H),C.on("data",B).on("end",$).on("error",H)};var x=e.exports.parseLine=function(L){if(L.length<11||L.match(/^\s+#/))return null;for(var E="",P="",I=0,C=0,B=0,$={},H=!1,Z=b(function(Q,ee,ae){var ge=L.substring(ee,ae);Object.hasOwnProperty.call(he.env,"PGPASS_NO_DEESCAPE")||(ge=ge.replace(/\\([:\\])/g,"$1")),$[m[Q]]=ge},"addToObj"),k=0;k<L.length-1;k+=1){if(E=L.charAt(k+1),P=L.charAt(k),H=I==f-1,H){Z(I,C);break}k>=0&&E==":"&&P!=="\\"&&(Z(I,C,k+1),C=k+2,I+=1)}return $=Object.keys($).length===f?$:null,$},R=e.exports.isValidEntry=function(L){for(var E={0:function($){return $.length>0},1:function($){return $==="*"?!0:($=Number($),isFinite($)&&$>0&&$<9007199254740992&&Math.floor($)===$)},2:function($){return $.length>0},3:function($){return $.length>0},4:function($){return $.length>0}},P=0;P<m.length;P+=1){var I=E[P],C=L[m[P]]||"",B=I(C);if(!B)return!1}return!0}}),Ky=de((r,e)=>{"use strict";te();var t=(Wc(),qe(oo)),s=(Kc(),qe(ao)),n=Gy();e.exports=function(i,o){var a=n.getFileName();s.stat(a,function(c,h){if(c||!n.usePgPass(h,a))return o(void 0);var l=s.createReadStream(a);n.getPassword(i,l,o)})},e.exports.warnTo=n.warnTo}),co=de((r,e)=>{"use strict";te();var t=Sn();function s(n){this._types=n||t,this.text={},this.binary={}}b(s,"TypeOverrides"),s.prototype.getOverrides=function(n){switch(n){case"text":return this.text;case"binary":return this.binary;default:return{}}},s.prototype.setTypeParser=function(n,i,o){typeof i=="function"&&(o=i,i="text"),this.getOverrides(i)[n]=o},s.prototype.getTypeParser=function(n,i){return i=i||"text",this.getOverrides(i)[n]||this._types.getTypeParser(n,i)},e.exports=s}),Yc={};mt(Yc,{default:()=>el});var el,Hy=Ze(()=>{"use strict";te(),el={}}),tl={};mt(tl,{parse:()=>lo});function lo(r,e=!1){let{protocol:t}=new URL(r),s="http:"+r.substring(t.length),{username:n,password:i,host:o,hostname:a,port:c,pathname:h,search:l,searchParams:p,hash:g}=new URL(s);i=decodeURIComponent(i),n=decodeURIComponent(n),h=decodeURIComponent(h);let v=n+":"+i,m=e?Object.fromEntries(p.entries()):l;return{href:r,protocol:t,auth:v,username:n,password:i,host:o,hostname:a,port:c,pathname:h,search:l,query:m,hash:g}}var rl=Ze(()=>{"use strict";te(),b(lo,"parse")}),Zy=de((r,e)=>{"use strict";te();var t=(rl(),qe(tl)),s=(Kc(),qe(ao));function n(i){if(i.charAt(0)==="/"){var a=i.split(" ");return{host:a[0],database:a[1]}}var o=t.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(i)?encodeURI(i).replace(/\%25(\d\d)/g,"%$1"):i,!0),a=o.query;for(var c in a)Array.isArray(a[c])&&(a[c]=a[c][a[c].length-1]);var h=(o.auth||":").split(":");if(a.user=h[0],a.password=h.splice(1).join(":"),a.port=o.port,o.protocol=="socket:")return a.host=decodeURI(o.pathname),a.database=o.query.db,a.client_encoding=o.query.encoding,a;a.host||(a.host=o.hostname);var l=o.pathname;if(!a.host&&l&&/^%2f/i.test(l)){var p=l.split("/");a.host=decodeURIComponent(p[0]),l=p.splice(1).join("/")}switch(l&&l.charAt(0)==="/"&&(l=l.slice(1)||null),a.database=l&&decodeURI(l),(a.ssl==="true"||a.ssl==="1")&&(a.ssl=!0),a.ssl==="0"&&(a.ssl=!1),(a.sslcert||a.sslkey||a.sslrootcert||a.sslmode)&&(a.ssl={}),a.sslcert&&(a.ssl.cert=s.readFileSync(a.sslcert).toString()),a.sslkey&&(a.ssl.key=s.readFileSync(a.sslkey).toString()),a.sslrootcert&&(a.ssl.ca=s.readFileSync(a.sslrootcert).toString()),a.sslmode){case"disable":{a.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{a.ssl.rejectUnauthorized=!1;break}}return a}b(n,"parse"),e.exports=n,n.parse=n}),fo=de((r,e)=>{"use strict";te();var t=(Hy(),qe(Yc)),s=En(),n=Zy().parse,i=b(function(p,g,v){return v===void 0?v=he.env["PG"+p.toUpperCase()]:v===!1||(v=he.env[v]),g[p]||v||s[p]},"val"),o=b(function(){switch(he.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return s.ssl},"readSSLConfigFromEnvironment"),a=b(function(p){return"'"+(""+p).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},"quoteParamValue"),c=b(function(p,g,v){var m=g[v];m!=null&&p.push(v+"="+a(m))},"add"),h=class{constructor(g){g=typeof g=="string"?n(g):g||{},g.connectionString&&(g=Object.assign({},g,n(g.connectionString))),this.user=i("user",g),this.database=i("database",g),this.database===void 0&&(this.database=this.user),this.port=parseInt(i("port",g),10),this.host=i("host",g),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:i("password",g)}),this.binary=i("binary",g),this.options=i("options",g),this.ssl=typeof g.ssl>"u"?o():g.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=i("client_encoding",g),this.replication=i("replication",g),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=i("application_name",g,"PGAPPNAME"),this.fallback_application_name=i("fallback_application_name",g,!1),this.statement_timeout=i("statement_timeout",g,!1),this.lock_timeout=i("lock_timeout",g,!1),this.idle_in_transaction_session_timeout=i("idle_in_transaction_session_timeout",g,!1),this.query_timeout=i("query_timeout",g,!1),g.connectionTimeoutMillis===void 0?this.connect_timeout=he.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(g.connectionTimeoutMillis/1e3),g.keepAlive===!1?this.keepalives=0:g.keepAlive===!0&&(this.keepalives=1),typeof g.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(g.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(g){var v=[];c(v,this,"user"),c(v,this,"password"),c(v,this,"port"),c(v,this,"application_name"),c(v,this,"fallback_application_name"),c(v,this,"connect_timeout"),c(v,this,"options");var m=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(c(v,m,"sslmode"),c(v,m,"sslca"),c(v,m,"sslkey"),c(v,m,"sslcert"),c(v,m,"sslrootcert"),this.database&&v.push("dbname="+a(this.database)),this.replication&&v.push("replication="+a(this.replication)),this.host&&v.push("host="+a(this.host)),this.isDomainSocket)return g(null,v.join(" "));this.client_encoding&&v.push("client_encoding="+a(this.client_encoding)),t.lookup(this.host,function(f,w){return f?g(f,null):(v.push("hostaddr="+a(w)),g(null,v.join(" ")))})}};b(h,"ConnectionParameters");var l=h;e.exports=l}),Xy=de((r,e)=>{"use strict";te();var t=Sn(),s=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,n=class{constructor(a,c){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=c,this.RowCtor=null,this.rowAsArray=a==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(a){var c;a.text?c=s.exec(a.text):c=s.exec(a.command),c&&(this.command=c[1],c[3]?(this.oid=parseInt(c[2],10),this.rowCount=parseInt(c[3],10)):c[2]&&(this.rowCount=parseInt(c[2],10)))}_parseRowAsArray(a){for(var c=new Array(a.length),h=0,l=a.length;h<l;h++){var p=a[h];p!==null?c[h]=this._parsers[h](p):c[h]=null}return c}parseRow(a){for(var c={},h=0,l=a.length;h<l;h++){var p=a[h],g=this.fields[h].name;p!==null?c[g]=this._parsers[h](p):c[g]=null}return c}addRow(a){this.rows.push(a)}addFields(a){this.fields=a,this.fields.length&&(this._parsers=new Array(a.length));for(var c=0;c<a.length;c++){var h=a[c];this._types?this._parsers[c]=this._types.getTypeParser(h.dataTypeID,h.format||"text"):this._parsers[c]=t.getTypeParser(h.dataTypeID,h.format||"text")}}};b(n,"Result");var i=n;e.exports=i}),Jy=de((r,e)=>{"use strict";te();var{EventEmitter:t}=nr(),s=Xy(),n=xn(),i=class extends t{constructor(c,h,l){super(),c=n.normalizeQueryConfig(c,h,l),this.text=c.text,this.values=c.values,this.rows=c.rows,this.types=c.types,this.name=c.name,this.binary=c.binary,this.portal=c.portal||"",this.callback=c.callback,this._rowMode=c.rowMode,he.domain&&c.callback&&(this.callback=he.domain.bind(c.callback)),this._result=new s(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new s(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(c){this._checkForMultirow(),this._result.addFields(c.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(c){let h;if(!this._canceledDueToError){try{h=this._result.parseRow(c.fields)}catch(l){this._canceledDueToError=l;return}this.emit("row",h,this._result),this._accumulateRows&&this._result.addRow(h)}}handleCommandComplete(c,h){this._checkForMultirow(),this._result.addCommandComplete(c),this.rows&&h.sync()}handleEmptyQuery(c){this.rows&&c.sync()}handleError(c,h){if(this._canceledDueToError&&(c=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(c);this.emit("error",c)}handleReadyForQuery(c){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,c);if(this.callback)try{this.callback(null,this._results)}catch(h){he.nextTick(()=>{throw h})}this.emit("end",this._results)}submit(c){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let h=c.parsedStatements[this.name];return this.text&&h&&this.text!==h?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(c):c.query(this.text),null)}hasBeenParsed(c){return this.name&&c.parsedStatements[this.name]}handlePortalSuspended(c){this._getRows(c,this.rows)}_getRows(c,h){c.execute({portal:this.portal,rows:h}),h?c.flush():c.sync()}prepare(c){this.isPreparedStatement=!0,this.hasBeenParsed(c)||c.parse({text:this.text,name:this.name,types:this.types});try{c.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:n.prepareValue})}catch(h){this.handleError(h,c);return}c.describe({type:"P",name:this.portal||""}),this._getRows(c,this.rows)}handleCopyInResponse(c){c.sendCopyFail("No source stream defined")}handleCopyData(c,h){}};b(i,"Query");var o=i;e.exports=o}),sl={};mt(sl,{Socket:()=>Ot,isIP:()=>nl});function nl(r){return 0}var Lc,to,ws,Ot,ho=Ze(()=>{"use strict";te(),Lc=Mr(nr(),1),b(nl,"isIP"),to=/^[^.]+\./,ws=class re extends Lc.EventEmitter{constructor(){super(...arguments),oe(this,"opts",{}),oe(this,"connecting",!1),oe(this,"pending",!0),oe(this,"writable",!0),oe(this,"encrypted",!1),oe(this,"authorized",!1),oe(this,"destroyed",!1),oe(this,"ws",null),oe(this,"writeBuffer"),oe(this,"tlsState",0),oe(this,"tlsRead"),oe(this,"tlsWrite")}static get poolQueryViaFetch(){return re.opts.poolQueryViaFetch??re.defaults.poolQueryViaFetch}static set poolQueryViaFetch(e){re.opts.poolQueryViaFetch=e}static get fetchEndpoint(){return re.opts.fetchEndpoint??re.defaults.fetchEndpoint}static set fetchEndpoint(e){re.opts.fetchEndpoint=e}static get fetchConnectionCache(){return!0}static set fetchConnectionCache(e){console.warn("The `fetchConnectionCache` option is deprecated (now always `true`)")}static get fetchFunction(){return re.opts.fetchFunction??re.defaults.fetchFunction}static set fetchFunction(e){re.opts.fetchFunction=e}static get webSocketConstructor(){return re.opts.webSocketConstructor??re.defaults.webSocketConstructor}static set webSocketConstructor(e){re.opts.webSocketConstructor=e}get webSocketConstructor(){return this.opts.webSocketConstructor??re.webSocketConstructor}set webSocketConstructor(e){this.opts.webSocketConstructor=e}static get wsProxy(){return re.opts.wsProxy??re.defaults.wsProxy}static set wsProxy(e){re.opts.wsProxy=e}get wsProxy(){return this.opts.wsProxy??re.wsProxy}set wsProxy(e){this.opts.wsProxy=e}static get coalesceWrites(){return re.opts.coalesceWrites??re.defaults.coalesceWrites}static set coalesceWrites(e){re.opts.coalesceWrites=e}get coalesceWrites(){return this.opts.coalesceWrites??re.coalesceWrites}set coalesceWrites(e){this.opts.coalesceWrites=e}static get useSecureWebSocket(){return re.opts.useSecureWebSocket??re.defaults.useSecureWebSocket}static set useSecureWebSocket(e){re.opts.useSecureWebSocket=e}get useSecureWebSocket(){return this.opts.useSecureWebSocket??re.useSecureWebSocket}set useSecureWebSocket(e){this.opts.useSecureWebSocket=e}static get forceDisablePgSSL(){return re.opts.forceDisablePgSSL??re.defaults.forceDisablePgSSL}static set forceDisablePgSSL(e){re.opts.forceDisablePgSSL=e}get forceDisablePgSSL(){return this.opts.forceDisablePgSSL??re.forceDisablePgSSL}set forceDisablePgSSL(e){this.opts.forceDisablePgSSL=e}static get disableSNI(){return re.opts.disableSNI??re.defaults.disableSNI}static set disableSNI(e){re.opts.disableSNI=e}get disableSNI(){return this.opts.disableSNI??re.disableSNI}set disableSNI(e){this.opts.disableSNI=e}static get pipelineConnect(){return re.opts.pipelineConnect??re.defaults.pipelineConnect}static set pipelineConnect(e){re.opts.pipelineConnect=e}get pipelineConnect(){return this.opts.pipelineConnect??re.pipelineConnect}set pipelineConnect(e){this.opts.pipelineConnect=e}static get subtls(){return re.opts.subtls??re.defaults.subtls}static set subtls(e){re.opts.subtls=e}get subtls(){return this.opts.subtls??re.subtls}set subtls(e){this.opts.subtls=e}static get pipelineTLS(){return re.opts.pipelineTLS??re.defaults.pipelineTLS}static set pipelineTLS(e){re.opts.pipelineTLS=e}get pipelineTLS(){return this.opts.pipelineTLS??re.pipelineTLS}set pipelineTLS(e){this.opts.pipelineTLS=e}static get rootCerts(){return re.opts.rootCerts??re.defaults.rootCerts}static set rootCerts(e){re.opts.rootCerts=e}get rootCerts(){return this.opts.rootCerts??re.rootCerts}set rootCerts(e){this.opts.rootCerts=e}wsProxyAddrForHost(e,t){let s=this.wsProxy;if(s===void 0)throw new Error("No WebSocket proxy is configured. Please see https://github.com/neondatabase/serverless/blob/main/CONFIG.md#wsproxy-string--host-string-port-number--string--string");return typeof s=="function"?s(e,t):`${s}?address=${e}:${t}`}setNoDelay(){return this}setKeepAlive(){return this}ref(){return this}unref(){return this}connect(e,t,s){this.connecting=!0,s&&this.once("connect",s);let n=b(()=>{this.connecting=!1,this.pending=!1,this.emit("connect"),this.emit("ready")},"handleWebSocketOpen"),i=b((a,c=!1)=>{a.binaryType="arraybuffer",a.addEventListener("error",h=>{this.emit("error",h),this.emit("close")}),a.addEventListener("message",h=>{if(this.tlsState===0){let l=ie.from(h.data);this.emit("data",l)}}),a.addEventListener("close",()=>{this.emit("close")}),c?n():a.addEventListener("open",n)},"configureWebSocket"),o;try{o=this.wsProxyAddrForHost(t,typeof e=="string"?parseInt(e,10):e)}catch(a){this.emit("error",a),this.emit("close");return}try{let a=(this.useSecureWebSocket?"wss:":"ws:")+"//"+o;if(this.webSocketConstructor!==void 0)this.ws=new this.webSocketConstructor(a),i(this.ws);else try{this.ws=new WebSocket(a),i(this.ws)}catch{this.ws=new __unstable_WebSocket(a),i(this.ws)}}catch(a){let c=(this.useSecureWebSocket?"https:":"http:")+"//"+o;fetch(c,{headers:{Upgrade:"websocket"}}).then(h=>{if(this.ws=h.webSocket,this.ws==null)throw a;this.ws.accept(),i(this.ws,!0)}).catch(h=>{this.emit("error",new Error(`All attempts to open a WebSocket to connect to the database failed. Please refer to https://github.com/neondatabase/serverless/blob/main/CONFIG.md#websocketconstructor-typeof-websocket--undefined. Details: ${h.message}`)),this.emit("close")})}}async startTls(e){if(this.subtls===void 0)throw new Error("For Postgres SSL connections, you must set `neonConfig.subtls` to the subtls library. See https://github.com/neondatabase/serverless/blob/main/CONFIG.md for more information.");this.tlsState=1;let t=this.subtls.TrustedCert.fromPEM(this.rootCerts),s=new this.subtls.WebSocketReadQueue(this.ws),n=s.read.bind(s),i=this.rawWrite.bind(this),[o,a]=await this.subtls.startTls(e,t,n,i,{useSNI:!this.disableSNI,expectPreData:this.pipelineTLS?new Uint8Array([83]):void 0});this.tlsRead=o,this.tlsWrite=a,this.tlsState=2,this.encrypted=!0,this.authorized=!0,this.emit("secureConnection",this),this.tlsReadLoop()}async tlsReadLoop(){for(;;){let e=await this.tlsRead();if(e===void 0)break;{let t=ie.from(e);this.emit("data",t)}}}rawWrite(e){if(!this.coalesceWrites){this.ws.send(e);return}if(this.writeBuffer===void 0)this.writeBuffer=e,setTimeout(()=>{this.ws.send(this.writeBuffer),this.writeBuffer=void 0},0);else{let t=new Uint8Array(this.writeBuffer.length+e.length);t.set(this.writeBuffer),t.set(e,this.writeBuffer.length),this.writeBuffer=t}}write(e,t="utf8",s=n=>{}){return e.length===0?(s(),!0):(typeof e=="string"&&(e=ie.from(e,t)),this.tlsState===0?(this.rawWrite(e),s()):this.tlsState===1?this.once("secureConnection",()=>{this.write(e,t,s)}):(this.tlsWrite(e),s()),!0)}end(e=ie.alloc(0),t="utf8",s=()=>{}){return this.write(e,t,()=>{this.ws.close(),s()}),this}destroy(){return this.destroyed=!0,this.end()}},b(ws,"Socket"),oe(ws,"defaults",{poolQueryViaFetch:!1,fetchEndpoint:b((r,e,t)=>{let s;return t?.jwtAuth?s=r.replace(to,"apiauth."):s=r.replace(to,"api."),"https://"+s+"/sql"},"fetchEndpoint"),fetchConnectionCache:!0,fetchFunction:void 0,webSocketConstructor:void 0,wsProxy:b(r=>r+"/v2","wsProxy"),useSecureWebSocket:!0,forceDisablePgSSL:!0,coalesceWrites:!0,pipelineConnect:"password",subtls:void 0,rootCerts:"",pipelineTLS:!1,disableSNI:!1}),oe(ws,"opts",{}),Ot=ws}),il=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.NoticeMessage=r.DataRowMessage=r.CommandCompleteMessage=r.ReadyForQueryMessage=r.NotificationResponseMessage=r.BackendKeyDataMessage=r.AuthenticationMD5Password=r.ParameterStatusMessage=r.ParameterDescriptionMessage=r.RowDescriptionMessage=r.Field=r.CopyResponse=r.CopyDataMessage=r.DatabaseError=r.copyDone=r.emptyQuery=r.replicationStart=r.portalSuspended=r.noData=r.closeComplete=r.bindComplete=r.parseComplete=void 0,r.parseComplete={name:"parseComplete",length:5},r.bindComplete={name:"bindComplete",length:5},r.closeComplete={name:"closeComplete",length:5},r.noData={name:"noData",length:5},r.portalSuspended={name:"portalSuspended",length:5},r.replicationStart={name:"replicationStart",length:4},r.emptyQuery={name:"emptyQuery",length:4},r.copyDone={name:"copyDone",length:4};var e=class extends Error{constructor(k,Q,ee){super(k),this.length=Q,this.name=ee}};b(e,"DatabaseError");var t=e;r.DatabaseError=t;var s=class{constructor(k,Q){this.length=k,this.chunk=Q,this.name="copyData"}};b(s,"CopyDataMessage");var n=s;r.CopyDataMessage=n;var i=class{constructor(k,Q,ee,ae){this.length=k,this.name=Q,this.binary=ee,this.columnTypes=new Array(ae)}};b(i,"CopyResponse");var o=i;r.CopyResponse=o;var a=class{constructor(k,Q,ee,ae,ge,be,Be){this.name=k,this.tableID=Q,this.columnID=ee,this.dataTypeID=ae,this.dataTypeSize=ge,this.dataTypeModifier=be,this.format=Be}};b(a,"Field");var c=a;r.Field=c;var h=class{constructor(k,Q){this.length=k,this.fieldCount=Q,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};b(h,"RowDescriptionMessage");var l=h;r.RowDescriptionMessage=l;var p=class{constructor(k,Q){this.length=k,this.parameterCount=Q,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};b(p,"ParameterDescriptionMessage");var g=p;r.ParameterDescriptionMessage=g;var v=class{constructor(k,Q,ee){this.length=k,this.parameterName=Q,this.parameterValue=ee,this.name="parameterStatus"}};b(v,"ParameterStatusMessage");var m=v;r.ParameterStatusMessage=m;var f=class{constructor(k,Q){this.length=k,this.salt=Q,this.name="authenticationMD5Password"}};b(f,"AuthenticationMD5Password");var w=f;r.AuthenticationMD5Password=w;var _=class{constructor(k,Q,ee){this.length=k,this.processID=Q,this.secretKey=ee,this.name="backendKeyData"}};b(_,"BackendKeyDataMessage");var S=_;r.BackendKeyDataMessage=S;var x=class{constructor(k,Q,ee,ae){this.length=k,this.processId=Q,this.channel=ee,this.payload=ae,this.name="notification"}};b(x,"NotificationResponseMessage");var R=x;r.NotificationResponseMessage=R;var L=class{constructor(k,Q){this.length=k,this.status=Q,this.name="readyForQuery"}};b(L,"ReadyForQueryMessage");var E=L;r.ReadyForQueryMessage=E;var P=class{constructor(k,Q){this.length=k,this.text=Q,this.name="commandComplete"}};b(P,"CommandCompleteMessage");var I=P;r.CommandCompleteMessage=I;var C=class{constructor(k,Q){this.length=k,this.fields=Q,this.name="dataRow",this.fieldCount=Q.length}};b(C,"DataRowMessage");var B=C;r.DataRowMessage=B;var $=class{constructor(k,Q){this.length=k,this.message=Q,this.name="notice"}};b($,"NoticeMessage");var H=$;r.NoticeMessage=H}),Yy=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.Writer=void 0;var e=class{constructor(n=256){this.size=n,this.offset=5,this.headerPosition=0,this.buffer=ie.allocUnsafe(n)}ensure(n){var i=this.buffer.length-this.offset;if(i<n){var o=this.buffer,a=o.length+(o.length>>1)+n;this.buffer=ie.allocUnsafe(a),o.copy(this.buffer)}}addInt32(n){return this.ensure(4),this.buffer[this.offset++]=n>>>24&255,this.buffer[this.offset++]=n>>>16&255,this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addInt16(n){return this.ensure(2),this.buffer[this.offset++]=n>>>8&255,this.buffer[this.offset++]=n>>>0&255,this}addCString(n){if(!n)this.ensure(1);else{var i=ie.byteLength(n);this.ensure(i+1),this.buffer.write(n,this.offset,"utf-8"),this.offset+=i}return this.buffer[this.offset++]=0,this}addString(n=""){var i=ie.byteLength(n);return this.ensure(i),this.buffer.write(n,this.offset),this.offset+=i,this}add(n){return this.ensure(n.length),n.copy(this.buffer,this.offset),this.offset+=n.length,this}join(n){if(n){this.buffer[this.headerPosition]=n;let i=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(i,this.headerPosition+1)}return this.buffer.slice(n?0:5,this.offset)}flush(n){var i=this.join(n);return this.offset=5,this.headerPosition=0,this.buffer=ie.allocUnsafe(this.size),i}};b(e,"Writer");var t=e;r.Writer=t}),e0=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=void 0;var e=Yy(),t=new e.Writer,s=b(k=>{t.addInt16(3).addInt16(0);for(let ae of Object.keys(k))t.addCString(ae).addCString(k[ae]);t.addCString("client_encoding").addCString("UTF8");var Q=t.addCString("").flush(),ee=Q.length+4;return new e.Writer().addInt32(ee).add(Q).flush()},"startup"),n=b(()=>{let k=ie.allocUnsafe(8);return k.writeInt32BE(8,0),k.writeInt32BE(80877103,4),k},"requestSsl"),i=b(k=>t.addCString(k).flush(112),"password"),o=b(function(k,Q){return t.addCString(k).addInt32(ie.byteLength(Q)).addString(Q),t.flush(112)},"sendSASLInitialResponseMessage"),a=b(function(k){return t.addString(k).flush(112)},"sendSCRAMClientFinalMessage"),c=b(k=>t.addCString(k).flush(81),"query"),h=[],l=b(k=>{let Q=k.name||"";Q.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",Q,Q.length),console.error("This can cause conflicts and silent errors executing queries"));let ee=k.types||h;for(var ae=ee.length,ge=t.addCString(Q).addCString(k.text).addInt16(ae),be=0;be<ae;be++)ge.addInt32(ee[be]);return t.flush(80)},"parse"),p=new e.Writer,g=b(function(k,Q){for(let ee=0;ee<k.length;ee++){let ae=Q?Q(k[ee],ee):k[ee];ae==null?(t.addInt16(0),p.addInt32(-1)):ae instanceof ie?(t.addInt16(1),p.addInt32(ae.length),p.add(ae)):(t.addInt16(0),p.addInt32(ie.byteLength(ae)),p.addString(ae))}},"writeValues"),v=b((k={})=>{let Q=k.portal||"",ee=k.statement||"",ae=k.binary||!1,ge=k.values||h,be=ge.length;return t.addCString(Q).addCString(ee),t.addInt16(be),g(ge,k.valueMapper),t.addInt16(be),t.add(p.flush()),t.addInt16(ae?1:0),t.flush(66)},"bind"),m=ie.from([69,0,0,0,9,0,0,0,0,0]),f=b(k=>{if(!k||!k.portal&&!k.rows)return m;let Q=k.portal||"",ee=k.rows||0,ae=ie.byteLength(Q),ge=4+ae+1+4,be=ie.allocUnsafe(1+ge);return be[0]=69,be.writeInt32BE(ge,1),be.write(Q,5,"utf-8"),be[ae+5]=0,be.writeUInt32BE(ee,be.length-4),be},"execute"),w=b((k,Q)=>{let ee=ie.allocUnsafe(16);return ee.writeInt32BE(16,0),ee.writeInt16BE(1234,4),ee.writeInt16BE(5678,6),ee.writeInt32BE(k,8),ee.writeInt32BE(Q,12),ee},"cancel"),_=b((k,Q)=>{let ee=4+ie.byteLength(Q)+1,ae=ie.allocUnsafe(1+ee);return ae[0]=k,ae.writeInt32BE(ee,1),ae.write(Q,5,"utf-8"),ae[ee]=0,ae},"cstringMessage"),S=t.addCString("P").flush(68),x=t.addCString("S").flush(68),R=b(k=>k.name?_(68,`${k.type}${k.name||""}`):k.type==="P"?S:x,"describe"),L=b(k=>{let Q=`${k.type}${k.name||""}`;return _(67,Q)},"close"),E=b(k=>t.add(k).flush(100),"copyData"),P=b(k=>_(102,k),"copyFail"),I=b(k=>ie.from([k,0,0,0,4]),"codeOnlyBuffer"),C=I(72),B=I(83),$=I(88),H=I(99),Z={startup:s,password:i,requestSsl:n,sendSASLInitialResponseMessage:o,sendSCRAMClientFinalMessage:a,query:c,parse:l,bind:v,execute:f,describe:R,close:L,flush:b(()=>C,"flush"),sync:b(()=>B,"sync"),end:b(()=>$,"end"),copyData:E,copyDone:b(()=>H,"copyDone"),copyFail:P,cancel:w};r.serialize=Z}),t0=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.BufferReader=void 0;var e=ie.allocUnsafe(0),t=class{constructor(i=0){this.offset=i,this.buffer=e,this.encoding="utf-8"}setBuffer(i,o){this.offset=i,this.buffer=o}int16(){let i=this.buffer.readInt16BE(this.offset);return this.offset+=2,i}byte(){let i=this.buffer[this.offset];return this.offset++,i}int32(){let i=this.buffer.readInt32BE(this.offset);return this.offset+=4,i}string(i){let o=this.buffer.toString(this.encoding,this.offset,this.offset+i);return this.offset+=i,o}cstring(){let i=this.offset,o=i;for(;this.buffer[o++]!==0;);return this.offset=o,this.buffer.toString(this.encoding,i,o-1)}bytes(i){let o=this.buffer.slice(this.offset,this.offset+i);return this.offset+=i,o}};b(t,"BufferReader");var s=t;r.BufferReader=s}),r0=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.Parser=void 0;var e=il(),t=t0(),s=1,n=4,i=s+n,o=ie.allocUnsafe(0),a=class{constructor(l){if(this.buffer=o,this.bufferLength=0,this.bufferOffset=0,this.reader=new t.BufferReader,l?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=l?.mode||"text"}parse(l,p){this.mergeBuffer(l);let g=this.bufferOffset+this.bufferLength,v=this.bufferOffset;for(;v+i<=g;){let m=this.buffer[v],f=this.buffer.readUInt32BE(v+s),w=s+f;if(w+v<=g){let _=this.handlePacket(v+i,m,f,this.buffer);p(_),v+=w}else break}v===g?(this.buffer=o,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=g-v,this.bufferOffset=v)}mergeBuffer(l){if(this.bufferLength>0){let p=this.bufferLength+l.byteLength;if(p+this.bufferOffset>this.buffer.byteLength){let g;if(p<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)g=this.buffer;else{let v=this.buffer.byteLength*2;for(;p>=v;)v*=2;g=ie.allocUnsafe(v)}this.buffer.copy(g,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=g,this.bufferOffset=0}l.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=p}else this.buffer=l,this.bufferOffset=0,this.bufferLength=l.byteLength}handlePacket(l,p,g,v){switch(p){case 50:return e.bindComplete;case 49:return e.parseComplete;case 51:return e.closeComplete;case 110:return e.noData;case 115:return e.portalSuspended;case 99:return e.copyDone;case 87:return e.replicationStart;case 73:return e.emptyQuery;case 68:return this.parseDataRowMessage(l,g,v);case 67:return this.parseCommandCompleteMessage(l,g,v);case 90:return this.parseReadyForQueryMessage(l,g,v);case 65:return this.parseNotificationMessage(l,g,v);case 82:return this.parseAuthenticationResponse(l,g,v);case 83:return this.parseParameterStatusMessage(l,g,v);case 75:return this.parseBackendKeyData(l,g,v);case 69:return this.parseErrorMessage(l,g,v,"error");case 78:return this.parseErrorMessage(l,g,v,"notice");case 84:return this.parseRowDescriptionMessage(l,g,v);case 116:return this.parseParameterDescriptionMessage(l,g,v);case 71:return this.parseCopyInMessage(l,g,v);case 72:return this.parseCopyOutMessage(l,g,v);case 100:return this.parseCopyData(l,g,v);default:return new e.DatabaseError("received invalid response: "+p.toString(16),g,"error")}}parseReadyForQueryMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.string(1);return new e.ReadyForQueryMessage(p,v)}parseCommandCompleteMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.cstring();return new e.CommandCompleteMessage(p,v)}parseCopyData(l,p,g){let v=g.slice(l,l+(p-4));return new e.CopyDataMessage(p,v)}parseCopyInMessage(l,p,g){return this.parseCopyMessage(l,p,g,"copyInResponse")}parseCopyOutMessage(l,p,g){return this.parseCopyMessage(l,p,g,"copyOutResponse")}parseCopyMessage(l,p,g,v){this.reader.setBuffer(l,g);let m=this.reader.byte()!==0,f=this.reader.int16(),w=new e.CopyResponse(p,v,m,f);for(let _=0;_<f;_++)w.columnTypes[_]=this.reader.int16();return w}parseNotificationMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.int32(),m=this.reader.cstring(),f=this.reader.cstring();return new e.NotificationResponseMessage(p,v,m,f)}parseRowDescriptionMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.int16(),m=new e.RowDescriptionMessage(p,v);for(let f=0;f<v;f++)m.fields[f]=this.parseField();return m}parseField(){let l=this.reader.cstring(),p=this.reader.int32(),g=this.reader.int16(),v=this.reader.int32(),m=this.reader.int16(),f=this.reader.int32(),w=this.reader.int16()===0?"text":"binary";return new e.Field(l,p,g,v,m,f,w)}parseParameterDescriptionMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.int16(),m=new e.ParameterDescriptionMessage(p,v);for(let f=0;f<v;f++)m.dataTypeIDs[f]=this.reader.int32();return m}parseDataRowMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.int16(),m=new Array(v);for(let f=0;f<v;f++){let w=this.reader.int32();m[f]=w===-1?null:this.reader.string(w)}return new e.DataRowMessage(p,m)}parseParameterStatusMessage(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.cstring(),m=this.reader.cstring();return new e.ParameterStatusMessage(p,v,m)}parseBackendKeyData(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.int32(),m=this.reader.int32();return new e.BackendKeyDataMessage(p,v,m)}parseAuthenticationResponse(l,p,g){this.reader.setBuffer(l,g);let v=this.reader.int32(),m={name:"authenticationOk",length:p};switch(v){case 0:break;case 3:m.length===8&&(m.name="authenticationCleartextPassword");break;case 5:if(m.length===12){m.name="authenticationMD5Password";let w=this.reader.bytes(4);return new e.AuthenticationMD5Password(p,w)}break;case 10:m.name="authenticationSASL",m.mechanisms=[];let f;do f=this.reader.cstring(),f&&m.mechanisms.push(f);while(f);break;case 11:m.name="authenticationSASLContinue",m.data=this.reader.string(p-8);break;case 12:m.name="authenticationSASLFinal",m.data=this.reader.string(p-8);break;default:throw new Error("Unknown authenticationOk message type "+v)}return m}parseErrorMessage(l,p,g,v){this.reader.setBuffer(l,g);let m={},f=this.reader.string(1);for(;f!=="\0";)m[f]=this.reader.cstring(),f=this.reader.string(1);let w=m.M,_=v==="notice"?new e.NoticeMessage(p,w):new e.DatabaseError(w,p,v);return _.severity=m.S,_.code=m.C,_.detail=m.D,_.hint=m.H,_.position=m.P,_.internalPosition=m.p,_.internalQuery=m.q,_.where=m.W,_.schema=m.s,_.table=m.t,_.column=m.c,_.dataType=m.d,_.constraint=m.n,_.file=m.F,_.line=m.L,_.routine=m.R,_}};b(a,"Parser");var c=a;r.Parser=c}),ol=de(r=>{"use strict";te(),Object.defineProperty(r,"__esModule",{value:!0}),r.DatabaseError=r.serialize=r.parse=void 0;var e=il();Object.defineProperty(r,"DatabaseError",{enumerable:!0,get:b(function(){return e.DatabaseError},"get")});var t=e0();Object.defineProperty(r,"serialize",{enumerable:!0,get:b(function(){return t.serialize},"get")});var s=r0();function n(i,o){let a=new s.Parser;return i.on("data",c=>a.parse(c,o)),new Promise(c=>i.on("end",()=>c()))}b(n,"parse"),r.parse=n}),al={};mt(al,{connect:()=>ul});function ul({socket:r,servername:e}){return r.startTls(e),r}var s0=Ze(()=>{"use strict";te(),b(ul,"connect")}),cl=de((r,e)=>{"use strict";te();var t=(ho(),qe(sl)),s=nr().EventEmitter,{parse:n,serialize:i}=ol(),o=i.flush(),a=i.sync(),c=i.end(),h=class extends s{constructor(g){super(),g=g||{},this.stream=g.stream||new t.Socket,this._keepAlive=g.keepAlive,this._keepAliveInitialDelayMillis=g.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=g.ssl||!1,this._ending=!1,this._emitMessage=!1;var v=this;this.on("newListener",function(m){m==="message"&&(v._emitMessage=!0)})}connect(g,v){var m=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(g,v),this.stream.once("connect",function(){m._keepAlive&&m.stream.setKeepAlive(!0,m._keepAliveInitialDelayMillis),m.emit("connect")});let f=b(function(w){m._ending&&(w.code==="ECONNRESET"||w.code==="EPIPE")||m.emit("error",w)},"reportStreamError");if(this.stream.on("error",f),this.stream.on("close",function(){m.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(w){var _=w.toString("utf8");switch(_){case"S":break;case"N":return m.stream.end(),m.emit("error",new Error("The server does not support SSL connections"));default:return m.stream.end(),m.emit("error",new Error("There was an error establishing an SSL connection"))}var S=(s0(),qe(al));let x={socket:m.stream};m.ssl!==!0&&(Object.assign(x,m.ssl),"key"in m.ssl&&(x.key=m.ssl.key)),t.isIP(v)===0&&(x.servername=v);try{m.stream=S.connect(x)}catch(R){return m.emit("error",R)}m.attachListeners(m.stream),m.stream.on("error",f),m.emit("sslconnect")})}attachListeners(g){g.on("end",()=>{this.emit("end")}),n(g,v=>{var m=v.name==="error"?"errorMessage":v.name;this._emitMessage&&this.emit("message",v),this.emit(m,v)})}requestSsl(){this.stream.write(i.requestSsl())}startup(g){this.stream.write(i.startup(g))}cancel(g,v){this._send(i.cancel(g,v))}password(g){this._send(i.password(g))}sendSASLInitialResponseMessage(g,v){this._send(i.sendSASLInitialResponseMessage(g,v))}sendSCRAMClientFinalMessage(g){this._send(i.sendSCRAMClientFinalMessage(g))}_send(g){return this.stream.writable?this.stream.write(g):!1}query(g){this._send(i.query(g))}parse(g){this._send(i.parse(g))}bind(g){this._send(i.bind(g))}execute(g){this._send(i.execute(g))}flush(){this.stream.writable&&this.stream.write(o)}sync(){this._ending=!0,this._send(o),this._send(a)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(c,()=>{this.stream.end()})}close(g){this._send(i.close(g))}describe(g){this._send(i.describe(g))}sendCopyFromChunk(g){this._send(i.copyData(g))}endCopyFrom(){this._send(i.copyDone())}sendCopyFail(g){this._send(i.copyFail(g))}};b(h,"Connection");var l=h;e.exports=l}),n0=de((r,e)=>{"use strict";te();var t=nr().EventEmitter,s=(_n(),qe(Ss)),n=xn(),i=Vy(),o=Ky(),a=co(),c=fo(),h=Jy(),l=En(),p=cl(),g=class extends t{constructor(f){super(),this.connectionParameters=new c(f),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var w=f||{};this._Promise=w.Promise||wn.Promise,this._types=new a(w.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=w.connection||new p({stream:w.stream,ssl:this.connectionParameters.ssl,keepAlive:w.keepAlive||!1,keepAliveInitialDelayMillis:w.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=w.binary||l.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=w.connectionTimeoutMillis||0}_errorAllQueries(f){let w=b(_=>{he.nextTick(()=>{_.handleError(f,this.connection)})},"enqueueError");this.activeQuery&&(w(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(w),this.queryQueue.length=0}_connect(f){var w=this,_=this.connection;if(this._connectionCallback=f,this._connecting||this._connected){let S=new Error("Client has already been connected. You cannot reuse a client.");he.nextTick(()=>{f(S)});return}this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{_._ending=!0,_.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&this.host.indexOf("/")===0?_.connect(this.host+"/.s.PGSQL."+this.port):_.connect(this.port,this.host),_.on("connect",function(){w.ssl?_.requestSsl():_.startup(w.getStartupConf())}),_.on("sslconnect",function(){_.startup(w.getStartupConf())}),this._attachListeners(_),_.once("end",()=>{let S=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(S),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(S):this._handleErrorEvent(S):this._connectionError||this._handleErrorEvent(S)),he.nextTick(()=>{this.emit("end")})})}connect(f){if(f){this._connect(f);return}return new this._Promise((w,_)=>{this._connect(S=>{S?_(S):w()})})}_attachListeners(f){f.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),f.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),f.on("authenticationSASL",this._handleAuthSASL.bind(this)),f.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),f.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),f.on("backendKeyData",this._handleBackendKeyData.bind(this)),f.on("error",this._handleErrorEvent.bind(this)),f.on("errorMessage",this._handleErrorMessage.bind(this)),f.on("readyForQuery",this._handleReadyForQuery.bind(this)),f.on("notice",this._handleNotice.bind(this)),f.on("rowDescription",this._handleRowDescription.bind(this)),f.on("dataRow",this._handleDataRow.bind(this)),f.on("portalSuspended",this._handlePortalSuspended.bind(this)),f.on("emptyQuery",this._handleEmptyQuery.bind(this)),f.on("commandComplete",this._handleCommandComplete.bind(this)),f.on("parseComplete",this._handleParseComplete.bind(this)),f.on("copyInResponse",this._handleCopyInResponse.bind(this)),f.on("copyData",this._handleCopyData.bind(this)),f.on("notification",this._handleNotification.bind(this))}_checkPgPass(f){let w=this.connection;typeof this.password=="function"?this._Promise.resolve().then(()=>this.password()).then(_=>{if(_!==void 0){if(typeof _!="string"){w.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=_}else this.connectionParameters.password=this.password=null;f()}).catch(_=>{w.emit("error",_)}):this.password!==null?f():o(this.connectionParameters,_=>{_!==void 0&&(this.connectionParameters.password=this.password=_),f()})}_handleAuthCleartextPassword(f){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(f){this._checkPgPass(()=>{let w=n.postgresMd5PasswordHash(this.user,this.password,f.salt);this.connection.password(w)})}_handleAuthSASL(f){this._checkPgPass(()=>{this.saslSession=i.startSession(f.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(f){i.continueSession(this.saslSession,this.password,f.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(f){i.finalizeSession(this.saslSession,f.data),this.saslSession=null}_handleBackendKeyData(f){this.processID=f.processID,this.secretKey=f.secretKey}_handleReadyForQuery(f){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:w}=this;this.activeQuery=null,this.readyForQuery=!0,w&&w.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(f){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(f);this.emit("error",f)}}_handleErrorEvent(f){if(this._connecting)return this._handleErrorWhileConnecting(f);this._queryable=!1,this._errorAllQueries(f),this.emit("error",f)}_handleErrorMessage(f){if(this._connecting)return this._handleErrorWhileConnecting(f);let w=this.activeQuery;if(!w){this._handleErrorEvent(f);return}this.activeQuery=null,w.handleError(f,this.connection)}_handleRowDescription(f){this.activeQuery.handleRowDescription(f)}_handleDataRow(f){this.activeQuery.handleDataRow(f)}_handlePortalSuspended(f){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(f){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(f){this.activeQuery.handleCommandComplete(f,this.connection)}_handleParseComplete(f){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(f){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(f){this.activeQuery.handleCopyData(f,this.connection)}_handleNotification(f){this.emit("notification",f)}_handleNotice(f){this.emit("notice",f)}getStartupConf(){var f=this.connectionParameters,w={user:f.user,database:f.database},_=f.application_name||f.fallback_application_name;return _&&(w.application_name=_),f.replication&&(w.replication=""+f.replication),f.statement_timeout&&(w.statement_timeout=String(parseInt(f.statement_timeout,10))),f.lock_timeout&&(w.lock_timeout=String(parseInt(f.lock_timeout,10))),f.idle_in_transaction_session_timeout&&(w.idle_in_transaction_session_timeout=String(parseInt(f.idle_in_transaction_session_timeout,10))),f.options&&(w.options=f.options),w}cancel(f,w){if(f.activeQuery===w){var _=this.connection;this.host&&this.host.indexOf("/")===0?_.connect(this.host+"/.s.PGSQL."+this.port):_.connect(this.port,this.host),_.on("connect",function(){_.cancel(f.processID,f.secretKey)})}else f.queryQueue.indexOf(w)!==-1&&f.queryQueue.splice(f.queryQueue.indexOf(w),1)}setTypeParser(f,w,_){return this._types.setTypeParser(f,w,_)}getTypeParser(f,w){return this._types.getTypeParser(f,w)}escapeIdentifier(f){return'"'+f.replace(/"/g,'""')+'"'}escapeLiteral(f){for(var w=!1,_="'",S=0;S<f.length;S++){var x=f[S];x==="'"?_+=x+x:x==="\\"?(_+=x+x,w=!0):_+=x}return _+="'",w===!0&&(_=" E"+_),_}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let f=this.activeQuery.submit(this.connection);f&&he.nextTick(()=>{this.activeQuery.handleError(f,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(f,w,_){var S,x,R,L,E;if(f==null)throw new TypeError("Client was passed a null or undefined query");return typeof f.submit=="function"?(R=f.query_timeout||this.connectionParameters.query_timeout,x=S=f,typeof w=="function"&&(S.callback=S.callback||w)):(R=this.connectionParameters.query_timeout,S=new h(f,w,_),S.callback||(x=new this._Promise((P,I)=>{S.callback=(C,B)=>C?I(C):P(B)}))),R&&(E=S.callback,L=setTimeout(()=>{var P=new Error("Query read timeout");he.nextTick(()=>{S.handleError(P,this.connection)}),E(P),S.callback=()=>{};var I=this.queryQueue.indexOf(S);I>-1&&this.queryQueue.splice(I,1),this._pulseQueryQueue()},R),S.callback=(P,I)=>{clearTimeout(L),E(P,I)}),this.binary&&!S.binary&&(S.binary=!0),S._result&&!S._result._types&&(S._result._types=this._types),this._queryable?this._ending?(he.nextTick(()=>{S.handleError(new Error("Client was closed and is not queryable"),this.connection)}),x):(this.queryQueue.push(S),this._pulseQueryQueue(),x):(he.nextTick(()=>{S.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),x)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(f){if(this._ending=!0,!this.connection._connecting)if(f)f();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),f)this.connection.once("end",f);else return new this._Promise(w=>{this.connection.once("end",w)})}};b(g,"Client");var v=g;v.Query=h,e.exports=v}),i0=de((r,e)=>{"use strict";te();var t=nr().EventEmitter,s=b(function(){},"NOOP"),n=b((m,f)=>{let w=m.findIndex(f);return w===-1?void 0:m.splice(w,1)[0]},"removeWhere"),i=class{constructor(f,w,_){this.client=f,this.idleListener=w,this.timeoutId=_}};b(i,"IdleItem");var o=i,a=class{constructor(f){this.callback=f}};b(a,"PendingItem");var c=a;function h(){throw new Error("Release called on client which has already been released to the pool.")}b(h,"throwOnDoubleRelease");function l(m,f){if(f)return{callback:f,result:void 0};let w,_,S=b(function(R,L){R?w(R):_(L)},"cb"),x=new m(function(R,L){_=R,w=L}).catch(R=>{throw Error.captureStackTrace(R),R});return{callback:S,result:x}}b(l,"promisify");function p(m,f){return b(function w(_){_.client=f,f.removeListener("error",w),f.on("error",()=>{m.log("additional client error after disconnection due to error",_)}),m._remove(f),m.emit("error",_,f)},"idleListener")}b(p,"makeIdleListener");var g=class extends t{constructor(f,w){super(),this.options=Object.assign({},f),f!=null&&"password"in f&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:f.password}),f!=null&&f.ssl&&f.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||w||po().Client,this.Promise=this.options.Promise||wn.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(w=>{this._remove(w.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let f=this._pendingQueue.shift();if(this._idle.length){let w=this._idle.pop();clearTimeout(w.timeoutId);let _=w.client;_.ref&&_.ref();let S=w.idleListener;return this._acquireClient(_,f,S,!1)}if(!this._isFull())return this.newClient(f);throw new Error("unexpected condition")}_remove(f){let w=n(this._idle,_=>_.client===f);w!==void 0&&clearTimeout(w.timeoutId),this._clients=this._clients.filter(_=>_!==f),f.end(),this.emit("remove",f)}connect(f){if(this.ending){let S=new Error("Cannot use a pool after calling end on the pool");return f?f(S):this.Promise.reject(S)}let w=l(this.Promise,f),_=w.result;if(this._isFull()||this._idle.length){if(this._idle.length&&he.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new c(w.callback)),_;let S=b((L,E,P)=>{clearTimeout(R),w.callback(L,E,P)},"queueCallback"),x=new c(S),R=setTimeout(()=>{n(this._pendingQueue,L=>L.callback===S),x.timedOut=!0,w.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(x),_}return this.newClient(new c(w.callback)),_}newClient(f){let w=new this.Client(this.options);this._clients.push(w);let _=p(this,w);this.log("checking client timeout");let S,x=!1;this.options.connectionTimeoutMillis&&(S=setTimeout(()=>{this.log("ending client due to timeout"),x=!0,w.connection?w.connection.stream.destroy():w.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),w.connect(R=>{if(S&&clearTimeout(S),w.on("error",_),R)this.log("client failed to connect",R),this._clients=this._clients.filter(L=>L!==w),x&&(R.message="Connection terminated due to connection timeout"),this._pulseQueue(),f.timedOut||f.callback(R,void 0,s);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let L=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(w),this._idle.findIndex(E=>E.client===w)!==-1&&this._acquireClient(w,new c((E,P,I)=>I()),_,!1)},this.options.maxLifetimeSeconds*1e3);L.unref(),w.once("end",()=>clearTimeout(L))}return this._acquireClient(w,f,_,!0)}})}_acquireClient(f,w,_,S){S&&this.emit("connect",f),this.emit("acquire",f),f.release=this._releaseOnce(f,_),f.removeListener("error",_),w.timedOut?S&&this.options.verify?this.options.verify(f,f.release):f.release():S&&this.options.verify?this.options.verify(f,x=>{if(x)return f.release(x),w.callback(x,void 0,s);w.callback(void 0,f,f.release)}):w.callback(void 0,f,f.release)}_releaseOnce(f,w){let _=!1;return S=>{_&&h(),_=!0,this._release(f,w,S)}}_release(f,w,_){if(f.on("error",w),f._poolUseCount=(f._poolUseCount||0)+1,this.emit("release",_,f),_||this.ending||!f._queryable||f._ending||f._poolUseCount>=this.options.maxUses){f._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(f),this._pulseQueue();return}if(this._expired.has(f)){this.log("remove expired client"),this._expired.delete(f),this._remove(f),this._pulseQueue();return}let S;this.options.idleTimeoutMillis&&(S=setTimeout(()=>{this.log("remove idle client"),this._remove(f)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&S.unref()),this.options.allowExitOnIdle&&f.unref(),this._idle.push(new o(f,w,S)),this._pulseQueue()}query(f,w,_){if(typeof f=="function"){let x=l(this.Promise,f);return no(function(){return x.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),x.result}typeof w=="function"&&(_=w,w=void 0);let S=l(this.Promise,_);return _=S.callback,this.connect((x,R)=>{if(x)return _(x);let L=!1,E=b(P=>{L||(L=!0,R.release(P),_(P))},"onError");R.once("error",E),this.log("dispatching query");try{R.query(f,w,(P,I)=>{if(this.log("query dispatched"),R.removeListener("error",E),!L)return L=!0,R.release(P),P?_(P):_(void 0,I)})}catch(P){return R.release(P),_(P)}}),S.result}end(f){if(this.log("ending"),this.ending){let _=new Error("Called end on pool more than once");return f?f(_):this.Promise.reject(_)}this.ending=!0;let w=l(this.Promise,f);return this._endCallback=w.callback,this._pulseQueue(),w.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((f,w)=>f+(this._expired.has(w)?1:0),0)}get totalCount(){return this._clients.length}};b(g,"Pool");var v=g;e.exports=v}),ll={};mt(ll,{default:()=>fl});var fl,o0=Ze(()=>{"use strict";te(),fl={}}),a0=de((r,e)=>{e.exports={name:"pg",version:"8.8.0",description:"PostgreSQL client - pure javascript & libpq with the same API",keywords:["database","libpq","pg","postgre","postgres","postgresql","rdbms"],homepage:"https://github.com/brianc/node-postgres",repository:{type:"git",url:"git://github.com/brianc/node-postgres.git",directory:"packages/pg"},author:"Brian Carlson <brian.m.carlson@gmail.com>",main:"./lib",dependencies:{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.2","pg-protocol":"^1.5.0","pg-types":"^2.1.0",pgpass:"1.x"},devDependencies:{async:"2.6.4",bluebird:"3.5.2",co:"4.6.0","pg-copy-streams":"0.3.0"},peerDependencies:{"pg-native":">=3.0.1"},peerDependenciesMeta:{"pg-native":{optional:!0}},scripts:{test:"make test-all"},files:["lib","SPONSORS.md"],license:"MIT",engines:{node:">= 8.0.0"},gitHead:"c99fb2c127ddf8d712500db2c7b9a5491a178655"}}),u0=de((r,e)=>{"use strict";te();var t=nr().EventEmitter,s=(_n(),qe(Ss)),n=xn(),i=e.exports=function(a,c,h){t.call(this),a=n.normalizeQueryConfig(a,c,h),this.text=a.text,this.values=a.values,this.name=a.name,this.callback=a.callback,this.state="new",this._arrayMode=a.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(l){l==="row"&&(this._emitRowEvents=!0)}.bind(this))};s.inherits(i,t);var o={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};i.prototype.handleError=function(a){var c=this.native.pq.resultErrorFields();if(c)for(var h in c){var l=o[h]||h;a[l]=c[h]}this.callback?this.callback(a):this.emit("error",a),this.state="error"},i.prototype.then=function(a,c){return this._getPromise().then(a,c)},i.prototype.catch=function(a){return this._getPromise().catch(a)},i.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(a,c){this._once("end",a),this._once("error",c)}.bind(this)),this._promise)},i.prototype.submit=function(a){this.state="running";var c=this;this.native=a.native,a.native.arrayMode=this._arrayMode;var h=b(function(g,v,m){if(a.native.arrayMode=!1,no(function(){c.emit("_done")}),g)return c.handleError(g);c._emitRowEvents&&(m.length>1?v.forEach((f,w)=>{f.forEach(_=>{c.emit("row",_,m[w])})}):v.forEach(function(f){c.emit("row",f,m)})),c.state="end",c.emit("end",m),c.callback&&c.callback(null,m)},"after");if(he.domain&&(h=he.domain.bind(h)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var l=(this.values||[]).map(n.prepareValue);if(a.namedQueries[this.name]){if(this.text&&a.namedQueries[this.name]!==this.text){let g=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return h(g)}return a.native.execute(this.name,l,h)}return a.native.prepare(this.name,this.text,l.length,function(g){return g?h(g):(a.namedQueries[c.name]=c.text,c.native.execute(c.name,l,h))})}else if(this.values){if(!Array.isArray(this.values)){let g=new Error("Query values must be an array");return h(g)}var p=this.values.map(n.prepareValue);a.native.query(this.text,p,h)}else a.native.query(this.text,h)}}),c0=de((r,e)=>{"use strict";te();var t=(o0(),qe(ll)),s=co(),n=a0(),i=nr().EventEmitter,o=(_n(),qe(Ss)),a=fo(),c=u0(),h=e.exports=function(l){i.call(this),l=l||{},this._Promise=l.Promise||wn.Promise,this._types=new s(l.types),this.native=new t({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var p=this.connectionParameters=new a(l);this.user=p.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:p.password}),this.database=p.database,this.host=p.host,this.port=p.port,this.namedQueries={}};h.Query=c,o.inherits(h,i),h.prototype._errorAllQueries=function(l){let p=b(g=>{he.nextTick(()=>{g.native=this.native,g.handleError(l)})},"enqueueError");this._hasActiveQuery()&&(p(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(p),this._queryQueue.length=0},h.prototype._connect=function(l){var p=this;if(this._connecting){he.nextTick(()=>l(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(g,v){if(g)return l(g);p.native.connect(v,function(m){if(m)return p.native.end(),l(m);p._connected=!0,p.native.on("error",function(f){p._queryable=!1,p._errorAllQueries(f),p.emit("error",f)}),p.native.on("notification",function(f){p.emit("notification",{channel:f.relname,payload:f.extra})}),p.emit("connect"),p._pulseQueryQueue(!0),l()})})},h.prototype.connect=function(l){if(l){this._connect(l);return}return new this._Promise((p,g)=>{this._connect(v=>{v?g(v):p()})})},h.prototype.query=function(l,p,g){var v,m,f,w,_;if(l==null)throw new TypeError("Client was passed a null or undefined query");if(typeof l.submit=="function")f=l.query_timeout||this.connectionParameters.query_timeout,m=v=l,typeof p=="function"&&(l.callback=p);else if(f=this.connectionParameters.query_timeout,v=new c(l,p,g),!v.callback){let S,x;m=new this._Promise((R,L)=>{S=R,x=L}),v.callback=(R,L)=>R?x(R):S(L)}return f&&(_=v.callback,w=setTimeout(()=>{var S=new Error("Query read timeout");he.nextTick(()=>{v.handleError(S,this.connection)}),_(S),v.callback=()=>{};var x=this._queryQueue.indexOf(v);x>-1&&this._queryQueue.splice(x,1),this._pulseQueryQueue()},f),v.callback=(S,x)=>{clearTimeout(w),_(S,x)}),this._queryable?this._ending?(v.native=this.native,he.nextTick(()=>{v.handleError(new Error("Client was closed and is not queryable"))}),m):(this._queryQueue.push(v),this._pulseQueryQueue(),m):(v.native=this.native,he.nextTick(()=>{v.handleError(new Error("Client has encountered a connection error and is not queryable"))}),m)},h.prototype.end=function(l){var p=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,l));var g;return l||(g=new this._Promise(function(v,m){l=b(f=>f?m(f):v(),"cb")})),this.native.end(function(){p._errorAllQueries(new Error("Connection terminated")),he.nextTick(()=>{p.emit("end"),l&&l()})}),g},h.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"},h.prototype._pulseQueryQueue=function(l){if(this._connected&&!this._hasActiveQuery()){var p=this._queryQueue.shift();if(!p){l||this.emit("drain");return}this._activeQuery=p,p.submit(this);var g=this;p.once("_done",function(){g._pulseQueryQueue()})}},h.prototype.cancel=function(l){this._activeQuery===l?this.native.cancel(function(){}):this._queryQueue.indexOf(l)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(l),1)},h.prototype.ref=function(){},h.prototype.unref=function(){},h.prototype.setTypeParser=function(l,p,g){return this._types.setTypeParser(l,p,g)},h.prototype.getTypeParser=function(l,p){return this._types.getTypeParser(l,p)}}),kc=de((r,e)=>{"use strict";te(),e.exports=c0()}),po=de((r,e)=>{"use strict";te();var t=n0(),s=En(),n=cl(),i=i0(),{DatabaseError:o}=ol(),a=b(h=>{var l;return l=class extends i{constructor(p){super(p,h)}},b(l,"BoundPool"),l},"poolFactory"),c=b(function(h){this.defaults=s,this.Client=h,this.Query=this.Client.Query,this.Pool=a(this.Client),this._pools=[],this.Connection=n,this.types=Sn(),this.DatabaseError=o},"PG");typeof he.env.NODE_PG_FORCE_NATIVE<"u"?e.exports=new c(kc()):(e.exports=new c(t),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var h=null;try{h=new c(kc())}catch(l){if(l.code!=="MODULE_NOT_FOUND")throw l}return Object.defineProperty(e.exports,"native",{value:h}),h}}))});te();var hl=Mr(po());ho();te();ho();rl();var l0=Mr(xn()),f0=Mr(co());function dl(r){return r instanceof ie?"\\x"+r.toString("hex"):r}b(dl,"encodeBuffersAsBytea");var pl=class ml extends Error{constructor(e){super(e),oe(this,"name","NeonDbError"),oe(this,"severity"),oe(this,"code"),oe(this,"detail"),oe(this,"hint"),oe(this,"position"),oe(this,"internalPosition"),oe(this,"internalQuery"),oe(this,"where"),oe(this,"schema"),oe(this,"table"),oe(this,"column"),oe(this,"dataType"),oe(this,"constraint"),oe(this,"file"),oe(this,"line"),oe(this,"routine"),oe(this,"sourceError"),"captureStackTrace"in Error&&typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ml)}};b(pl,"NeonDbError");var $r=pl,$c="transaction() expects an array of queries, or a function returning an array of queries",h0=["severity","code","detail","hint","position","internalPosition","internalQuery","where","schema","table","column","dataType","constraint","file","line","routine"];function gl(r,{arrayMode:e,fullResults:t,fetchOptions:s,isolationLevel:n,readOnly:i,deferrable:o,queryCallback:a,resultCallback:c,authToken:h}={}){if(!r)throw new Error("No database connection string was provided to `neon()`. Perhaps an environment variable has not been set?");let l;try{l=lo(r)}catch{throw new Error("Database connection string provided to `neon()` is not a valid URL. Connection string: "+String(r))}let{protocol:p,username:g,hostname:v,port:m,pathname:f}=l;if(p!=="postgres:"&&p!=="postgresql:"||!g||!v||!f)throw new Error("Database connection string format for `neon()` should be: postgresql://user:password@host.tld/dbname?option=value");function w(S,...x){let R,L;if(typeof S=="string")R=S,L=x[1],x=x[0]??[];else{R="";for(let P=0;P<S.length;P++)R+=S[P],P<x.length&&(R+="$"+(P+1))}x=x.map(P=>dl((0,l0.prepareValue)(P)));let E={query:R,params:x};return a&&a(E),yl(_,E,L)}b(w,"resolve"),w.transaction=async(S,x)=>{if(typeof S=="function"&&(S=S(w)),!Array.isArray(S))throw new Error($c);S.forEach(E=>{if(E[Symbol.toStringTag]!=="NeonQueryPromise")throw new Error($c)});let R=S.map(E=>E.parameterizedQuery),L=S.map(E=>E.opts??{});return _(R,L,x)};async function _(S,x,R){let{fetchEndpoint:L,fetchFunction:E}=Ot,P=Array.isArray(S)?{queries:S}:S,I=s??{},C=e??!1,B=t??!1,$=n,H=i,Z=o;R!==void 0&&(R.fetchOptions!==void 0&&(I={...I,...R.fetchOptions}),R.arrayMode!==void 0&&(C=R.arrayMode),R.fullResults!==void 0&&(B=R.fullResults),R.isolationLevel!==void 0&&($=R.isolationLevel),R.readOnly!==void 0&&(H=R.readOnly),R.deferrable!==void 0&&(Z=R.deferrable)),x!==void 0&&!Array.isArray(x)&&x.fetchOptions!==void 0&&(I={...I,...x.fetchOptions});let k=h;!Array.isArray(x)&&x?.authToken!==void 0&&(k=x.authToken);let Q=typeof L=="function"?L(v,m,{jwtAuth:k!==void 0}):L,ee={"Neon-Connection-String":r,"Neon-Raw-Text-Output":"true","Neon-Array-Mode":"true"},ae=await bl(k);ae&&(ee.Authorization=`Bearer ${ae}`),Array.isArray(S)&&($!==void 0&&(ee["Neon-Batch-Isolation-Level"]=$),H!==void 0&&(ee["Neon-Batch-Read-Only"]=String(H)),Z!==void 0&&(ee["Neon-Batch-Deferrable"]=String(Z)));let ge;try{ge=await(E??fetch)(Q,{method:"POST",body:JSON.stringify(P),headers:ee,...I})}catch(be){let Be=new $r(`Error connecting to database: ${be.message}`);throw Be.sourceError=be,Be}if(ge.ok){let be=await ge.json();if(Array.isArray(S)){let Be=be.results;if(!Array.isArray(Be))throw new $r("Neon internal error: unexpected result format");return Be.map((we,Ne)=>{let rr=x[Ne]??{},ys=rr.arrayMode??C,bs=rr.fullResults??B;return so(we,{arrayMode:ys,fullResults:bs,parameterizedQuery:S[Ne],resultCallback:c,types:rr.types})})}else{let Be=x??{},we=Be.arrayMode??C,Ne=Be.fullResults??B;return so(be,{arrayMode:we,fullResults:Ne,parameterizedQuery:S,resultCallback:c,types:Be.types})}}else{let{status:be}=ge;if(be===400){let Be=await ge.json(),we=new $r(Be.message);for(let Ne of h0)we[Ne]=Be[Ne]??void 0;throw we}else{let Be=await ge.text();throw new $r(`Server error (HTTP status ${be}): ${Be}`)}}}return b(_,"execute"),w}b(gl,"neon");function yl(r,e,t){return{[Symbol.toStringTag]:"NeonQueryPromise",parameterizedQuery:e,opts:t,then:b((s,n)=>r(e,t).then(s,n),"then"),catch:b(s=>r(e,t).catch(s),"catch"),finally:b(s=>r(e,t).finally(s),"finally")}}b(yl,"createNeonQueryPromise");function so(r,{arrayMode:e,fullResults:t,parameterizedQuery:s,resultCallback:n,types:i}){let o=new f0.default(i),a=r.fields.map(l=>l.name),c=r.fields.map(l=>o.getTypeParser(l.dataTypeID)),h=e===!0?r.rows.map(l=>l.map((p,g)=>p===null?null:c[g](p))):r.rows.map(l=>Object.fromEntries(l.map((p,g)=>[a[g],p===null?null:c[g](p)])));return n&&n(s,r,h,{arrayMode:e,fullResults:t}),t?(r.viaNeonFetch=!0,r.rowAsArray=e,r.rows=h,r._parsers=c,r._types=o,r):h}b(so,"processQueryResult");async function bl(r){if(typeof r=="string")return r;if(typeof r=="function")try{return await Promise.resolve(r())}catch(e){let t=new $r("Error getting auth token.");throw e instanceof Error&&(t=new $r(`Error getting auth token: ${e.message}`)),t}}b(bl,"getAuthToken");var d0=Mr(fo()),qr=Mr(po()),vl=class extends hl.Client{constructor(e){super(e),this.config=e}get neonConfig(){return this.connection.stream}connect(e){let{neonConfig:t}=this;t.forceDisablePgSSL&&(this.ssl=this.connection.ssl=!1),this.ssl&&t.useSecureWebSocket&&console.warn("SSL is enabled for both Postgres (e.g. ?sslmode=require in the connection string + forceDisablePgSSL = false) and the WebSocket tunnel (useSecureWebSocket = true). Double encryption will increase latency and CPU usage. It may be appropriate to disable SSL in the Postgres connection parameters or set forceDisablePgSSL = true.");let s=this.config?.host!==void 0||this.config?.connectionString!==void 0||he.env.PGHOST!==void 0,n=he.env.USER??he.env.USERNAME;if(!s&&this.host==="localhost"&&this.user===n&&this.database===n&&this.password===null)throw new Error(`No database host or connection string was set, and key parameters have default values (host: localhost, user: ${n}, db: ${n}, password: null). Is an environment variable missing? Alternatively, if you intended to connect with these parameters, please set the host to 'localhost' explicitly.`);let i=super.connect(e),o=t.pipelineTLS&&this.ssl,a=t.pipelineConnect==="password";if(!o&&!t.pipelineConnect)return i;let c=this.connection;if(o&&c.on("connect",()=>c.stream.emit("data","S")),a){c.removeAllListeners("authenticationCleartextPassword"),c.removeAllListeners("readyForQuery"),c.once("readyForQuery",()=>c.on("readyForQuery",this._handleReadyForQuery.bind(this)));let h=this.ssl?"sslconnect":"connect";c.on(h,()=>{this._handleAuthCleartextPassword(),this._handleReadyForQuery()})}return i}async _handleAuthSASLContinue(e){let t=this.saslSession,s=this.password,n=e.data;if(t.message!=="SASLInitialResponse"||typeof s!="string"||typeof n!="string")throw new Error("SASL: protocol error");let i=Object.fromEntries(n.split(",").map(ae=>{if(!/^.=/.test(ae))throw new Error("SASL: Invalid attribute pair entry");let ge=ae[0],be=ae.substring(2);return[ge,be]})),o=i.r,a=i.s,c=i.i;if(!o||!/^[!-+--~]+$/.test(o))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing/unprintable");if(!a||!/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(a))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing/not base64");if(!c||!/^[1-9][0-9]*$/.test(c))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: missing/invalid iteration count");if(!o.startsWith(t.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(o.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");let h=parseInt(c,10),l=ie.from(a,"base64"),p=new TextEncoder,g=p.encode(s),v=await Fe.subtle.importKey("raw",g,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),m=new Uint8Array(await Fe.subtle.sign("HMAC",v,ie.concat([l,ie.from([0,0,0,1])]))),f=m;for(var w=0;w<h-1;w++)m=new Uint8Array(await Fe.subtle.sign("HMAC",v,m)),f=ie.from(f.map((ae,ge)=>f[ge]^m[ge]));let _=f,S=await Fe.subtle.importKey("raw",_,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),x=new Uint8Array(await Fe.subtle.sign("HMAC",S,p.encode("Client Key"))),R=await Fe.subtle.digest("SHA-256",x),L="n=*,r="+t.clientNonce,E="r="+o+",s="+a+",i="+h,P="c=biws,r="+o,I=L+","+E+","+P,C=await Fe.subtle.importKey("raw",R,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var B=new Uint8Array(await Fe.subtle.sign("HMAC",C,p.encode(I))),$=ie.from(x.map((ae,ge)=>x[ge]^B[ge])),H=$.toString("base64");let Z=await Fe.subtle.importKey("raw",_,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),k=await Fe.subtle.sign("HMAC",Z,p.encode("Server Key")),Q=await Fe.subtle.importKey("raw",k,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);var ee=ie.from(await Fe.subtle.sign("HMAC",Q,p.encode(I)));t.message="SASLResponse",t.serverSignature=ee.toString("base64"),t.response=P+",p="+H,this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}};b(vl,"NeonClient");var p0=vl;function wl(r,e){if(e)return{callback:e,result:void 0};let t,s,n=b(function(o,a){o?t(o):s(a)},"cb"),i=new r(function(o,a){s=o,t=a});return{callback:n,result:i}}b(wl,"promisify");var _l=class extends hl.Pool{constructor(){super(...arguments),oe(this,"Client",p0),oe(this,"hasFetchUnsupportedListeners",!1)}on(e,t){return e!=="error"&&(this.hasFetchUnsupportedListeners=!0),super.on(e,t)}query(e,t,s){if(!Ot.poolQueryViaFetch||this.hasFetchUnsupportedListeners||typeof e=="function")return super.query(e,t,s);typeof t=="function"&&(s=t,t=void 0);let n=wl(this.Promise,s);s=n.callback;try{let i=new d0.default(this.options),o=encodeURIComponent,a=encodeURI,c=`postgresql://${o(i.user)}:${o(i.password)}@${o(i.host)}/${a(i.database)}`,h=typeof e=="string"?e:e.text,l=t??e.values??[];gl(c,{fullResults:!0,arrayMode:e.rowMode==="array"})(h,l,{types:e.types??this.options?.types}).then(p=>s(void 0,p)).catch(p=>s(p))}catch(i){s(i)}return n.result}};b(_l,"NeonPool");var Rt=_l,fC=qr.ClientBase,hC=qr.Connection,dC=qr.DatabaseError,pC=qr.Query,mC=qr.defaults,gt=qr.types;var T=Symbol.for("drizzle:entityKind"),vC=Symbol.for("drizzle:hasOwnEntityKind");function M(r,e){if(!r||typeof r!="object")return!1;if(r instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,T))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let t=Object.getPrototypeOf(r).constructor;if(t)for(;t;){if(T in t&&t[T]===e[T])return!0;t=Object.getPrototypeOf(t)}return!1}var mo=class{static[T]="ConsoleLogWriter";write(e){console.log(e)}},Tn=class{static[T]="DefaultLogger";writer;constructor(e){this.writer=e?.writer??new mo}logQuery(e,t){let s=t.map(i=>{try{return JSON.stringify(i)}catch{return String(i)}}),n=s.length?` -- params: [${s.join(", ")}]`:"";this.writer.write(`Query: ${e}${n}`)}},Cn=class{static[T]="NoopLogger";logQuery(){}};var Ue=class{static[T]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}then(e,t){return this.execute().then(e,t)}};var ye=class{constructor(e,t){this.table=e,this.config=t,this.name=t.name,this.keyAsName=t.keyAsName,this.notNull=t.notNull,this.default=t.default,this.defaultFn=t.defaultFn,this.onUpdateFn=t.onUpdateFn,this.hasDefault=t.hasDefault,this.primary=t.primaryKey,this.isUnique=t.isUnique,this.uniqueName=t.uniqueName,this.uniqueType=t.uniqueType,this.dataType=t.dataType,this.columnType=t.columnType,this.generated=t.generated,this.generatedIdentity=t.generatedIdentity}static[T]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}};var Nn=class{static[T]="ColumnBuilder";config;constructor(e,t,s){this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:t,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}};var yt=Symbol.for("drizzle:Name");var An=class{static[T]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(e,t){this.reference=()=>{let{name:s,columns:n,foreignColumns:i}=e();return{name:s,columns:n,foreignTable:i[0].table,foreignColumns:i}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new go(e,this)}},go=class{constructor(e,t){this.table=e,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[T]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:e,columns:t,foreignColumns:s}=this.reference(),n=t.map(a=>a.name),i=s.map(a=>a.name),o=[this.table[yt],...n,s[0].table[yt],...i];return e??`${o.join("_")}_fk`}};function In(r,...e){return r(...e)}function vo(r,e){return`${r[yt]}_${e.join("_")}_unique`}var yo=class{constructor(e,t){this.name=t,this.columns=e}static[T]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(e){return new bo(e,this.columns,this.nullsNotDistinctConfig,this.name)}},Sl=class{static[T]="PgUniqueOnConstraintBuilder";name;constructor(e){this.name=e}on(...e){return new yo(e,this.name)}},bo=class{constructor(e,t,s,n){this.table=e,this.columns=t,this.name=n??vo(this.table,this.columns.map(i=>i.name)),this.nullsNotDistinct=s}static[T]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}};function El(r,e,t){for(let s=e;s<r.length;s++){let n=r[s];if(n==="\\"){s++;continue}if(n==='"')return[r.slice(e,s).replace(/\\/g,""),s+1];if(!t&&(n===","||n==="}"))return[r.slice(e,s).replace(/\\/g,""),s]}return[r.slice(e).replace(/\\/g,""),r.length]}function xl(r,e=0){let t=[],s=e,n=!1;for(;s<r.length;){let i=r[s];if(i===","){(n||s===e)&&t.push(""),n=!0,s++;continue}if(n=!1,i==="\\"){s+=2;continue}if(i==='"'){let[c,h]=El(r,s+1,!0);t.push(c),s=h;continue}if(i==="}")return[t,s+1];if(i==="{"){let[c,h]=xl(r,s+1);t.push(c),s=h;continue}let[o,a]=El(r,s,!1);t.push(o),s=a}return[t,s]}function Tl(r){let[e]=xl(r,1);return e}function wo(r){return`{${r.map(e=>Array.isArray(e)?wo(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var J=class extends Nn{foreignKeyConfigs=[];static[T]="PgColumnBuilder";array(e){return new So(this.config.name,this,e)}references(e,t={}){return this.foreignKeyConfigs.push({ref:e,actions:t}),this}unique(e,t){return this.config.isUnique=!0,this.config.uniqueName=e,this.config.uniqueType=t?.nulls,this}generatedAlwaysAs(e){return this.config.generated={as:e,type:"always",mode:"stored"},this}buildForeignKeys(e,t){return this.foreignKeyConfigs.map(({ref:s,actions:n})=>In((i,o)=>{let a=new An(()=>{let c=i();return{columns:[e],foreignColumns:[c]}});return o.onUpdate&&a.onUpdate(o.onUpdate),o.onDelete&&a.onDelete(o.onDelete),a.build(t)},s,n))}buildExtraConfigColumn(e){return new _o(e,this.config)}},U=class extends ye{constructor(e,t){t.uniqueName||(t.uniqueName=vo(e,[t.name])),super(e,t),this.table=e}static[T]="PgColumn"},_o=class extends U{static[T]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(e){return this.indexConfig.opClass=e,this}},Cl=class{static[T]="IndexedColumn";constructor(e,t,s,n){this.name=e,this.keyAsName=t,this.type=s,this.indexConfig=n}name;keyAsName;type;indexConfig},So=class extends J{static[T]="PgArrayBuilder";constructor(e,t,s){super(e,"array","PgArray"),this.config.baseBuilder=t,this.config.size=s}build(e){let t=this.config.baseBuilder.build(e);return new Eo(e,this.config,t)}},Eo=class r extends U{constructor(e,t,s,n){super(e,t),this.baseColumn=s,this.range=n,this.size=t.size}size;static[T]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(e){return typeof e=="string"&&(e=Tl(e)),e.map(t=>this.baseColumn.mapFromDriverValue(t))}mapToDriverValue(e,t=!1){let s=e.map(n=>n===null?null:M(this.baseColumn,r)?this.baseColumn.mapToDriverValue(n,!0):this.baseColumn.mapToDriverValue(n));return t?s:wo(s)}};var Nl=Symbol.for("drizzle:isPgEnum");function Il(r){return!!r&&typeof r=="function"&&Nl in r&&r[Nl]===!0}var Al=class extends J{static[T]="PgEnumColumnBuilder";constructor(e,t){super(e,"string","PgEnumColumn"),this.config.enum=t}build(e){return new xo(e,this.config)}},xo=class extends U{static[T]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(e,t){super(e,t),this.enum=t.enum}getSQLType(){return this.enum.enumName}};var Le=class{static[T]="Subquery";constructor(e,t,s,n=!1){this._={brand:"Subquery",sql:e,selectedFields:t,alias:s,isWith:n}}},Dr=class extends Le{static[T]="WithSubquery"};var Pl="0.39.1";var To,Co,ke={startActiveSpan(r,e){return To?(Co||(Co=To.trace.getTracer("drizzle-orm",Pl)),In((t,s)=>s.startActiveSpan(r,n=>{try{return e(n)}catch(i){throw n.setStatus({code:t.SpanStatusCode.ERROR,message:i instanceof Error?i.message:"Unknown error"}),i}finally{n.end()}}),To,Co)):e()}};var ve=Symbol.for("drizzle:ViewBaseConfig");var Pn=Symbol.for("drizzle:Schema"),On=Symbol.for("drizzle:Columns"),Ol=Symbol.for("drizzle:ExtraConfigColumns"),No=Symbol.for("drizzle:OriginalName"),Ao=Symbol.for("drizzle:BaseName"),Es=Symbol.for("drizzle:IsAlias"),Rl=Symbol.for("drizzle:ExtraConfigBuilder"),Ll=Symbol.for("drizzle:IsDrizzleTable"),z=class{static[T]="Table";static Symbol={Name:yt,Schema:Pn,OriginalName:No,Columns:On,ExtraConfigColumns:Ol,BaseName:Ao,IsAlias:Es,ExtraConfigBuilder:Rl};[yt];[No];[Pn];[On];[Ol];[Ao];[Es]=!1;[Ll]=!0;[Rl]=void 0;constructor(e,t,s){this[yt]=this[No]=e,this[Pn]=t,this[Ao]=s}};function Io(r){return typeof r=="object"&&r!==null&&Ll in r}function Xe(r){return r[yt]}function ir(r){return`${r[Pn]??"public"}.${r[yt]}`}var kl=class{static[T]="FakePrimitiveParam"};function Po(r){return r!=null&&typeof r.getSQL=="function"}function m0(r){let e={sql:"",params:[]};for(let t of r)e.sql+=t.sql,e.params.push(...t.params),t.typings?.length&&(e.typings||(e.typings=[]),e.typings.push(...t.typings));return e}var $e=class{static[T]="StringChunk";value;constructor(e){this.value=Array.isArray(e)?e:[e]}getSQL(){return new X([this])}},X=class r{constructor(e){this.queryChunks=e}static[T]="SQL";decoder=Bl;shouldInlineParams=!1;append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return ke.startActiveSpan("drizzle.buildSQL",t=>{let s=this.buildQueryFromSourceParams(this.queryChunks,e);return t?.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(e,t){let s=Object.assign({},t,{inlineParams:t.inlineParams||this.shouldInlineParams,paramStartIndex:t.paramStartIndex||{value:0}}),{casing:n,escapeName:i,escapeParam:o,prepareTyping:a,inlineParams:c,paramStartIndex:h}=s;return m0(e.map(l=>{if(M(l,$e))return{sql:l.value.join(""),params:[]};if(M(l,xs))return{sql:i(l.value),params:[]};if(l===void 0)return{sql:"",params:[]};if(Array.isArray(l)){let p=[new $e("(")];for(let[g,v]of l.entries())p.push(v),g<l.length-1&&p.push(new $e(", "));return p.push(new $e(")")),this.buildQueryFromSourceParams(p,s)}if(M(l,r))return this.buildQueryFromSourceParams(l.queryChunks,{...s,inlineParams:c||l.shouldInlineParams});if(M(l,z)){let p=l[z.Symbol.Schema],g=l[z.Symbol.Name];return{sql:p===void 0||l[Es]?i(g):i(p)+"."+i(g),params:[]}}if(M(l,ye)){let p=n.getColumnCasing(l);if(t.invokeSource==="indexes")return{sql:i(p),params:[]};let g=l.table[z.Symbol.Schema];return{sql:l.table[Es]||g===void 0?i(l.table[z.Symbol.Name])+"."+i(p):i(g)+"."+i(l.table[z.Symbol.Name])+"."+i(p),params:[]}}if(M(l,We)){let p=l[ve].schema,g=l[ve].name;return{sql:p===void 0||l[ve].isAlias?i(g):i(p)+"."+i(g),params:[]}}if(M(l,Je)){if(M(l.value,Lt))return{sql:o(h.value++,l),params:[l],typings:["none"]};let p=l.value===null?null:l.encoder.mapToDriverValue(l.value);if(M(p,r))return this.buildQueryFromSourceParams([p],s);if(c)return{sql:this.mapInlineParam(p,s),params:[]};let g=["none"];return a&&(g=[a(l.encoder)]),{sql:o(h.value++,p),params:[p],typings:g}}return M(l,Lt)?{sql:o(h.value++,l),params:[l],typings:["none"]}:M(l,r.Aliased)&&l.fieldAlias!==void 0?{sql:i(l.fieldAlias),params:[]}:M(l,Le)?l._.isWith?{sql:i(l._.alias),params:[]}:this.buildQueryFromSourceParams([new $e("("),l._.sql,new $e(") "),new xs(l._.alias)],s):Il(l)?l.schema?{sql:i(l.schema)+"."+i(l.enumName),params:[]}:{sql:i(l.enumName),params:[]}:Po(l)?l.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([l.getSQL()],s):this.buildQueryFromSourceParams([new $e("("),l.getSQL(),new $e(")")],s):c?{sql:this.mapInlineParam(l,s),params:[]}:{sql:o(h.value++,l),params:[l],typings:["none"]}}))}mapInlineParam(e,{escapeString:t}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return t(e);if(typeof e=="object"){let s=e.toString();return t(s==="[object Object]"?JSON.stringify(e):s)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new r.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}},xs=class{constructor(e){this.value=e}static[T]="Name";brand;getSQL(){return new X([this])}};function $l(r){return typeof r=="object"&&r!==null&&"mapToDriverValue"in r&&typeof r.mapToDriverValue=="function"}var Bl={mapFromDriverValue:r=>r},Ml={mapToDriverValue:r=>r},h2={...Bl,...Ml},Je=class{constructor(e,t=Ml){this.value=e,this.encoder=t}static[T]="Param";brand;getSQL(){return new X([this])}};function A(r,...e){let t=[];(e.length>0||r.length>0&&r[0]!=="")&&t.push(new $e(r[0]));for(let[s,n]of e.entries())t.push(n,new $e(r[s+1]));return new X(t)}(r=>{function e(){return new X([])}r.empty=e;function t(c){return new X(c)}r.fromList=t;function s(c){return new X([new $e(c)])}r.raw=s;function n(c,h){let l=[];for(let[p,g]of c.entries())p>0&&h!==void 0&&l.push(h),l.push(g);return new X(l)}r.join=n;function i(c){return new xs(c)}r.identifier=i;function o(c){return new Lt(c)}r.placeholder=o;function a(c,h){return new Je(c,h)}r.param=a})(A||(A={}));(r=>{class e{constructor(s,n){this.sql=s,this.fieldAlias=n}static[T]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new e(this.sql,this.fieldAlias)}}r.Aliased=e})(X||(X={}));var Lt=class{constructor(e){this.name=e}static[T]="Placeholder";getSQL(){return new X([this])}};function Rn(r,e){return r.map(t=>{if(M(t,Lt)){if(!(t.name in e))throw new Error(`No value for placeholder "${t.name}" was provided`);return e[t.name]}if(M(t,Je)&&M(t.value,Lt)){if(!(t.value.name in e))throw new Error(`No value for placeholder "${t.value.name}" was provided`);return t.encoder.mapToDriverValue(e[t.value.name])}return t})}var ql=Symbol.for("drizzle:IsDrizzleView"),We=class{static[T]="View";[ve];[ql]=!0;constructor({name:e,schema:t,selectedFields:s,query:n}){this[ve]={name:e,originalName:e,schema:t,selectedFields:s,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new X([this])}};function Dl(r){return typeof r=="object"&&r!==null&&ql in r}ye.prototype.getSQL=function(){return new X([this])};z.prototype.getSQL=function(){return new X([this])};Le.prototype.getSQL=function(){return new X([this])};var or=class{constructor(e){this.table=e}static[T]="ColumnAliasProxyHandler";get(e,t){return t==="table"?this.table:e[t]}},jr=class{constructor(e,t){this.alias=e,this.replaceOriginalName=t}static[T]="TableAliasProxyHandler";get(e,t){if(t===z.Symbol.IsAlias)return!0;if(t===z.Symbol.Name)return this.alias;if(this.replaceOriginalName&&t===z.Symbol.OriginalName)return this.alias;if(t===ve)return{...e[ve],name:this.alias,isAlias:!0};if(t===z.Symbol.Columns){let n=e[z.Symbol.Columns];if(!n)return n;let i={};return Object.keys(n).map(o=>{i[o]=new Proxy(n[o],new or(new Proxy(e,this)))}),i}let s=e[t];return M(s,ye)?new Proxy(s,new or(new Proxy(e,this))):s}},jl=class{constructor(e){this.alias=e}static[T]="RelationTableAliasProxyHandler";get(e,t){return t==="sourceTable"?Ts(e.sourceTable,this.alias):e[t]}};function Ts(r,e){return new Proxy(r,new jr(e,!1))}function _t(r,e){return new Proxy(r,new or(new Proxy(r.table,new jr(e,!1))))}function Oo(r,e){return new X.Aliased(Cs(r.sql,e),r.fieldAlias)}function Cs(r,e){return A.join(r.queryChunks.map(t=>M(t,ye)?_t(t,e):M(t,X)?Cs(t,e):M(t,X.Aliased)?Oo(t,e):t))}var Ie=class r{static[T]="SelectionProxyHandler";config;constructor(e){this.config={...e}}get(e,t){if(t==="_")return{...e._,selectedFields:new Proxy(e._.selectedFields,this)};if(t===ve)return{...e[ve],selectedFields:new Proxy(e[ve].selectedFields,this)};if(typeof t=="symbol")return e[t];let n=(M(e,Le)?e._.selectedFields:M(e,We)?e[ve].selectedFields:e)[t];if(M(n,X.Aliased)){if(this.config.sqlAliasedBehavior==="sql"&&!n.isSelectionField)return n.sql;let i=n.clone();return i.isSelectionField=!0,i}if(M(n,X)){if(this.config.sqlBehavior==="sql")return n;throw new Error(`You tried to reference "${t}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return M(n,ye)?this.config.alias?new Proxy(n,new or(new Proxy(n.table,new jr(this.config.alias,this.config.replaceOriginalName??!1)))):n:typeof n!="object"||n===null?n:new Proxy(n,new r(this.config))}};function Fl(r,e,t){let s={},n=r.reduce((i,{path:o,field:a},c)=>{let h;M(a,ye)?h=a:M(a,X)?h=a.decoder:h=a.sql.decoder;let l=i;for(let[p,g]of o.entries())if(p<o.length-1)g in l||(l[g]={}),l=l[g];else{let v=e[c],m=l[g]=v===null?null:h.mapFromDriverValue(v);if(t&&M(a,ye)&&o.length===2){let f=o[0];f in s?typeof s[f]=="string"&&s[f]!==Xe(a.table)&&(s[f]=!1):s[f]=m===null?Xe(a.table):!1}}return i},{});if(t&&Object.keys(s).length>0)for(let[i,o]of Object.entries(s))typeof o=="string"&&!t[o]&&(n[i]=null);return n}function ot(r,e){return Object.entries(r).reduce((t,[s,n])=>{if(typeof s!="string")return t;let i=e?[...e,s]:[s];return M(n,ye)||M(n,X)||M(n,X.Aliased)?t.push({path:i,field:n}):M(n,z)?t.push(...ot(n[z.Symbol.Columns],i)):t.push(...ot(n,i)),t},[])}function Ns(r,e){let t=Object.keys(r),s=Object.keys(e);if(t.length!==s.length)return!1;for(let[n,i]of t.entries())if(i!==s[n])return!1;return!0}function Ln(r,e){let t=Object.entries(e).filter(([,s])=>s!==void 0).map(([s,n])=>M(n,X)||M(n,ye)?[s,n]:[s,new Je(n,r[z.Symbol.Columns][s])]);if(t.length===0)throw new Error("No values to set");return Object.fromEntries(t)}function Ul(r,e){for(let t of e)for(let s of Object.getOwnPropertyNames(t.prototype))s!=="constructor"&&Object.defineProperty(r.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s)||Object.create(null))}function kn(r){return r[z.Symbol.Columns]}function Ql(r){return r[ve].selectedFields}function kt(r){return M(r,Le)?r._.alias:M(r,We)?r[ve].name:M(r,X)?void 0:r[z.Symbol.IsAlias]?r[z.Symbol.Name]:r[z.Symbol.BaseName]}function pe(r,e){return{name:typeof r=="string"&&r.length>0?r:"",config:typeof r=="object"?r:e}}function Vl(r){if(typeof r!="object"||r===null||r.constructor.name!=="Object")return!1;if("logger"in r){let e=typeof r.logger;return!(e!=="boolean"&&(e!=="object"||typeof r.logger.logQuery!="function")&&e!=="undefined")}if("schema"in r){let e=typeof r.logger;return!(e!=="object"&&e!=="undefined")}if("casing"in r){let e=typeof r.logger;return!(e!=="string"&&e!=="undefined")}if("mode"in r)return!(r.mode!=="default"||r.mode!=="planetscale"||r.mode!==void 0);if("connection"in r){let e=typeof r.connection;return!(e!=="string"&&e!=="object"&&e!=="undefined")}if("client"in r){let e=typeof r.client;return!(e!=="object"&&e!=="function"&&e!=="undefined")}return Object.keys(r).length===0}var As=class extends Ue{constructor(e,t,s,n){super(),this.session=t,this.dialect=s,this.config={table:e,withList:n}}static[T]="PgDelete";config;where(e){return this.config.where=e,this}returning(e=this.config.table[z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=ot(e),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return ke.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ke.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ie({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};function g0(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(t=>t.toLowerCase()).join("_")}function y0(r){return(r.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((t,s,n)=>{let i=n===0?s.toLowerCase():`${s[0].toUpperCase()}${s.slice(1)}`;return t+i},"")}function b0(r){return r}var $n=class{static[T]="CasingCache";cache={};cachedTables={};convert;constructor(e){this.convert=e==="snake_case"?g0:e==="camelCase"?y0:b0}getColumnCasing(e){if(!e.keyAsName)return e.name;let t=e.table[z.Symbol.Schema]??"public",s=e.table[z.Symbol.OriginalName],n=`${t}.${s}.${e.name}`;return this.cache[n]||this.cacheTable(e.table),this.cache[n]}cacheTable(e){let t=e[z.Symbol.Schema]??"public",s=e[z.Symbol.OriginalName],n=`${t}.${s}`;if(!this.cachedTables[n]){for(let i of Object.values(e[z.Symbol.Columns])){let o=`${n}.${i.name}`;this.cache[o]=this.convert(i.name)}this.cachedTables[n]=!0}}clearCache(){this.cache={},this.cachedTables={}}};var Is=class extends Error{static[T]="DrizzleError";constructor({message:e,cause:t}){super(e),this.name="DrizzleError",this.cause=t}},Bn=class extends Is{static[T]="TransactionRollbackError";constructor(){super({message:"Rollback"})}};var $t=class extends J{static[T]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(e){if(e){let{name:t,...s}=e;this.config.generatedIdentity={type:"always",sequenceName:t,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){let{name:t,...s}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:t,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}};var Ro=class extends $t{static[T]="PgBigInt53Builder";constructor(e){super(e,"number","PgBigInt53")}build(e){return new Lo(e,this.config)}},Lo=class extends U{static[T]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},ko=class extends $t{static[T]="PgBigInt64Builder";constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new $o(e,this.config)}},$o=class extends U{static[T]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}};function zl(r,e){let{name:t,config:s}=pe(r,e);return s.mode==="number"?new Ro(t):new ko(t)}var Bo=class extends J{static[T]="PgBigSerial53Builder";constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Mo(e,this.config)}},Mo=class extends U{static[T]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}},qo=class extends J{static[T]="PgBigSerial64Builder";constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new Do(e,this.config)}},Do=class extends U{static[T]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}};function Wl(r,e){let{name:t,config:s}=pe(r,e);return s.mode==="number"?new Bo(t):new qo(t)}var jo=class extends J{static[T]="PgBooleanBuilder";constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Fo(e,this.config)}},Fo=class extends U{static[T]="PgBoolean";getSQLType(){return"boolean"}};function Fr(r){return new jo(r??"")}var Uo=class extends J{static[T]="PgCharBuilder";constructor(e,t){super(e,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Qo(e,this.config)}},Qo=class extends U{static[T]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"char":`char(${this.length})`}};function Gl(r,e={}){let{name:t,config:s}=pe(r,e);return new Uo(t,s)}var Vo=class extends J{static[T]="PgCidrBuilder";constructor(e){super(e,"string","PgCidr")}build(e){return new zo(e,this.config)}},zo=class extends U{static[T]="PgCidr";getSQLType(){return"cidr"}};function Kl(r){return new Vo(r??"")}var Wo=class extends J{static[T]="PgCustomColumnBuilder";constructor(e,t,s){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=t,this.config.customTypeParams=s}build(e){return new Go(e,this.config)}},Go=class extends U{static[T]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(e,t){super(e,t),this.sqlName=t.customTypeParams.dataType(t.fieldConfig),this.mapTo=t.customTypeParams.toDriver,this.mapFrom=t.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(e){return typeof this.mapFrom=="function"?this.mapFrom(e):e}mapToDriverValue(e){return typeof this.mapTo=="function"?this.mapTo(e):e}};function Hl(r){return(e,t)=>{let{name:s,config:n}=pe(e,t);return new Wo(s,n,r)}}var St=class extends J{static[T]="PgDateColumnBaseBuilder";defaultNow(){return this.default(A`now()`)}};var Ko=class extends St{static[T]="PgDateBuilder";constructor(e){super(e,"date","PgDate")}build(e){return new Ps(e,this.config)}},Ps=class extends U{static[T]="PgDate";getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}},Ho=class extends St{static[T]="PgDateStringBuilder";constructor(e){super(e,"string","PgDateString")}build(e){return new Os(e,this.config)}},Os=class extends U{static[T]="PgDateString";getSQLType(){return"date"}};function Zl(r,e){let{name:t,config:s}=pe(r,e);return s?.mode==="date"?new Ko(t):new Ho(t)}var Zo=class extends J{static[T]="PgDoublePrecisionBuilder";constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Xo(e,this.config)}},Xo=class extends U{static[T]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}};function Xl(r){return new Zo(r??"")}var Jo=class extends J{static[T]="PgInetBuilder";constructor(e){super(e,"string","PgInet")}build(e){return new Yo(e,this.config)}},Yo=class extends U{static[T]="PgInet";getSQLType(){return"inet"}};function Jl(r){return new Jo(r??"")}var ea=class extends $t{static[T]="PgIntegerBuilder";constructor(e){super(e,"number","PgInteger")}build(e){return new ta(e,this.config)}},ta=class extends U{static[T]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}};function zt(r){return new ea(r??"")}var ra=class extends J{static[T]="PgIntervalBuilder";constructor(e,t){super(e,"string","PgInterval"),this.config.intervalConfig=t}build(e){return new sa(e,this.config)}},sa=class extends U{static[T]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let e=this.fields?` ${this.fields}`:"",t=this.precision?`(${this.precision})`:"";return`interval${e}${t}`}};function Yl(r,e={}){let{name:t,config:s}=pe(r,e);return new ra(t,s)}var na=class extends J{static[T]="PgJsonBuilder";constructor(e){super(e,"json","PgJson")}build(e){return new Rs(e,this.config)}},Rs=class extends U{static[T]="PgJson";constructor(e,t){super(e,t)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function ef(r){return new na(r??"")}var ia=class extends J{static[T]="PgJsonbBuilder";constructor(e){super(e,"json","PgJsonb")}build(e){return new Ls(e,this.config)}},Ls=class extends U{static[T]="PgJsonb";constructor(e,t){super(e,t)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}};function tf(r){return new ia(r??"")}var oa=class extends J{static[T]="PgLineBuilder";constructor(e){super(e,"array","PgLine")}build(e){return new aa(e,this.config)}},aa=class extends U{static[T]="PgLine";getSQLType(){return"line"}mapFromDriverValue(e){let[t,s,n]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(s),Number.parseFloat(n)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}},ua=class extends J{static[T]="PgLineABCBuilder";constructor(e){super(e,"json","PgLineABC")}build(e){return new ca(e,this.config)}},ca=class extends U{static[T]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(e){let[t,s,n]=e.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(s),c:Number.parseFloat(n)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}};function rf(r,e){let{name:t,config:s}=pe(r,e);return!s?.mode||s.mode==="tuple"?new oa(t):new ua(t)}var la=class extends J{static[T]="PgMacaddrBuilder";constructor(e){super(e,"string","PgMacaddr")}build(e){return new fa(e,this.config)}},fa=class extends U{static[T]="PgMacaddr";getSQLType(){return"macaddr"}};function sf(r){return new la(r??"")}var ha=class extends J{static[T]="PgMacaddr8Builder";constructor(e){super(e,"string","PgMacaddr8")}build(e){return new da(e,this.config)}},da=class extends U{static[T]="PgMacaddr8";getSQLType(){return"macaddr8"}};function nf(r){return new ha(r??"")}var pa=class extends J{static[T]="PgNumericBuilder";constructor(e,t,s){super(e,"string","PgNumeric"),this.config.precision=t,this.config.scale=s}build(e){return new ks(e,this.config)}},ks=class extends U{static[T]="PgNumeric";precision;scale;constructor(e,t){super(e,t),this.precision=t.precision,this.scale=t.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}};function of(r,e){let{name:t,config:s}=pe(r,e);return new pa(t,s?.precision,s?.scale)}var ma=class extends J{static[T]="PgPointTupleBuilder";constructor(e){super(e,"array","PgPointTuple")}build(e){return new ga(e,this.config)}},ga=class extends U{static[T]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,s]=e.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(s)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}},ya=class extends J{static[T]="PgPointObjectBuilder";constructor(e){super(e,"json","PgPointObject")}build(e){return new ba(e,this.config)}},ba=class extends U{static[T]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){let[t,s]=e.slice(1,-1).split(",");return{x:Number.parseFloat(t),y:Number.parseFloat(s)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}};function af(r,e){let{name:t,config:s}=pe(r,e);return!s?.mode||s.mode==="tuple"?new ma(t):new ya(t)}function v0(r){let e=[];for(let t=0;t<r.length;t+=2)e.push(Number.parseInt(r.slice(t,t+2),16));return new Uint8Array(e)}function uf(r,e){let t=new ArrayBuffer(8),s=new DataView(t);for(let n=0;n<8;n++)s.setUint8(n,r[e+n]);return s.getFloat64(0,!0)}function va(r){let e=v0(r),t=0,s=e[t];t+=1;let n=new DataView(e.buffer),i=n.getUint32(t,s===1);t+=4;let o;if(i&536870912&&(o=n.getUint32(t,s===1),t+=4),(i&65535)===1){let a=uf(e,t);t+=8;let c=uf(e,t);return t+=8,[a,c]}throw new Error("Unsupported geometry type")}var wa=class extends J{static[T]="PgGeometryBuilder";constructor(e){super(e,"array","PgGeometry")}build(e){return new _a(e,this.config)}},_a=class extends U{static[T]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return va(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}},Sa=class extends J{static[T]="PgGeometryObjectBuilder";constructor(e){super(e,"json","PgGeometryObject")}build(e){return new Ea(e,this.config)}},Ea=class extends U{static[T]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(e){let t=va(e);return{x:t[0],y:t[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}};function cf(r,e){let{name:t,config:s}=pe(r,e);return!s?.mode||s.mode==="tuple"?new wa(t):new Sa(t)}var xa=class extends J{static[T]="PgRealBuilder";constructor(e,t){super(e,"number","PgReal"),this.config.length=t}build(e){return new Ta(e,this.config)}},Ta=class extends U{static[T]="PgReal";constructor(e,t){super(e,t)}getSQLType(){return"real"}mapFromDriverValue=e=>typeof e=="string"?Number.parseFloat(e):e};function lf(r){return new xa(r??"")}var Ca=class extends J{static[T]="PgSerialBuilder";constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Na(e,this.config)}},Na=class extends U{static[T]="PgSerial";getSQLType(){return"serial"}};function Wt(r){return new Ca(r??"")}var Aa=class extends $t{static[T]="PgSmallIntBuilder";constructor(e){super(e,"number","PgSmallInt")}build(e){return new Ia(e,this.config)}},Ia=class extends U{static[T]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=e=>typeof e=="string"?Number(e):e};function ff(r){return new Aa(r??"")}var Pa=class extends J{static[T]="PgSmallSerialBuilder";constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new Oa(e,this.config)}},Oa=class extends U{static[T]="PgSmallSerial";getSQLType(){return"smallserial"}};function hf(r){return new Pa(r??"")}var Ra=class extends J{static[T]="PgTextBuilder";constructor(e,t){super(e,"string","PgText"),this.config.enumValues=t.enum}build(e){return new La(e,this.config)}},La=class extends U{static[T]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}};function ue(r,e={}){let{name:t,config:s}=pe(r,e);return new Ra(t,s)}var ka=class extends St{constructor(e,t,s){super(e,"string","PgTime"),this.withTimezone=t,this.precision=s,this.config.withTimezone=t,this.config.precision=s}static[T]="PgTimeBuilder";build(e){return new $s(e,this.config)}},$s=class extends U{static[T]="PgTime";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function df(r,e={}){let{name:t,config:s}=pe(r,e);return new ka(t,s.withTimezone??!1,s.precision)}var $a=class extends St{static[T]="PgTimestampBuilder";constructor(e,t,s){super(e,"date","PgTimestamp"),this.config.withTimezone=t,this.config.precision=s}build(e){return new Bs(e,this.config)}},Bs=class extends U{static[T]="PgTimestamp";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=e=>new Date(this.withTimezone?e:e+"+0000");mapToDriverValue=e=>e.toISOString()},Ba=class extends St{static[T]="PgTimestampStringBuilder";constructor(e,t,s){super(e,"string","PgTimestampString"),this.config.withTimezone=t,this.config.precision=s}build(e){return new Ms(e,this.config)}},Ms=class extends U{static[T]="PgTimestampString";withTimezone;precision;constructor(e,t){super(e,t),this.withTimezone=t.withTimezone,this.precision=t.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}};function ar(r,e={}){let{name:t,config:s}=pe(r,e);return s?.mode==="string"?new Ba(t,s.withTimezone??!1,s.precision):new $a(t,s?.withTimezone??!1,s?.precision)}var Ma=class extends J{static[T]="PgUUIDBuilder";constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(A`gen_random_uuid()`)}build(e){return new qs(e,this.config)}},qs=class extends U{static[T]="PgUUID";getSQLType(){return"uuid"}};function pf(r){return new Ma(r??"")}var qa=class extends J{static[T]="PgVarcharBuilder";constructor(e,t){super(e,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(e){return new Da(e,this.config)}},Da=class extends U{static[T]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}};function mf(r,e={}){let{name:t,config:s}=pe(r,e);return new qa(t,s)}var ja=class extends J{static[T]="PgBinaryVectorBuilder";constructor(e,t){super(e,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(e){return new Fa(e,this.config)}},Fa=class extends U{static[T]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}};function gf(r,e){let{name:t,config:s}=pe(r,e);return new ja(t,s)}var Ua=class extends J{static[T]="PgHalfVectorBuilder";constructor(e,t){super(e,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(e){return new Qa(e,this.config)}},Qa=class extends U{static[T]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function yf(r,e){let{name:t,config:s}=pe(r,e);return new Ua(t,s)}var Va=class extends J{static[T]="PgSparseVectorBuilder";constructor(e,t){super(e,"string","PgSparseVector"),this.config.dimensions=t.dimensions}build(e){return new za(e,this.config)}},za=class extends U{static[T]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}};function bf(r,e){let{name:t,config:s}=pe(r,e);return new Va(t,s)}var Wa=class extends J{static[T]="PgVectorBuilder";constructor(e,t){super(e,"array","PgVector"),this.config.dimensions=t.dimensions}build(e){return new Ga(e,this.config)}},Ga=class extends U{static[T]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){return e.slice(1,-1).split(",").map(t=>Number.parseFloat(t))}};function vf(r,e){let{name:t,config:s}=pe(r,e);return new Wa(t,s)}function wf(){return{bigint:zl,bigserial:Wl,boolean:Fr,char:Gl,cidr:Kl,customType:Hl,date:Zl,doublePrecision:Xl,inet:Jl,integer:zt,interval:Yl,json:ef,jsonb:tf,line:rf,macaddr:sf,macaddr8:nf,numeric:of,point:af,geometry:cf,real:lf,serial:Wt,smallint:ff,smallserial:hf,text:ue,time:df,timestamp:ar,uuid:pf,varchar:mf,bit:gf,halfvec:yf,sparsevec:bf,vector:vf}}var Ka=Symbol.for("drizzle:PgInlineForeignKeys"),_f=Symbol.for("drizzle:EnableRLS"),De=class extends z{static[T]="PgTable";static Symbol=Object.assign({},z.Symbol,{InlineForeignKeys:Ka,EnableRLS:_f});[Ka]=[];[_f]=!1;[z.Symbol.ExtraConfigBuilder]=void 0};function w0(r,e,t,s,n=r){let i=new De(r,s,n),o=typeof e=="function"?e(wf()):e,a=Object.fromEntries(Object.entries(o).map(([l,p])=>{let g=p;g.setName(l);let v=g.build(i);return i[Ka].push(...g.buildForeignKeys(v,i)),[l,v]})),c=Object.fromEntries(Object.entries(o).map(([l,p])=>{let g=p;g.setName(l);let v=g.buildExtraConfigColumn(i);return[l,v]})),h=Object.assign(i,a);return h[z.Symbol.Columns]=a,h[z.Symbol.ExtraConfigColumns]=c,t&&(h[De.Symbol.ExtraConfigBuilder]=t),Object.assign(h,{enableRLS:()=>(h[De.Symbol.EnableRLS]=!0,h)})}var Ur=(r,e,t)=>w0(r,e,t,void 0);var Mn=class{static[T]="PgPrimaryKeyBuilder";columns;name;constructor(e,t){this.columns=e,this.name=t}build(e){return new Ha(e,this.columns,this.name)}},Ha=class{constructor(e,t,s){this.table=e,this.columns=t,this.name=s}static[T]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[De.Symbol.Name]}_${this.columns.map(e=>e.name).join("_")}_pk`}};function Ye(r,e){return $l(e)&&!Po(r)&&!M(r,Je)&&!M(r,Lt)&&!M(r,ye)&&!M(r,z)&&!M(r,We)?new Je(r,e):r}var Qr=(r,e)=>A`${r} = ${Ye(e,r)}`,Sf=(r,e)=>A`${r} <> ${Ye(e,r)}`;function Ds(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new X(e):new X([new $e("("),A.join(e,new $e(" and ")),new $e(")")])}function Ef(...r){let e=r.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?new X(e):new X([new $e("("),A.join(e,new $e(" or ")),new $e(")")])}function xf(r){return A`not ${r}`}var Tf=(r,e)=>A`${r} > ${Ye(e,r)}`,Cf=(r,e)=>A`${r} >= ${Ye(e,r)}`,Nf=(r,e)=>A`${r} < ${Ye(e,r)}`,Af=(r,e)=>A`${r} <= ${Ye(e,r)}`;function If(r,e){return Array.isArray(e)?e.length===0?A`false`:A`${r} in ${e.map(t=>Ye(t,r))}`:A`${r} in ${Ye(e,r)}`}function Pf(r,e){return Array.isArray(e)?e.length===0?A`true`:A`${r} not in ${e.map(t=>Ye(t,r))}`:A`${r} not in ${Ye(e,r)}`}function Of(r){return A`${r} is null`}function Rf(r){return A`${r} is not null`}function Lf(r){return A`exists ${r}`}function kf(r){return A`not exists ${r}`}function $f(r,e,t){return A`${r} between ${Ye(e,r)} and ${Ye(t,r)}`}function Bf(r,e,t){return A`${r} not between ${Ye(e,r)} and ${Ye(t,r)}`}function Mf(r,e){return A`${r} like ${e}`}function qf(r,e){return A`${r} not like ${e}`}function Df(r,e){return A`${r} ilike ${e}`}function jf(r,e){return A`${r} not ilike ${e}`}function Ff(r){return A`${r} asc`}function Uf(r){return A`${r} desc`}var qn=class{constructor(e,t,s){this.sourceTable=e,this.referencedTable=t,this.relationName=s,this.referencedTableName=t[z.Symbol.Name]}static[T]="Relation";referencedTableName;fieldName},Za=class{constructor(e,t){this.table=e,this.config=t}static[T]="Relations"},Gt=class r extends qn{constructor(e,t,s,n){super(e,t,s?.relationName),this.config=s,this.isNullable=n}static[T]="One";withFieldName(e){let t=new r(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=e,t}},js=class r extends qn{constructor(e,t,s){super(e,t,s?.relationName),this.config=s}static[T]="Many";withFieldName(e){let t=new r(this.sourceTable,this.referencedTable,this.config);return t.fieldName=e,t}};function Qf(){return{and:Ds,between:$f,eq:Qr,exists:Lf,gt:Tf,gte:Cf,ilike:Df,inArray:If,isNull:Of,isNotNull:Rf,like:Mf,lt:Nf,lte:Af,ne:Sf,not:xf,notBetween:Bf,notExists:kf,notLike:qf,notIlike:jf,notInArray:Pf,or:Ef,sql:A}}function Vf(){return{sql:A,asc:Ff,desc:Uf}}function zf(r,e){Object.keys(r).length===1&&"default"in r&&!M(r.default,z)&&(r=r.default);let t={},s={},n={};for(let[i,o]of Object.entries(r))if(M(o,z)){let a=ir(o),c=s[a];t[a]=i,n[i]={tsName:i,dbName:o[z.Symbol.Name],schema:o[z.Symbol.Schema],columns:o[z.Symbol.Columns],relations:c?.relations??{},primaryKey:c?.primaryKey??[]};for(let l of Object.values(o[z.Symbol.Columns]))l.primary&&n[i].primaryKey.push(l);let h=o[z.Symbol.ExtraConfigBuilder]?.(o[z.Symbol.ExtraConfigColumns]);if(h)for(let l of Object.values(h))M(l,Mn)&&n[i].primaryKey.push(...l.columns)}else if(M(o,Za)){let a=ir(o.table),c=t[a],h=o.config(e(o.table)),l;for(let[p,g]of Object.entries(h))if(c){let v=n[c];v.relations[p]=g,l&&v.primaryKey.push(...l)}else a in s||(s[a]={relations:{},primaryKey:l}),s[a].relations[p]=g}return{tables:n,tableNamesMap:t}}function _0(r){return function(t,s){return new Gt(r,t,s,s?.fields.reduce((n,i)=>n&&i.notNull,!0)??!1)}}function S0(r){return function(t,s){return new js(r,t,s)}}function Wf(r,e,t){if(M(t,Gt)&&t.config)return{fields:t.config.fields,references:t.config.references};let s=e[ir(t.referencedTable)];if(!s)throw new Error(`Table "${t.referencedTable[z.Symbol.Name]}" not found in schema`);let n=r[s];if(!n)throw new Error(`Table "${s}" not found in schema`);let i=t.sourceTable,o=e[ir(i)];if(!o)throw new Error(`Table "${i[z.Symbol.Name]}" not found in schema`);let a=[];for(let c of Object.values(n.relations))(t.relationName&&t!==c&&c.relationName===t.relationName||!t.relationName&&c.referencedTable===t.sourceTable)&&a.push(c);if(a.length>1)throw t.relationName?new Error(`There are multiple relations with name "${t.relationName}" in table "${s}"`):new Error(`There are multiple relations between "${s}" and "${t.sourceTable[z.Symbol.Name]}". Please specify relation name`);if(a[0]&&M(a[0],Gt)&&a[0].config)return{fields:a[0].config.references,references:a[0].config.fields};throw new Error(`There is not enough information to infer relation "${o}.${t.fieldName}"`)}function Gf(r){return{one:_0(r),many:S0(r)}}function Dn(r,e,t,s,n=i=>i){let i={};for(let[o,a]of s.entries())if(a.isJson){let c=e.relations[a.tsKey],h=t[o],l=typeof h=="string"?JSON.parse(h):h;i[a.tsKey]=M(c,Gt)?l&&Dn(r,r[a.relationTableTsKey],l,a.selection,n):l.map(p=>Dn(r,r[a.relationTableTsKey],p,a.selection,n))}else{let c=n(t[o]),h=a.field,l;M(h,ye)?l=h:M(h,X)?l=h.decoder:l=h.sql.decoder,i[a.tsKey]=c===null?null:l.mapFromDriverValue(c)}return i}var Vr=class extends We{static[T]="PgViewBase"};var Kt=class{static[T]="PgDialect";casing;constructor(e){this.casing=new $n(e?.casing)}async migrate(e,t,s){let n=typeof s=="string"?"__drizzle_migrations":s.migrationsTable??"__drizzle_migrations",i=typeof s=="string"?"drizzle":s.migrationsSchema??"drizzle",o=A`
			CREATE TABLE IF NOT EXISTS ${A.identifier(i)}.${A.identifier(n)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await t.execute(A`CREATE SCHEMA IF NOT EXISTS ${A.identifier(i)}`),await t.execute(o);let c=(await t.all(A`select id, hash, created_at from ${A.identifier(i)}.${A.identifier(n)} order by created_at desc limit 1`))[0];await t.transaction(async h=>{for await(let l of e)if(!c||Number(c.created_at)<l.folderMillis){for(let p of l.sql)await h.execute(A.raw(p));await h.execute(A`insert into ${A.identifier(i)}.${A.identifier(n)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[A`with `];for(let[s,n]of e.entries())t.push(A`${A.identifier(n._.alias)} as (${n._.sql})`),s<e.length-1&&t.push(A`, `);return t.push(A` `),A.join(t)}buildDeleteQuery({table:e,where:t,returning:s,withList:n}){let i=this.buildWithCTE(n),o=s?A` returning ${this.buildSelection(s,{isSingleTable:!0})}`:void 0,a=t?A` where ${t}`:void 0;return A`${i}delete from ${e}${a}${o}`}buildUpdateSet(e,t){let s=e[z.Symbol.Columns],n=Object.keys(s).filter(o=>t[o]!==void 0||s[o]?.onUpdateFn!==void 0),i=n.length;return A.join(n.flatMap((o,a)=>{let c=s[o],h=t[o]??A.param(c.onUpdateFn(),c),l=A`${A.identifier(this.casing.getColumnCasing(c))} = ${h}`;return a<i-1?[l,A.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:s,returning:n,withList:i,from:o,joins:a}){let c=this.buildWithCTE(i),h=e[De.Symbol.Name],l=e[De.Symbol.Schema],p=e[De.Symbol.OriginalName],g=h===p?void 0:h,v=A`${l?A`${A.identifier(l)}.`:void 0}${A.identifier(p)}${g&&A` ${A.identifier(g)}`}`,m=this.buildUpdateSet(e,t),f=o&&A.join([A.raw(" from "),this.buildFromTable(o)]),w=this.buildJoins(a),_=n?A` returning ${this.buildSelection(n,{isSingleTable:!o})}`:void 0,S=s?A` where ${s}`:void 0;return A`${c}update ${v} set ${m}${f}${w}${S}${_}`}buildSelection(e,{isSingleTable:t=!1}={}){let s=e.length,n=e.flatMap(({field:i},o)=>{let a=[];if(M(i,X.Aliased)&&i.isSelectionField)a.push(A.identifier(i.fieldAlias));else if(M(i,X.Aliased)||M(i,X)){let c=M(i,X.Aliased)?i.sql:i;t?a.push(new X(c.queryChunks.map(h=>M(h,U)?A.identifier(this.casing.getColumnCasing(h)):h))):a.push(c),M(i,X.Aliased)&&a.push(A` as ${A.identifier(i.fieldAlias)}`)}else M(i,ye)&&(t?a.push(A.identifier(this.casing.getColumnCasing(i))):a.push(i));return o<s-1&&a.push(A`, `),a});return A.join(n)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[s,n]of e.entries()){s===0&&t.push(A` `);let i=n.table,o=n.lateral?A` lateral`:void 0;if(M(i,De)){let a=i[De.Symbol.Name],c=i[De.Symbol.Schema],h=i[De.Symbol.OriginalName],l=a===h?void 0:n.alias;t.push(A`${A.raw(n.joinType)} join${o} ${c?A`${A.identifier(c)}.`:void 0}${A.identifier(h)}${l&&A` ${A.identifier(l)}`} on ${n.on}`)}else if(M(i,We)){let a=i[ve].name,c=i[ve].schema,h=i[ve].originalName,l=a===h?void 0:n.alias;t.push(A`${A.raw(n.joinType)} join${o} ${c?A`${A.identifier(c)}.`:void 0}${A.identifier(h)}${l&&A` ${A.identifier(l)}`} on ${n.on}`)}else t.push(A`${A.raw(n.joinType)} join${o} ${i} on ${n.on}`);s<e.length-1&&t.push(A` `)}return A.join(t)}buildFromTable(e){if(M(e,z)&&e[z.Symbol.OriginalName]!==e[z.Symbol.Name]){let t=A`${A.identifier(e[z.Symbol.OriginalName])}`;return e[z.Symbol.Schema]&&(t=A`${A.identifier(e[z.Symbol.Schema])}.${t}`),A`${t} ${A.identifier(e[z.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:s,where:n,having:i,table:o,joins:a,orderBy:c,groupBy:h,limit:l,offset:p,lockingClause:g,distinct:v,setOperators:m}){let f=s??ot(t);for(let k of f)if(M(k.field,ye)&&Xe(k.field.table)!==(M(o,Le)?o._.alias:M(o,Vr)?o[ve].name:M(o,X)?void 0:Xe(o))&&!(Q=>a?.some(({alias:ee})=>ee===(Q[z.Symbol.IsAlias]?Xe(Q):Q[z.Symbol.BaseName])))(k.field.table)){let Q=Xe(k.field.table);throw new Error(`Your "${k.path.join("->")}" field references a column "${Q}"."${k.field.name}", but the table "${Q}" is not part of the query! Did you forget to join it?`)}let w=!a||a.length===0,_=this.buildWithCTE(e),S;v&&(S=v===!0?A` distinct`:A` distinct on (${A.join(v.on,A`, `)})`);let x=this.buildSelection(f,{isSingleTable:w}),R=this.buildFromTable(o),L=this.buildJoins(a),E=n?A` where ${n}`:void 0,P=i?A` having ${i}`:void 0,I;c&&c.length>0&&(I=A` order by ${A.join(c,A`, `)}`);let C;h&&h.length>0&&(C=A` group by ${A.join(h,A`, `)}`);let B=typeof l=="object"||typeof l=="number"&&l>=0?A` limit ${l}`:void 0,$=p?A` offset ${p}`:void 0,H=A.empty();if(g){let k=A` for ${A.raw(g.strength)}`;g.config.of&&k.append(A` of ${A.join(Array.isArray(g.config.of)?g.config.of:[g.config.of],A`, `)}`),g.config.noWait?k.append(A` no wait`):g.config.skipLocked&&k.append(A` skip locked`),H.append(k)}let Z=A`${_}select${S} ${x} from ${R}${L}${E}${C}${P}${I}${B}${$}${H}`;return m.length>0?this.buildSetOperations(Z,m):Z}buildSetOperations(e,t){let[s,...n]=t;if(!s)throw new Error("Cannot pass undefined values to any set operator");return n.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:s}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:s}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:s,rightSelect:n,limit:i,orderBy:o,offset:a}}){let c=A`(${e.getSQL()}) `,h=A`(${n.getSQL()})`,l;if(o&&o.length>0){let m=[];for(let f of o)if(M(f,U))m.push(A.identifier(f.name));else if(M(f,X)){for(let w=0;w<f.queryChunks.length;w++){let _=f.queryChunks[w];M(_,U)&&(f.queryChunks[w]=A.identifier(_.name))}m.push(A`${f}`)}else m.push(A`${f}`);l=A` order by ${A.join(m,A`, `)} `}let p=typeof i=="object"||typeof i=="number"&&i>=0?A` limit ${i}`:void 0,g=A.raw(`${t} ${s?"all ":""}`),v=a?A` offset ${a}`:void 0;return A`${c}${g}${h}${l}${p}${v}`}buildInsertQuery({table:e,values:t,onConflict:s,returning:n,withList:i,select:o,overridingSystemValue_:a}){let c=[],h=e[z.Symbol.Columns],l=Object.entries(h).filter(([_,S])=>!S.shouldDisableInsert()),p=l.map(([,_])=>A.identifier(this.casing.getColumnCasing(_)));if(o){let _=t;M(_,X)?c.push(_):c.push(_.getSQL())}else{let _=t;c.push(A.raw("values "));for(let[S,x]of _.entries()){let R=[];for(let[L,E]of l){let P=x[L];if(P===void 0||M(P,Je)&&P.value===void 0)if(E.defaultFn!==void 0){let I=E.defaultFn(),C=M(I,X)?I:A.param(I,E);R.push(C)}else if(!E.default&&E.onUpdateFn!==void 0){let I=E.onUpdateFn(),C=M(I,X)?I:A.param(I,E);R.push(C)}else R.push(A`default`);else R.push(P)}c.push(R),S<_.length-1&&c.push(A`, `)}}let g=this.buildWithCTE(i),v=A.join(c),m=n?A` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,f=s?A` on conflict ${s}`:void 0,w=a===!0?A`overriding system value `:void 0;return A`${g}insert into ${e} ${p} ${w}${v}${f}${m}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:s}){let n=t?A` concurrently`:void 0,i=s?A` with no data`:void 0;return A`refresh materialized view${n} ${e}${i}`}prepareTyping(e){return M(e,Ls)||M(e,Rs)?"json":M(e,ks)?"decimal":M(e,$s)?"time":M(e,Bs)||M(e,Ms)?"timestamp":M(e,Ps)||M(e,Os)?"date":M(e,qs)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:s,table:n,tableConfig:i,queryConfig:o,tableAlias:a,nestedQueryRelation:c,joinOn:h}){let l=[],p,g,v=[],m,f=[];if(o===!0)l=Object.entries(i.columns).map(([S,x])=>({dbKey:x.name,tsKey:S,field:_t(x,a),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let _=Object.fromEntries(Object.entries(i.columns).map(([P,I])=>[P,_t(I,a)]));if(o.where){let P=typeof o.where=="function"?o.where(_,Qf()):o.where;m=P&&Cs(P,a)}let S=[],x=[];if(o.columns){let P=!1;for(let[I,C]of Object.entries(o.columns))C!==void 0&&I in i.columns&&(!P&&C===!0&&(P=!0),x.push(I));x.length>0&&(x=P?x.filter(I=>o.columns?.[I]===!0):Object.keys(i.columns).filter(I=>!x.includes(I)))}else x=Object.keys(i.columns);for(let P of x){let I=i.columns[P];S.push({tsKey:P,value:I})}let R=[];o.with&&(R=Object.entries(o.with).filter(P=>!!P[1]).map(([P,I])=>({tsKey:P,queryConfig:I,relation:i.relations[P]})));let L;if(o.extras){L=typeof o.extras=="function"?o.extras(_,{sql:A}):o.extras;for(let[P,I]of Object.entries(L))S.push({tsKey:P,value:Oo(I,a)})}for(let{tsKey:P,value:I}of S)l.push({dbKey:M(I,X.Aliased)?I.fieldAlias:i.columns[P].name,tsKey:P,field:M(I,ye)?_t(I,a):I,relationTableTsKey:void 0,isJson:!1,selection:[]});let E=typeof o.orderBy=="function"?o.orderBy(_,Vf()):o.orderBy??[];Array.isArray(E)||(E=[E]),v=E.map(P=>M(P,ye)?_t(P,a):Cs(P,a)),p=o.limit,g=o.offset;for(let{tsKey:P,queryConfig:I,relation:C}of R){let B=Wf(t,s,C),$=ir(C.referencedTable),H=s[$],Z=`${a}_${P}`,k=Ds(...B.fields.map((ae,ge)=>Qr(_t(B.references[ge],Z),_t(ae,a)))),Q=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:s,table:e[H],tableConfig:t[H],queryConfig:M(C,Gt)?I===!0?{limit:1}:{...I,limit:1}:I,tableAlias:Z,joinOn:k,nestedQueryRelation:C}),ee=A`${A.identifier(Z)}.${A.identifier("data")}`.as(P);f.push({on:A`true`,table:new Le(Q.sql,{},Z),alias:Z,joinType:"left",lateral:!0}),l.push({dbKey:P,tsKey:P,field:ee,relationTableTsKey:H,isJson:!0,selection:Q.selection})}}if(l.length===0)throw new Is({message:`No fields selected for table "${i.tsName}" ("${a}")`});let w;if(m=Ds(h,m),c){let _=A`json_build_array(${A.join(l.map(({field:R,tsKey:L,isJson:E})=>E?A`${A.identifier(`${a}_${L}`)}.${A.identifier("data")}`:M(R,X.Aliased)?R.sql:R),A`, `)})`;M(c,js)&&(_=A`coalesce(json_agg(${_}${v.length>0?A` order by ${A.join(v,A`, `)}`:void 0}), '[]'::json)`);let S=[{dbKey:"data",tsKey:"data",field:_.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:l}];p!==void 0||g!==void 0||v.length>0?(w=this.buildSelectQuery({table:Ts(n,a),fields:{},fieldsFlat:[{path:[],field:A.raw("*")}],where:m,limit:p,offset:g,orderBy:v,setOperators:[]}),m=void 0,p=void 0,g=void 0,v=[]):w=Ts(n,a),w=this.buildSelectQuery({table:M(w,De)?w:new Le(w,{},a),fields:{},fieldsFlat:S.map(({field:R})=>({path:[],field:M(R,ye)?_t(R,a):R})),joins:f,where:m,limit:p,offset:g,orderBy:v,setOperators:[]})}else w=this.buildSelectQuery({table:Ts(n,a),fields:{},fieldsFlat:l.map(({field:_})=>({path:[],field:M(_,ye)?_t(_,a):_})),joins:f,where:m,limit:p,offset:g,orderBy:v,setOperators:[]});return{tableTsKey:i.tsName,sql:w,selection:l}}};var jn=class{static[T]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var Qe=class{static[T]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,s=e,n;return this.fields?n=this.fields:M(s,Le)?n=Object.fromEntries(Object.keys(s._.selectedFields).map(i=>[i,s[i]])):M(s,Vr)?n=s[ve].selectedFields:M(s,X)?n={}:n=kn(s),new Fn({table:s,fields:n,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},Xa=class extends jn{static[T]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:s,session:n,dialect:i,withList:o,distinct:a}){super(),this.config={withList:o,table:e,fields:{...t},distinct:a,setOperators:[]},this.isPartialSelect=s,this.session=n,this.dialect=i,this._={selectedFields:t},this.tableName=kt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(t,s)=>{let n=this.tableName,i=kt(t);if(typeof i=="string"&&this.config.joins?.some(o=>o.alias===i))throw new Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof n=="string"&&(this.config.fields={[n]:this.config.fields}),typeof i=="string"&&!M(t,X))){let o=M(t,Le)?t._.selectedFields:M(t,We)?t[ve].selectedFields:t[z.Symbol.Columns];this.config.fields[i]=o}if(typeof s=="function"&&(s=s(new Proxy(this.config.fields,new Ie({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:s,table:t,joinType:e,alias:i}),typeof i=="string")switch(e){case"left":{this.joinsNotNullableMap[i]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[i]=!0;break}case"inner":{this.joinsNotNullableMap[i]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[i]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,t){return s=>{let n=typeof s=="function"?s(E0()):s;if(!Ns(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ie({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new Ie({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new Ie({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new Ie({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),s=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=s:this.config.orderBy=s}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new Le(this.getSQL(),this.config.fields,e),new Ie({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new Ie({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},Fn=class extends Xa{static[T]="PgSelect";_prepare(e){let{session:t,config:s,dialect:n,joinsNotNullableMap:i,authToken:o}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return ke.startActiveSpan("drizzle.prepareQuery",()=>{let a=ot(s.fields),c=t.prepareQuery(n.sqlToQuery(this.getSQL()),a,e,!0);return c.joinsNotNullableMap=i,c.setToken(o)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ke.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};Ul(Fn,[Ue]);function zr(r,e){return(t,s,...n)=>{let i=[s,...n].map(o=>({type:r,isAll:e,rightSelect:o}));for(let o of i)if(!Ns(t.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(i)}}var E0=()=>({union:x0,unionAll:T0,intersect:C0,intersectAll:N0,except:A0,exceptAll:I0}),x0=zr("union",!1),T0=zr("union",!0),C0=zr("intersect",!1),N0=zr("intersect",!0),A0=zr("except",!1),I0=zr("except",!0);var Wr=class{static[T]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=M(e,Kt)?e:void 0,this.dialectConfig=M(e,Kt)?void 0:e}$with=(e,t)=>{let s=this;return{as:i=>(typeof i=="function"&&(i=i(s)),new Proxy(new Dr(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Ie({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;function s(o){return new Qe({fields:o??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function n(o){return new Qe({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function i(o,a){return new Qe({fields:a??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:o}})}return{select:s,selectDistinct:n,selectDistinctOn:i}}select(e){return new Qe({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new Qe({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new Qe({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new Kt(this.dialectConfig)),this.dialect}};var Fs=class{constructor(e,t,s,n,i){this.table=e,this.session=t,this.dialect=s,this.withList=n,this.overridingSystemValue_=i}static[T]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(s=>{let n={},i=this.table[z.Symbol.Columns];for(let o of Object.keys(s)){let a=s[o];n[o]=M(a,X)?a:new Je(a,i[o])}return n});return new Un(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new Wr):e;if(!M(t,X)&&!Ns(this.table[On],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new Un(this.table,t,this.session,this.dialect,this.withList,!0)}},Un=class extends Ue{constructor(e,t,s,n,i,o,a){super(),this.session=s,this.dialect=n,this.config={table:e,values:t,withList:i,select:o,overridingSystemValue_:a}}static[T]="PgInsert";config;returning(e=this.config.table[z.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=ot(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=A`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(n=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(n))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let s=e.where?A` where ${e.where}`:void 0;this.config.onConflict=A`(${A.raw(t)})${s} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?A` where ${e.where}`:void 0,s=e.targetWhere?A` where ${e.targetWhere}`:void 0,n=e.setWhere?A` where ${e.setWhere}`:void 0,i=this.dialect.buildUpdateSet(this.config.table,Ln(this.config.table,e.set)),o="";return o=Array.isArray(e.target)?e.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=A`(${A.raw(o)})${s} do update set ${i}${t}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return ke.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ke.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ie({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Qn=class extends Ue{constructor(e,t,s){super(),this.session=t,this.dialect=s,this.config={view:e}}static[T]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return ke.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>ke.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var Us=class{constructor(e,t,s,n){this.table=e,this.session=t,this.dialect=s,this.withList=n}static[T]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new Ja(this.table,Ln(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},Ja=class extends Ue{constructor(e,t,s,n,i){super(),this.session=s,this.dialect=n,this.config={set:t,table:e,withList:i,joins:[]},this.tableName=kt(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[T]="PgUpdate";config;tableName;joinsNotNullableMap;from(e){let t=e,s=kt(t);return typeof s=="string"&&(this.joinsNotNullableMap[s]=!0),this.config.from=t,this}getTableLikeFields(e){return M(e,De)?e[z.Symbol.Columns]:M(e,Le)?e._.selectedFields:e[ve].selectedFields}createJoin(e){return(t,s)=>{let n=kt(t);if(typeof n=="string"&&this.config.joins.some(i=>i.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(typeof s=="function"){let i=this.config.from&&!M(this.config.from,X)?this.getTableLikeFields(this.config.from):void 0;s=s(new Proxy(this.config.table[z.Symbol.Columns],new Ie({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),i&&new Proxy(i,new Ie({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:s,table:t,joinType:e,alias:n}),typeof n=="string")switch(e){case"left":{this.joinsNotNullableMap[n]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[n]=!0;break}case"inner":{this.joinsNotNullableMap[n]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([i])=>[i,!1])),this.joinsNotNullableMap[n]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[z.Symbol.Columns]),this.config.from)){let t=kt(this.config.from);if(typeof t=="string"&&this.config.from&&!M(this.config.from,X)){let s=this.getTableLikeFields(this.config.from);e[t]=s}for(let s of this.config.joins){let n=kt(s.table);if(typeof n=="string"&&!M(s.table,X)){let i=this.getTableLikeFields(s.table);e[n]=i}}}return this.config.returningFields=e,this.config.returning=ot(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new Ie({alias:Xe(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Vn=class r extends X{constructor(e){super(r.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=r.buildCount(e.source,e.filters)}sql;token;static[T]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return A`(select count(*) from ${e}${A.raw(" where ").if(t)}${t})`}static buildCount(e,t){return A`select count(*) as count from ${e}${A.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}};var zn=class{constructor(e,t,s,n,i,o,a){this.fullSchema=e,this.schema=t,this.tableNamesMap=s,this.table=n,this.tableConfig=i,this.dialect=o,this.session=a}static[T]="PgRelationalQueryBuilder";findMany(e){return new Wn(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Wn(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Wn=class extends Ue{constructor(e,t,s,n,i,o,a,c,h){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=s,this.table=n,this.tableConfig=i,this.dialect=o,this.session=a,this.config=c,this.mode=h}static[T]="PgRelationalQuery";_prepare(e){return ke.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:s}=this._toSQL();return this.session.prepareQuery(s,void 0,e,!0,(n,i)=>{let o=n.map(a=>Dn(this.schema,this.tableConfig,a,t.selection,i));return this.mode==="first"?o[0]:o})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return ke.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var Gn=class extends Ue{constructor(e,t,s,n){super(),this.execute=e,this.sql=t,this.query=s,this.mapBatchResult=n}static[T]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var Gr=class{constructor(e,t,s){if(this.dialect=e,this.session=t,this._=s?{schema:s.schema,fullSchema:s.fullSchema,tableNamesMap:s.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[n,i]of Object.entries(this._.schema))this.query[n]=new zn(s.fullSchema,this._.schema,this._.tableNamesMap,s.fullSchema[n],i,e,t)}static[T]="PgDatabase";query;$with=(e,t)=>{let s=this;return{as:i=>(typeof i=="function"&&(i=i(new Wr(s.dialect))),new Proxy(new Dr(i.getSQL(),t??("getSelectedFields"in i?i.getSelectedFields()??{}:{}),e,!0),new Ie({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new Vn({source:e,filters:t,session:this.session})}with(...e){let t=this;function s(h){return new Qe({fields:h??void 0,session:t.session,dialect:t.dialect,withList:e})}function n(h){return new Qe({fields:h??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function i(h,l){return new Qe({fields:l??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:h}})}function o(h){return new Us(h,t.session,t.dialect,e)}function a(h){return new Fs(h,t.session,t.dialect,e)}function c(h){return new As(h,t.session,t.dialect,e)}return{select:s,selectDistinct:n,selectDistinctOn:i,update:o,insert:a,delete:c}}select(e){return new Qe({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new Qe({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new Qe({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new Us(e,this.session,this.dialect)}insert(e){return new Fs(e,this.session,this.dialect)}delete(e){return new As(e,this.session,this.dialect)}refreshMaterializedView(e){return new Qn(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e=="string"?A.raw(e):e.getSQL(),s=this.dialect.sqlToQuery(t),n=this.session.prepareQuery(s,void 0,void 0,!1);return new Gn(()=>n.execute(void 0,this.authToken),t,s,i=>n.mapResult(i,!0))}transaction(e,t){return this.session.transaction(e,t)}};var Kn=class{constructor(e){this.query=e}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[T]="PgPreparedQuery";joinsNotNullableMap},Hn=class{constructor(e){this.dialect=e}static[T]="PgSession";execute(e,t){return ke.startActiveSpan("drizzle.operation",()=>ke.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let s=await this.execute(e,t);return Number(s[0].count)}},Zn=class extends Gr{constructor(e,t,s,n=0){super(e,t,s),this.schema=s,this.nestedIndex=n}static[T]="PgTransaction";rollback(){throw new Bn}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),A.raw(t.join(" "))}setTransaction(e){return this.session.execute(A`set transaction ${this.getTransactionConfigSQL(e)}`)}};var Ya=class extends Kn{constructor(e,t,s,n,i,o,a,c){super({sql:t,params:s}),this.client=e,this.params=s,this.logger=n,this.fields=i,this._isResponseInArrayMode=a,this.customResultMapper=c,this.rawQueryConfig={name:o,text:t,types:{getTypeParser:(h,l)=>h===gt.builtins.TIMESTAMPTZ?p=>p:h===gt.builtins.TIMESTAMP?p=>p:h===gt.builtins.DATE?p=>p:h===gt.builtins.INTERVAL?p=>p:gt.getTypeParser(h,l)}},this.queryConfig={name:o,text:t,rowMode:"array",types:{getTypeParser:(h,l)=>h===gt.builtins.TIMESTAMPTZ?p=>p:h===gt.builtins.TIMESTAMP?p=>p:h===gt.builtins.DATE?p=>p:h===gt.builtins.INTERVAL?p=>p:gt.getTypeParser(h,l)}}}static[T]="NeonPreparedQuery";rawQueryConfig;queryConfig;async execute(e={}){let t=Rn(this.params,e);this.logger.logQuery(this.rawQueryConfig.text,t);let{fields:s,client:n,rawQueryConfig:i,queryConfig:o,joinsNotNullableMap:a,customResultMapper:c}=this;if(!s&&!c)return n.query(i,t);let h=await n.query(o,t);return c?c(h.rows):h.rows.map(l=>Fl(s,l,a))}all(e={}){let t=Rn(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),this.client.query(this.rawQueryConfig,t).then(s=>s.rows)}values(e={}){let t=Rn(this.params,e);return this.logger.logQuery(this.rawQueryConfig.text,t),this.client.query(this.queryConfig,t).then(s=>s.rows)}isResponseInArrayMode(){return this._isResponseInArrayMode}},Xn=class r extends Hn{constructor(e,t,s,n={}){super(t),this.client=e,this.schema=s,this.options=n,this.logger=n.logger??new Cn}static[T]="NeonSession";logger;prepareQuery(e,t,s,n,i){return new Ya(this.client,e.sql,e.params,this.logger,t,s,n,i)}async query(e,t){return this.logger.logQuery(e,t),await this.client.query({rowMode:"array",text:e,values:t})}async queryObjects(e,t){return this.client.query(e,t)}async count(e){let t=await this.execute(e);return Number(t.rows[0].count)}async transaction(e,t={}){let s=this.client instanceof Rt?new r(await this.client.connect(),this.dialect,this.schema,this.options):this,n=new eu(this.dialect,s,this.schema);await n.execute(A`begin ${n.getTransactionConfigSQL(t)}`);try{let i=await e(n);return await n.execute(A`commit`),i}catch(i){throw await n.execute(A`rollback`),i}finally{this.client instanceof Rt&&s.client.release()}}},eu=class r extends Zn{static[T]="NeonTransaction";async transaction(e){let t=`sp${this.nestedIndex+1}`,s=new r(this.dialect,this.session,this.schema,this.nestedIndex+1);await s.execute(A.raw(`savepoint ${t}`));try{let n=await e(s);return await s.execute(A.raw(`release savepoint ${t}`)),n}catch(n){throw await s.execute(A.raw(`rollback to savepoint ${t}`)),n}}};var tu=class{constructor(e,t,s={}){this.client=e,this.dialect=t,this.options=s}static[T]="NeonDriver";createSession(e){return new Xn(this.client,this.dialect,e,{logger:this.options.logger})}},ru=class extends Gr{static[T]="NeonServerlessDatabase"};function Qs(r,e={}){let t=new Kt({casing:e.casing}),s;e.logger===!0?s=new Tn:e.logger!==!1&&(s=e.logger);let n;if(e.schema){let c=zf(e.schema,Gf);n={fullSchema:e.schema,schema:c.tables,tableNamesMap:c.tableNamesMap}}let o=new tu(r,t,{logger:s}).createSession(n),a=new ru(t,o,n);return a.$client=r,a}function Jn(...r){if(typeof r[0]=="string"){let e=new Rt({connectionString:r[0]});return Qs(e,r[1])}if(Vl(r[0])){let{connection:e,client:t,ws:s,...n}=r[0];if(s&&(Ot.webSocketConstructor=s),t)return Qs(t,n);let i=typeof e=="string"?new Rt({connectionString:e}):new Rt(e);return Qs(i,n)}return Qs(r[0],r[1])}(r=>{function e(t){return Qs({},t)}r.mock=e})(Jn||(Jn={}));var sv=kr(Xf(),1),nv=kr(Eu(),1),iv=kr(Cu(),1),wd=kr(Lu(),1),ov=kr(vd(),1);var _d=wd.default;var py=kr(Xg(),1);var me;(function(r){r.assertEqual=n=>n;function e(n){}r.assertIs=e;function t(n){throw new Error}r.assertNever=t,r.arrayToEnum=n=>{let i={};for(let o of n)i[o]=o;return i},r.getValidEnumValues=n=>{let i=r.objectKeys(n).filter(a=>typeof n[n[a]]!="number"),o={};for(let a of i)o[a]=n[a];return r.objectValues(o)},r.objectValues=n=>r.objectKeys(n).map(function(i){return n[i]}),r.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.push(o);return i},r.find=(n,i)=>{for(let o of n)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function s(n,i=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=s,r.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(me||(me={}));var Ec;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(Ec||(Ec={}));var W=me.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ut=r=>{switch(typeof r){case"undefined":return W.undefined;case"string":return W.string;case"number":return isNaN(r)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(r)?W.array:r===null?W.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?W.promise:typeof Map<"u"&&r instanceof Map?W.map:typeof Set<"u"&&r instanceof Set?W.set:typeof Date<"u"&&r instanceof Date?W.date:W.object;default:return W.unknown}},D=me.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),fx=r=>JSON.stringify(r,null,2).replace(/"([^"]+)":/g,"$1:"),st=class r extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(i){return i.message},s={_errors:[]},n=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)s._errors.push(t(o));else{let a=s,c=0;for(;c<o.path.length;){let h=o.path[c];c===o.path.length-1?(a[h]=a[h]||{_errors:[]},a[h]._errors.push(t(o))):a[h]=a[h]||{_errors:[]},a=a[h],c++}}};return n(this),s}static assert(e){if(!(e instanceof r))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,me.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},s=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):s.push(e(n));return{formErrors:s,fieldErrors:t}}get formErrors(){return this.flatten()}};st.create=r=>new st(r);var ls=(r,e)=>{let t;switch(r.code){case D.invalid_type:r.received===W.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case D.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,me.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:t=`Unrecognized key(s) in object: ${me.joinValues(r.keys,", ")}`;break;case D.invalid_union:t="Invalid input";break;case D.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${me.joinValues(r.options)}`;break;case D.invalid_enum_value:t=`Invalid enum value. Expected ${me.joinValues(r.options)}, received '${r.received}'`;break;case D.invalid_arguments:t="Invalid function arguments";break;case D.invalid_return_type:t="Invalid function return type";break;case D.invalid_date:t="Invalid date";break;case D.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:me.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case D.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case D.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case D.custom:t="Invalid input";break;case D.invalid_intersection_types:t="Intersection results could not be merged";break;case D.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case D.not_finite:t="Number must be finite";break;default:t=e.defaultError,me.assertNever(r)}return{message:t}},ty=ls;function hx(r){ty=r}function Ui(){return ty}var Qi=r=>{let{data:e,path:t,errorMaps:s,issueData:n}=r,i=[...t,...n.path||[]],o={...n,path:i};if(n.message!==void 0)return{...n,path:i,message:n.message};let a="",c=s.filter(h=>!!h).slice().reverse();for(let h of c)a=h(o,{data:e,defaultError:a}).message;return{...n,path:i,message:a}},dx=[];function V(r,e){let t=Ui(),s=Qi({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===ls?void 0:ls].filter(n=>!!n)});r.common.issues.push(s)}var ze=class r{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let s=[];for(let n of t){if(n.status==="aborted")return ne;n.status==="dirty"&&e.dirty(),s.push(n.value)}return{status:e.value,value:s}}static async mergeObjectAsync(e,t){let s=[];for(let n of t){let i=await n.key,o=await n.value;s.push({key:i,value:o})}return r.mergeObjectSync(e,s)}static mergeObjectSync(e,t){let s={};for(let n of t){let{key:i,value:o}=n;if(i.status==="aborted"||o.status==="aborted")return ne;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(s[i.value]=o.value)}return{status:e.value,value:s}}},ne=Object.freeze({status:"aborted"}),cs=r=>({status:"dirty",value:r}),He=r=>({status:"valid",value:r}),xc=r=>r.status==="aborted",Tc=r=>r.status==="dirty",gr=r=>r.status==="valid",dn=r=>typeof Promise<"u"&&r instanceof Promise;function Vi(r,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(r):s?s.value:e.get(r)}function ry(r,e,t,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(r,t):n?n.value=t:e.set(r,t),t}var Y;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(Y||(Y={}));var fn,hn,dt=class{constructor(e,t,s,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=s,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Jg=(r,e)=>{if(gr(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new st(r.common.issues);return this._error=t,this._error}}};function le(r){if(!r)return{};let{errorMap:e,invalid_type_error:t,required_error:s,description:n}=r;if(e&&(t||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(o,a)=>{var c,h;let{message:l}=r;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:(c=l??s)!==null&&c!==void 0?c:a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:(h=l??t)!==null&&h!==void 0?h:a.defaultError}},description:n}}var fe=class{get description(){return this._def.description}_getType(e){return Ut(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Ut(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ze,ctx:{common:e.parent.common,data:e.data,parsedType:Ut(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(dn(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let s=this.safeParse(e,t);if(s.success)return s.data;throw s.error}safeParse(e,t){var s;let n={common:{issues:[],async:(s=t?.async)!==null&&s!==void 0?s:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ut(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Jg(n,i)}"~validate"(e){var t,s;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ut(e)};if(!this["~standard"].async)try{let i=this._parseSync({data:e,path:[],parent:n});return gr(i)?{value:i.value}:{issues:n.common.issues}}catch(i){!((s=(t=i?.message)===null||t===void 0?void 0:t.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(i=>gr(i)?{value:i.value}:{issues:n.common.issues})}async parseAsync(e,t){let s=await this.safeParseAsync(e,t);if(s.success)return s.data;throw s.error}async safeParseAsync(e,t){let s={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ut(e)},n=this._parse({data:e,path:s.path,parent:s}),i=await(dn(n)?n:Promise.resolve(n));return Jg(s,i)}refine(e,t){let s=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,i)=>{let o=e(n),a=()=>i.addIssue({code:D.custom,...s(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((s,n)=>e(s)?!0:(n.addIssue(typeof t=="function"?t(s,n):t),!1))}_refinement(e){return new nt({schema:this,typeName:se.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return ht.create(this,this._def)}nullable(){return At.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vt.create(this)}promise(){return tr.create(this,this._def)}or(e){return Er.create([this,e],this._def)}and(e){return xr.create(this,e,this._def)}transform(e){return new nt({...le(this._def),schema:this,typeName:se.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Ir({...le(this._def),innerType:this,defaultValue:t,typeName:se.ZodDefault})}brand(){return new pn({typeName:se.ZodBranded,type:this,...le(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new Pr({...le(this._def),innerType:this,catchValue:t,typeName:se.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return mn.create(this,e)}readonly(){return Or.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},px=/^c[^\s-]{8,}$/i,mx=/^[0-9a-z]+$/,gx=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,bx=/^[a-z0-9_-]{21}$/i,vx=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,wx=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_x=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Sx="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Sc,Ex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xx=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Tx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Cx=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nx=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ax=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,sy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ix=new RegExp(`^${sy}$`);function ny(r){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Px(r){return new RegExp(`^${ny(r)}$`)}function iy(r){let e=`${sy}T${ny(r)}`,t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Ox(r,e){return!!((e==="v4"||!e)&&Ex.test(r)||(e==="v6"||!e)&&Tx.test(r))}function Rx(r,e){if(!vx.test(r))return!1;try{let[t]=r.split("."),s=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(s));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function Lx(r,e){return!!((e==="v4"||!e)&&xx.test(r)||(e==="v6"||!e)&&Cx.test(r))}var Yt=class r extends fe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==W.string){let i=this._getOrReturnCtx(e);return V(i,{code:D.invalid_type,expected:W.string,received:i.parsedType}),ne}let s=new ze,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(n=this._getOrReturnCtx(e,n),o?V(n,{code:D.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&V(n,{code:D.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")_x.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"email",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")Sc||(Sc=new RegExp(Sx,"u")),Sc.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"emoji",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")yx.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"uuid",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")bx.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"nanoid",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")px.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"cuid",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")mx.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"cuid2",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")gx.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"ulid",code:D.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),V(n,{validation:"url",code:D.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"regex",code:D.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?iy(i).test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?Ix.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?Px(i).test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{code:D.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?wx.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"duration",code:D.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?Ox(e.data,i.version)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"ip",code:D.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?Rx(e.data,i.alg)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"jwt",code:D.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?Lx(e.data,i.version)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"cidr",code:D.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?Nx.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"base64",code:D.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?Ax.test(e.data)||(n=this._getOrReturnCtx(e,n),V(n,{validation:"base64url",code:D.invalid_string,message:i.message}),s.dirty()):me.assertNever(i);return{status:s.value,value:e.data}}_regex(e,t,s){return this.refinement(n=>e.test(n),{validation:t,code:D.invalid_string,...Y.errToObj(s)})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Y.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Y.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Y.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Y.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Y.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Y.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Y.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Y.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Y.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Y.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Y.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Y.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Y.errToObj(e)})}datetime(e){var t,s;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(s=e?.local)!==null&&s!==void 0?s:!1,...Y.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Y.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Y.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Y.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...Y.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Y.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Y.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Y.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Y.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Y.errToObj(t)})}nonempty(e){return this.min(1,Y.errToObj(e))}trim(){return new r({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new r({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Yt.create=r=>{var e;return new Yt({checks:[],typeName:se.ZodString,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...le(r)})};function kx(r,e){let t=(r.toString().split(".")[1]||"").length,s=(e.toString().split(".")[1]||"").length,n=t>s?t:s,i=parseInt(r.toFixed(n).replace(".","")),o=parseInt(e.toFixed(n).replace(".",""));return i%o/Math.pow(10,n)}var yr=class r extends fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==W.number){let i=this._getOrReturnCtx(e);return V(i,{code:D.invalid_type,expected:W.number,received:i.parsedType}),ne}let s,n=new ze;for(let i of this._def.checks)i.kind==="int"?me.isInteger(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:D.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),V(s,{code:D.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),V(s,{code:D.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?kx(e.data,i.value)!==0&&(s=this._getOrReturnCtx(e,s),V(s,{code:D.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(s=this._getOrReturnCtx(e,s),V(s,{code:D.not_finite,message:i.message}),n.dirty()):me.assertNever(i);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Y.toString(t))}setLimit(e,t,s,n){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Y.toString(n)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Y.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Y.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Y.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Y.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&me.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(t===null||s.value>t)&&(t=s.value):s.kind==="max"&&(e===null||s.value<e)&&(e=s.value)}return Number.isFinite(t)&&Number.isFinite(e)}};yr.create=r=>new yr({checks:[],typeName:se.ZodNumber,coerce:r?.coerce||!1,...le(r)});var br=class r extends fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==W.bigint)return this._getInvalidInput(e);let s,n=new ze;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(s=this._getOrReturnCtx(e,s),V(s,{code:D.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(s=this._getOrReturnCtx(e,s),V(s,{code:D.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(e,s),V(s,{code:D.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):me.assertNever(i);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return V(t,{code:D.invalid_type,expected:W.bigint,received:t.parsedType}),ne}gte(e,t){return this.setLimit("min",e,!0,Y.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Y.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Y.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Y.toString(t))}setLimit(e,t,s,n){return new r({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:s,message:Y.toString(n)}]})}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Y.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Y.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Y.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};br.create=r=>{var e;return new br({checks:[],typeName:se.ZodBigInt,coerce:(e=r?.coerce)!==null&&e!==void 0?e:!1,...le(r)})};var vr=class extends fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==W.boolean){let s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:W.boolean,received:s.parsedType}),ne}return He(e.data)}};vr.create=r=>new vr({typeName:se.ZodBoolean,coerce:r?.coerce||!1,...le(r)});var wr=class r extends fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==W.date){let i=this._getOrReturnCtx(e);return V(i,{code:D.invalid_type,expected:W.date,received:i.parsedType}),ne}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return V(i,{code:D.invalid_date}),ne}let s=new ze,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),V(n,{code:D.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):me.assertNever(i);return{status:s.value,value:new Date(e.data.getTime())}}_addCheck(e){return new r({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Y.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Y.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};wr.create=r=>new wr({checks:[],coerce:r?.coerce||!1,typeName:se.ZodDate,...le(r)});var fs=class extends fe{_parse(e){if(this._getType(e)!==W.symbol){let s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:W.symbol,received:s.parsedType}),ne}return He(e.data)}};fs.create=r=>new fs({typeName:se.ZodSymbol,...le(r)});var _r=class extends fe{_parse(e){if(this._getType(e)!==W.undefined){let s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:W.undefined,received:s.parsedType}),ne}return He(e.data)}};_r.create=r=>new _r({typeName:se.ZodUndefined,...le(r)});var Sr=class extends fe{_parse(e){if(this._getType(e)!==W.null){let s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:W.null,received:s.parsedType}),ne}return He(e.data)}};Sr.create=r=>new Sr({typeName:se.ZodNull,...le(r)});var er=class extends fe{constructor(){super(...arguments),this._any=!0}_parse(e){return He(e.data)}};er.create=r=>new er({typeName:se.ZodAny,...le(r)});var Qt=class extends fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return He(e.data)}};Qt.create=r=>new Qt({typeName:se.ZodUnknown,...le(r)});var wt=class extends fe{_parse(e){let t=this._getOrReturnCtx(e);return V(t,{code:D.invalid_type,expected:W.never,received:t.parsedType}),ne}};wt.create=r=>new wt({typeName:se.ZodNever,...le(r)});var hs=class extends fe{_parse(e){if(this._getType(e)!==W.undefined){let s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:W.void,received:s.parsedType}),ne}return He(e.data)}};hs.create=r=>new hs({typeName:se.ZodVoid,...le(r)});var Vt=class r extends fe{_parse(e){let{ctx:t,status:s}=this._processInputParams(e),n=this._def;if(t.parsedType!==W.array)return V(t,{code:D.invalid_type,expected:W.array,received:t.parsedType}),ne;if(n.exactLength!==null){let o=t.data.length>n.exactLength.value,a=t.data.length<n.exactLength.value;(o||a)&&(V(t,{code:o?D.too_big:D.too_small,minimum:a?n.exactLength.value:void 0,maximum:o?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),s.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(V(t,{code:D.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),s.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(V(t,{code:D.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),s.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>n.type._parseAsync(new dt(t,o,t.path,a)))).then(o=>ze.mergeArray(s,o));let i=[...t.data].map((o,a)=>n.type._parseSync(new dt(t,o,t.path,a)));return ze.mergeArray(s,i)}get element(){return this._def.type}min(e,t){return new r({...this._def,minLength:{value:e,message:Y.toString(t)}})}max(e,t){return new r({...this._def,maxLength:{value:e,message:Y.toString(t)}})}length(e,t){return new r({...this._def,exactLength:{value:e,message:Y.toString(t)}})}nonempty(e){return this.min(1,e)}};Vt.create=(r,e)=>new Vt({type:r,minLength:null,maxLength:null,exactLength:null,typeName:se.ZodArray,...le(e)});function us(r){if(r instanceof tt){let e={};for(let t in r.shape){let s=r.shape[t];e[t]=ht.create(us(s))}return new tt({...r._def,shape:()=>e})}else return r instanceof Vt?new Vt({...r._def,type:us(r.element)}):r instanceof ht?ht.create(us(r.unwrap())):r instanceof At?At.create(us(r.unwrap())):r instanceof Nt?Nt.create(r.items.map(e=>us(e))):r}var tt=class r extends fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=me.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==W.object){let h=this._getOrReturnCtx(e);return V(h,{code:D.invalid_type,expected:W.object,received:h.parsedType}),ne}let{status:s,ctx:n}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof wt&&this._def.unknownKeys==="strip"))for(let h in n.data)o.includes(h)||a.push(h);let c=[];for(let h of o){let l=i[h],p=n.data[h];c.push({key:{status:"valid",value:h},value:l._parse(new dt(n,p,n.path,h)),alwaysSet:h in n.data})}if(this._def.catchall instanceof wt){let h=this._def.unknownKeys;if(h==="passthrough")for(let l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:n.data[l]}});else if(h==="strict")a.length>0&&(V(n,{code:D.unrecognized_keys,keys:a}),s.dirty());else if(h!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let h=this._def.catchall;for(let l of a){let p=n.data[l];c.push({key:{status:"valid",value:l},value:h._parse(new dt(n,p,n.path,l)),alwaysSet:l in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let h=[];for(let l of c){let p=await l.key,g=await l.value;h.push({key:p,value:g,alwaysSet:l.alwaysSet})}return h}).then(h=>ze.mergeObjectSync(s,h)):ze.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(e){return Y.errToObj,new r({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,s)=>{var n,i,o,a;let c=(o=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,t,s).message)!==null&&o!==void 0?o:s.defaultError;return t.code==="unrecognized_keys"?{message:(a=Y.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new r({...this._def,unknownKeys:"strip"})}passthrough(){return new r({...this._def,unknownKeys:"passthrough"})}extend(e){return new r({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new r({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:se.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new r({...this._def,catchall:e})}pick(e){let t={};return me.objectKeys(e).forEach(s=>{e[s]&&this.shape[s]&&(t[s]=this.shape[s])}),new r({...this._def,shape:()=>t})}omit(e){let t={};return me.objectKeys(this.shape).forEach(s=>{e[s]||(t[s]=this.shape[s])}),new r({...this._def,shape:()=>t})}deepPartial(){return us(this)}partial(e){let t={};return me.objectKeys(this.shape).forEach(s=>{let n=this.shape[s];e&&!e[s]?t[s]=n:t[s]=n.optional()}),new r({...this._def,shape:()=>t})}required(e){let t={};return me.objectKeys(this.shape).forEach(s=>{if(e&&!e[s])t[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof ht;)i=i._def.innerType;t[s]=i}}),new r({...this._def,shape:()=>t})}keyof(){return oy(me.objectKeys(this.shape))}};tt.create=(r,e)=>new tt({shape:()=>r,unknownKeys:"strip",catchall:wt.create(),typeName:se.ZodObject,...le(e)});tt.strictCreate=(r,e)=>new tt({shape:()=>r,unknownKeys:"strict",catchall:wt.create(),typeName:se.ZodObject,...le(e)});tt.lazycreate=(r,e)=>new tt({shape:r,unknownKeys:"strip",catchall:wt.create(),typeName:se.ZodObject,...le(e)});var Er=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),s=this._def.options;function n(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new st(a.ctx.common.issues));return V(t,{code:D.invalid_union,unionErrors:o}),ne}if(t.common.async)return Promise.all(s.map(async i=>{let o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(n);{let i,o=[];for(let c of s){let h={...t,common:{...t.common,issues:[]},parent:null},l=c._parseSync({data:t.data,path:t.path,parent:h});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(c=>new st(c));return V(t,{code:D.invalid_union,unionErrors:a}),ne}}get options(){return this._def.options}};Er.create=(r,e)=>new Er({options:r,typeName:se.ZodUnion,...le(e)});var Ft=r=>r instanceof Tr?Ft(r.schema):r instanceof nt?Ft(r.innerType()):r instanceof Cr?[r.value]:r instanceof Nr?r.options:r instanceof Ar?me.objectValues(r.enum):r instanceof Ir?Ft(r._def.innerType):r instanceof _r?[void 0]:r instanceof Sr?[null]:r instanceof ht?[void 0,...Ft(r.unwrap())]:r instanceof At?[null,...Ft(r.unwrap())]:r instanceof pn||r instanceof Or?Ft(r.unwrap()):r instanceof Pr?Ft(r._def.innerType):[],zi=class r extends fe{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==W.object)return V(t,{code:D.invalid_type,expected:W.object,received:t.parsedType}),ne;let s=this.discriminator,n=t.data[s],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(V(t,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),ne)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,s){let n=new Map;for(let i of t){let o=Ft(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(n.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);n.set(a,i)}}return new r({typeName:se.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...le(s)})}};function Cc(r,e){let t=Ut(r),s=Ut(e);if(r===e)return{valid:!0,data:r};if(t===W.object&&s===W.object){let n=me.objectKeys(e),i=me.objectKeys(r).filter(a=>n.indexOf(a)!==-1),o={...r,...e};for(let a of i){let c=Cc(r[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===W.array&&s===W.array){if(r.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<r.length;i++){let o=r[i],a=e[i],c=Cc(o,a);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===W.date&&s===W.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}var xr=class extends fe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e),n=(i,o)=>{if(xc(i)||xc(o))return ne;let a=Cc(i.value,o.value);return a.valid?((Tc(i)||Tc(o))&&t.dirty(),{status:t.value,value:a.data}):(V(s,{code:D.invalid_intersection_types}),ne)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>n(i,o)):n(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}};xr.create=(r,e,t)=>new xr({left:r,right:e,typeName:se.ZodIntersection,...le(t)});var Nt=class r extends fe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.array)return V(s,{code:D.invalid_type,expected:W.array,received:s.parsedType}),ne;if(s.data.length<this._def.items.length)return V(s,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&s.data.length>this._def.items.length&&(V(s,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let i=[...s.data].map((o,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new dt(s,o,s.path,a)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>ze.mergeArray(t,o)):ze.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new r({...this._def,rest:e})}};Nt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Nt({items:r,typeName:se.ZodTuple,rest:null,...le(e)})};var Wi=class r extends fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.object)return V(s,{code:D.invalid_type,expected:W.object,received:s.parsedType}),ne;let n=[],i=this._def.keyType,o=this._def.valueType;for(let a in s.data)n.push({key:i._parse(new dt(s,a,s.path,a)),value:o._parse(new dt(s,s.data[a],s.path,a)),alwaysSet:a in s.data});return s.common.async?ze.mergeObjectAsync(t,n):ze.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,s){return t instanceof fe?new r({keyType:e,valueType:t,typeName:se.ZodRecord,...le(s)}):new r({keyType:Yt.create(),valueType:e,typeName:se.ZodRecord,...le(t)})}},ds=class extends fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.map)return V(s,{code:D.invalid_type,expected:W.map,received:s.parsedType}),ne;let n=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([a,c],h)=>({key:n._parse(new dt(s,a,s.path,[h,"key"])),value:i._parse(new dt(s,c,s.path,[h,"value"]))}));if(s.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of o){let h=await c.key,l=await c.value;if(h.status==="aborted"||l.status==="aborted")return ne;(h.status==="dirty"||l.status==="dirty")&&t.dirty(),a.set(h.value,l.value)}return{status:t.value,value:a}})}else{let a=new Map;for(let c of o){let h=c.key,l=c.value;if(h.status==="aborted"||l.status==="aborted")return ne;(h.status==="dirty"||l.status==="dirty")&&t.dirty(),a.set(h.value,l.value)}return{status:t.value,value:a}}}};ds.create=(r,e,t)=>new ds({valueType:e,keyType:r,typeName:se.ZodMap,...le(t)});var ps=class r extends fe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.parsedType!==W.set)return V(s,{code:D.invalid_type,expected:W.set,received:s.parsedType}),ne;let n=this._def;n.minSize!==null&&s.data.size<n.minSize.value&&(V(s,{code:D.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&s.data.size>n.maxSize.value&&(V(s,{code:D.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let i=this._def.valueType;function o(c){let h=new Set;for(let l of c){if(l.status==="aborted")return ne;l.status==="dirty"&&t.dirty(),h.add(l.value)}return{status:t.value,value:h}}let a=[...s.data.values()].map((c,h)=>i._parse(new dt(s,c,s.path,h)));return s.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new r({...this._def,minSize:{value:e,message:Y.toString(t)}})}max(e,t){return new r({...this._def,maxSize:{value:e,message:Y.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};ps.create=(r,e)=>new ps({valueType:r,minSize:null,maxSize:null,typeName:se.ZodSet,...le(e)});var Gi=class r extends fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==W.function)return V(t,{code:D.invalid_type,expected:W.function,received:t.parsedType}),ne;function s(a,c){return Qi({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ui(),ls].filter(h=>!!h),issueData:{code:D.invalid_arguments,argumentsError:c}})}function n(a,c){return Qi({data:a,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Ui(),ls].filter(h=>!!h),issueData:{code:D.invalid_return_type,returnTypeError:c}})}let i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof tr){let a=this;return He(async function(...c){let h=new st([]),l=await a._def.args.parseAsync(c,i).catch(v=>{throw h.addIssue(s(c,v)),h}),p=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(p,i).catch(v=>{throw h.addIssue(n(p,v)),h})})}else{let a=this;return He(function(...c){let h=a._def.args.safeParse(c,i);if(!h.success)throw new st([s(c,h.error)]);let l=Reflect.apply(o,this,h.data),p=a._def.returns.safeParse(l,i);if(!p.success)throw new st([n(l,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new r({...this._def,args:Nt.create(e).rest(Qt.create())})}returns(e){return new r({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,s){return new r({args:e||Nt.create([]).rest(Qt.create()),returns:t||Qt.create(),typeName:se.ZodFunction,...le(s)})}},Tr=class extends fe{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Tr.create=(r,e)=>new Tr({getter:r,typeName:se.ZodLazy,...le(e)});var Cr=class extends fe{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return V(t,{received:t.data,code:D.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:e.data}}get value(){return this._def.value}};Cr.create=(r,e)=>new Cr({value:r,typeName:se.ZodLiteral,...le(e)});function oy(r,e){return new Nr({values:r,typeName:se.ZodEnum,...le(e)})}var Nr=class r extends fe{constructor(){super(...arguments),fn.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),s=this._def.values;return V(t,{expected:me.joinValues(s),received:t.parsedType,code:D.invalid_type}),ne}if(Vi(this,fn,"f")||ry(this,fn,new Set(this._def.values),"f"),!Vi(this,fn,"f").has(e.data)){let t=this._getOrReturnCtx(e),s=this._def.values;return V(t,{received:t.data,code:D.invalid_enum_value,options:s}),ne}return He(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return r.create(e,{...this._def,...t})}exclude(e,t=this._def){return r.create(this.options.filter(s=>!e.includes(s)),{...this._def,...t})}};fn=new WeakMap;Nr.create=oy;var Ar=class extends fe{constructor(){super(...arguments),hn.set(this,void 0)}_parse(e){let t=me.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(e);if(s.parsedType!==W.string&&s.parsedType!==W.number){let n=me.objectValues(t);return V(s,{expected:me.joinValues(n),received:s.parsedType,code:D.invalid_type}),ne}if(Vi(this,hn,"f")||ry(this,hn,new Set(me.getValidEnumValues(this._def.values)),"f"),!Vi(this,hn,"f").has(e.data)){let n=me.objectValues(t);return V(s,{received:s.data,code:D.invalid_enum_value,options:n}),ne}return He(e.data)}get enum(){return this._def.values}};hn=new WeakMap;Ar.create=(r,e)=>new Ar({values:r,typeName:se.ZodNativeEnum,...le(e)});var tr=class extends fe{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==W.promise&&t.common.async===!1)return V(t,{code:D.invalid_type,expected:W.promise,received:t.parsedType}),ne;let s=t.parsedType===W.promise?t.data:Promise.resolve(t.data);return He(s.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}};tr.create=(r,e)=>new tr({type:r,typeName:se.ZodPromise,...le(e)});var nt=class extends fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===se.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:s}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:o=>{V(s,o),o.fatal?t.abort():t.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let o=n.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return ne;let c=await this._def.schema._parseAsync({data:a,path:s.path,parent:s});return c.status==="aborted"?ne:c.status==="dirty"||t.value==="dirty"?cs(c.value):c});{if(t.value==="aborted")return ne;let a=this._def.schema._parseSync({data:o,path:s.path,parent:s});return a.status==="aborted"?ne:a.status==="dirty"||t.value==="dirty"?cs(a.value):a}}if(n.type==="refinement"){let o=a=>{let c=n.refinement(a,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(s.common.async===!1){let a=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?ne:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(a=>a.status==="aborted"?ne:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(n.type==="transform")if(s.common.async===!1){let o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!gr(o))return o;let a=n.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>gr(o)?Promise.resolve(n.transform(o.value,i)).then(a=>({status:t.value,value:a})):o);me.assertNever(n)}};nt.create=(r,e,t)=>new nt({schema:r,typeName:se.ZodEffects,effect:e,...le(t)});nt.createWithPreprocess=(r,e,t)=>new nt({schema:e,effect:{type:"preprocess",transform:r},typeName:se.ZodEffects,...le(t)});var ht=class extends fe{_parse(e){return this._getType(e)===W.undefined?He(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ht.create=(r,e)=>new ht({innerType:r,typeName:se.ZodOptional,...le(e)});var At=class extends fe{_parse(e){return this._getType(e)===W.null?He(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};At.create=(r,e)=>new At({innerType:r,typeName:se.ZodNullable,...le(e)});var Ir=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return t.parsedType===W.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Ir.create=(r,e)=>new Ir({innerType:r,typeName:se.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...le(e)});var Pr=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),s={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return dn(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new st(s.common.issues)},input:s.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new st(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}};Pr.create=(r,e)=>new Pr({innerType:r,typeName:se.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...le(e)});var ms=class extends fe{_parse(e){if(this._getType(e)!==W.nan){let s=this._getOrReturnCtx(e);return V(s,{code:D.invalid_type,expected:W.nan,received:s.parsedType}),ne}return{status:"valid",value:e.data}}};ms.create=r=>new ms({typeName:se.ZodNaN,...le(r)});var $x=Symbol("zod_brand"),pn=class extends fe{_parse(e){let{ctx:t}=this._processInputParams(e),s=t.data;return this._def.type._parse({data:s,path:t.path,parent:t})}unwrap(){return this._def.type}},mn=class r extends fe{_parse(e){let{status:t,ctx:s}=this._processInputParams(e);if(s.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?ne:i.status==="dirty"?(t.dirty(),cs(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{let n=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return n.status==="aborted"?ne:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:s.path,parent:s})}}static create(e,t){return new r({in:e,out:t,typeName:se.ZodPipeline})}},Or=class extends fe{_parse(e){let t=this._def.innerType._parse(e),s=n=>(gr(n)&&(n.value=Object.freeze(n.value)),n);return dn(t)?t.then(n=>s(n)):s(t)}unwrap(){return this._def.innerType}};Or.create=(r,e)=>new Or({innerType:r,typeName:se.ZodReadonly,...le(e)});function Yg(r,e){let t=typeof r=="function"?r(e):typeof r=="string"?{message:r}:r;return typeof t=="string"?{message:t}:t}function ay(r,e={},t){return r?er.create().superRefine((s,n)=>{var i,o;let a=r(s);if(a instanceof Promise)return a.then(c=>{var h,l;if(!c){let p=Yg(e,s),g=(l=(h=p.fatal)!==null&&h!==void 0?h:t)!==null&&l!==void 0?l:!0;n.addIssue({code:"custom",...p,fatal:g})}});if(!a){let c=Yg(e,s),h=(o=(i=c.fatal)!==null&&i!==void 0?i:t)!==null&&o!==void 0?o:!0;n.addIssue({code:"custom",...c,fatal:h})}}):er.create()}var Bx={object:tt.lazycreate},se;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(se||(se={}));var Mx=(r,e={message:`Input not instance of ${r.name}`})=>ay(t=>t instanceof r,e),uy=Yt.create,cy=yr.create,qx=ms.create,Dx=br.create,ly=vr.create,jx=wr.create,Fx=fs.create,Ux=_r.create,Qx=Sr.create,Vx=er.create,zx=Qt.create,Wx=wt.create,Gx=hs.create,Kx=Vt.create,Hx=tt.create,Zx=tt.strictCreate,Xx=Er.create,Jx=zi.create,Yx=xr.create,eT=Nt.create,tT=Wi.create,rT=ds.create,sT=ps.create,nT=Gi.create,iT=Tr.create,oT=Cr.create,aT=Nr.create,uT=Ar.create,cT=tr.create,ey=nt.create,lT=ht.create,fT=At.create,hT=nt.createWithPreprocess,dT=mn.create,pT=()=>uy().optional(),mT=()=>cy().optional(),gT=()=>ly().optional(),yT={string:r=>Yt.create({...r,coerce:!0}),number:r=>yr.create({...r,coerce:!0}),boolean:r=>vr.create({...r,coerce:!0}),bigint:r=>br.create({...r,coerce:!0}),date:r=>wr.create({...r,coerce:!0})},bT=ne,Pe=Object.freeze({__proto__:null,defaultErrorMap:ls,setErrorMap:hx,getErrorMap:Ui,makeIssue:Qi,EMPTY_PATH:dx,addIssueToContext:V,ParseStatus:ze,INVALID:ne,DIRTY:cs,OK:He,isAborted:xc,isDirty:Tc,isValid:gr,isAsync:dn,get util(){return me},get objectUtil(){return Ec},ZodParsedType:W,getParsedType:Ut,ZodType:fe,datetimeRegex:iy,ZodString:Yt,ZodNumber:yr,ZodBigInt:br,ZodBoolean:vr,ZodDate:wr,ZodSymbol:fs,ZodUndefined:_r,ZodNull:Sr,ZodAny:er,ZodUnknown:Qt,ZodNever:wt,ZodVoid:hs,ZodArray:Vt,ZodObject:tt,ZodUnion:Er,ZodDiscriminatedUnion:zi,ZodIntersection:xr,ZodTuple:Nt,ZodRecord:Wi,ZodMap:ds,ZodSet:ps,ZodFunction:Gi,ZodLazy:Tr,ZodLiteral:Cr,ZodEnum:Nr,ZodNativeEnum:Ar,ZodPromise:tr,ZodEffects:nt,ZodTransformer:nt,ZodOptional:ht,ZodNullable:At,ZodDefault:Ir,ZodCatch:Pr,ZodNaN:ms,BRAND:$x,ZodBranded:pn,ZodPipeline:mn,ZodReadonly:Or,custom:ay,Schema:fe,ZodSchema:fe,late:Bx,get ZodFirstPartyTypeKind(){return se},coerce:yT,any:Vx,array:Kx,bigint:Dx,boolean:ly,date:jx,discriminatedUnion:Jx,effect:ey,enum:aT,function:nT,instanceof:Mx,intersection:Yx,lazy:iT,literal:oT,map:rT,nan:qx,nativeEnum:uT,never:Wx,null:Qx,nullable:fT,number:cy,object:Hx,oboolean:gT,onumber:mT,optional:lT,ostring:pT,pipeline:dT,preprocess:hT,promise:cT,record:tT,set:sT,strictObject:Zx,string:uy,symbol:Fx,transformer:ey,tuple:eT,undefined:Ux,union:Xx,unknown:zx,void:Gx,NEVER:bT,ZodIssueCode:D,quotelessJson:fx,ZodError:st});var Ae={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Oe(r,e){return e.includes(r.columnType)}function vT(r){return"enumValues"in r&&Array.isArray(r.enumValues)&&r.enumValues.length>0}var wT=Pe.union([Pe.string(),Pe.number(),Pe.boolean(),Pe.null()]),_T=Pe.union([wT,Pe.record(Pe.any()),Pe.array(Pe.any())]),ST=Pe.custom(r=>r instanceof Buffer);function fy(r,e){let t=e?.zodInstance??Pe,s=e?.coerce??{},n;return vT(r)&&(n=r.enumValues.length?t.enum(r.enumValues):t.string()),n||(Oe(r,["PgGeometry","PgPointTuple"])?n=t.tuple([t.number(),t.number()]):Oe(r,["PgGeometryObject","PgPointObject"])?n=t.object({x:t.number(),y:t.number()}):Oe(r,["PgHalfVector","PgVector"])?(n=t.array(t.number()),n=r.dimensions?n.length(r.dimensions):n):Oe(r,["PgLine"])?n=t.tuple([t.number(),t.number(),t.number()]):Oe(r,["PgLineABC"])?n=t.object({a:t.number(),b:t.number(),c:t.number()}):Oe(r,["PgArray"])?(n=t.array(fy(r.baseColumn,t)),n=r.size?n.length(r.size):n):r.dataType==="array"?n=t.array(t.any()):r.dataType==="number"?n=ET(r,t,s):r.dataType==="bigint"?n=xT(r,t,s):r.dataType==="boolean"?n=s===!0||s.boolean?t.coerce.boolean():t.boolean():r.dataType==="date"?n=s===!0||s.date?t.coerce.date():t.date():r.dataType==="string"?n=TT(r,t,s):r.dataType==="json"?n=_T:r.dataType==="custom"?n=t.any():r.dataType==="buffer"&&(n=ST)),n||(n=t.any()),n}function ET(r,e,t){let s=r.getSQLType().includes("unsigned"),n,i,o=!1;Oe(r,["MySqlTinyInt","SingleStoreTinyInt"])?(n=s?0:Ae.INT8_MIN,i=s?Ae.INT8_UNSIGNED_MAX:Ae.INT8_MAX,o=!0):Oe(r,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(n=s?0:Ae.INT16_MIN,i=s?Ae.INT16_UNSIGNED_MAX:Ae.INT16_MAX,o=!0):Oe(r,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(n=s?0:Ae.INT24_MIN,i=s?Ae.INT24_UNSIGNED_MAX:Ae.INT24_MAX,o=Oe(r,["MySqlMediumInt","SingleStoreMediumInt"])):Oe(r,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(n=s?0:Ae.INT32_MIN,i=s?Ae.INT32_UNSIGNED_MAX:Ae.INT32_MAX,o=!0):Oe(r,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(n=s?0:Ae.INT48_MIN,i=s?Ae.INT48_UNSIGNED_MAX:Ae.INT48_MAX):Oe(r,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||Oe(r,["MySqlSerial","SingleStoreSerial"]),n=s?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):Oe(r,["MySqlYear","SingleStoreYear"])?(n=1901,i=2155,o=!0):(n=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let a=t===!0||t?.number?e.coerce.number():e.number();return a=a.min(n).max(i),o?a.int():a}function xT(r,e,t){let s=r.getSQLType().includes("unsigned"),n=s?0n:Ae.INT64_MIN,i=s?Ae.INT64_UNSIGNED_MAX:Ae.INT64_MAX;return(t===!0||t?.bigint?e.coerce.bigint():e.bigint()).min(n).max(i)}function TT(r,e,t){if(Oe(r,["PgUUID"]))return e.string().uuid();let s,n,i=!1;Oe(r,["PgVarchar","SQLiteText"])?s=r.length:Oe(r,["MySqlVarChar","SingleStoreVarChar"])?s=r.length??Ae.INT16_UNSIGNED_MAX:Oe(r,["MySqlText","SingleStoreText"])&&(r.textType==="longtext"?s=Ae.INT32_UNSIGNED_MAX:r.textType==="mediumtext"?s=Ae.INT24_UNSIGNED_MAX:r.textType==="text"?s=Ae.INT16_UNSIGNED_MAX:s=Ae.INT8_UNSIGNED_MAX),Oe(r,["PgChar","MySqlChar","SingleStoreChar"])&&(s=r.length,i=!0),Oe(r,["PgBinaryVector"])&&(n=/^[01]+$/,s=r.dimensions);let o=t===!0||t?.string?e.coerce.string():e.string();return o=n?o.regex(n):o,s&&i?o.length(s):s?o.max(s):o}function hy(r){return Io(r)?kn(r):Ql(r)}function dy(r,e,t,s){let n={};for(let[i,o]of Object.entries(r)){if(!M(o,ye)&&!M(o,X)&&!M(o,X.Aliased)&&typeof o=="object"){let p=Io(o)||Dl(o)?hy(o):o;n[i]=dy(p,e[i]??{},t,s);continue}let a=e[i];if(a!==void 0&&typeof a!="function"){n[i]=a;continue}let c=M(o,ye)?o:void 0,h=c?fy(c,s):Pe.any(),l=typeof a=="function"?a(h):h;t.never(c)||(n[i]=l,c&&(t.nullable(c)&&(n[i]=n[i].nullable()),t.optional(c)&&(n[i]=n[i].optional())))}return Pe.object(n)}var CT={never:r=>r?.generated?.type==="always"||r?.generatedIdentity?.type==="always",optional:r=>!r.notNull||r.notNull&&r.hasDefault,nullable:r=>!r.notNull};var gs=(r,e)=>{let t=hy(r);return dy(t,e??{},CT)};var Ki=Ur("users",{id:Wt("id").primaryKey(),username:ue("username").notNull().unique(),password:ue("password").notNull()}),NT=Ur("franchises",{id:Wt("id").primaryKey(),name:ue("name").notNull(),description:ue("description"),category:ue("category").notNull(),country:ue("country").notNull(),state:ue("state"),investmentRange:ue("investment_range"),imageUrl:ue("image_url"),contactEmail:ue("contact_email"),investmentMin:zt("investment_min"),investmentMax:zt("investment_max"),isActive:Fr("is_active").default(!0),createdAt:ar("created_at").defaultNow()}),AT=Ur("businesses",{id:Wt("id").primaryKey(),name:ue("name").notNull(),description:ue("description"),category:ue("category").notNull(),country:ue("country").notNull(),state:ue("state"),price:zt("price"),imageUrl:ue("image_url"),contactEmail:ue("contact_email"),package:ue("package"),yearEstablished:ue("year_established"),employees:ue("employees"),revenue:ue("revenue"),reason:ue("reason"),assets:ue("assets"),status:ue("status").default("pending"),paymentStatus:ue("payment_status").default("unpaid"),isActive:Fr("is_active").default(!1),createdAt:ar("created_at").defaultNow()}),IT=Ur("advertisements",{id:Wt("id").primaryKey(),title:ue("title").notNull(),description:ue("description"),imageUrl:ue("image_url").notNull(),targetUrl:ue("target_url"),package:ue("package"),company:ue("company"),contactEmail:ue("contact_email"),contactPhone:ue("contact_phone"),budget:ue("budget"),status:ue("status").default("pending"),paymentStatus:ue("payment_status").default("unpaid"),isActive:Fr("is_active").default(!1),createdAt:ar("created_at").defaultNow()}),PT=Ur("inquiries",{id:Wt("id").primaryKey(),name:ue("name").notNull(),email:ue("email").notNull(),phone:ue("phone"),subject:ue("subject").notNull(),message:ue("message").notNull(),franchiseId:zt("franchise_id"),businessId:zt("business_id"),status:ue("status").default("pending"),createdAt:ar("created_at").defaultNow()}),hk=gs(Ki).pick({username:!0,password:!0}),dk=Pe.object({username:Pe.string().min(1),password:Pe.string().min(6)}),pk=Pe.object({username:Pe.string().min(1),password:Pe.string().min(6)}),mk=gs(NT).omit({id:!0,createdAt:!0}),gk=gs(AT).omit({id:!0,createdAt:!0}),yk=gs(IT).omit({id:!0,createdAt:!0}),bk=gs(PT).omit({id:!0,createdAt:!0});Ot.fetchConnectionCache=!0;Ot.webSocketConstructor=_d;var OT=new Rt({connectionString:"postgresql://neondb_owner:npg_0CpHBlm2zqaF@ep-nameless-feather-a4dga2p7-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require",max:1}),RT=Jn(OT),LT=process.env.JWT_SECRET||"your-secret-key-here-change-in-production",kT=async(r,e)=>{let t={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type, Authorization","Access-Control-Allow-Methods":"GET, OPTIONS","Content-Type":"application/json"};if(r.httpMethod==="OPTIONS")return{statusCode:200,headers:t,body:""};if(r.httpMethod!=="GET")return{statusCode:405,headers:t,body:JSON.stringify({error:"Method not allowed"})};try{let s=r.headers.authorization||r.headers.Authorization;if(!s||!s.startsWith("Bearer "))return{statusCode:401,headers:t,body:JSON.stringify({error:"No valid authorization token provided"})};let n=s.slice(7),i=py.default.verify(n,LT),[o]=await RT.select().from(Ki).where(Qr(Ki.id,i.userId));return o?{statusCode:200,headers:t,body:JSON.stringify({id:o.id,username:o.username})}:{statusCode:401,headers:t,body:JSON.stringify({error:"User not found"})}}catch(s){return console.error("Auth user function error:",s),{statusCode:401,headers:t,body:JSON.stringify({error:"Invalid token"})}}};0&&(module.exports={handler});
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@neondatabase/serverless/index.mjs:
  (*! Bundled license information:
  
  ieee754/index.js:
    (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  
  buffer/index.js:
    (*!
     * The buffer module from node.js, for the browser.
     *
     * @author   Feross Aboukhadijeh <https://feross.org>
     * @license  MIT
     *)
  *)
*/
